!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://takingdoms.github.io/3do-viewer-preact-with-textures/",e(e.s="Pq/i")}({"/dwh":function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL");e.a=function(t){var e=t.userSettings,r=t.setUserSettings;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",{class:"flex flex-col items-stretch"},Object(a.h)("label",{for:"sidebarPosition"},"Sidebar Position"),Object(a.h)("select",{id:"sidebarPosition",value:e.sidebarPosition,onChange:function(t){var n="left"===t.currentTarget.value?"left":"right";r(i(i({},e),{},{sidebarPosition:n}))}},Object(a.h)("option",{value:"left"},"Left"),Object(a.h)("option",{value:"right"},"Right"))))}},"/u4b":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r("CCBT"),e),o(r("ejsI"),e),o(r("BQX+"),e)},"BQX+":function(t,e,r){"use strict";function n(t,e){var r=[],a=e;do{var c=f.makeStruct(t,a,s.OBJECT_STRUCT),l=o(t,c.OffsetToObjectName),b=i(t,c.OffsetToVertexArray,c.NumberOfVertexes),h=u(t,c.OffsetToPrimitiveArray,c.NumberOfPrimitives),d=0!==c.OffsetToChildObject?n(t,c.OffsetToChildObject):[];r.push({name:l,vertices:b,primitives:h,children:d,xOffset:c.XFromParent,yOffset:c.YFromParent,zOffset:c.ZFromParent}),a=c.OffsetToSiblingObject}while(0!==a);return r}function o(t,e){for(var r=0,n=0;n<256;n++){if(r=n,0===t.getUint8(e+n))break}var o=new Uint8Array(t.buffer,e,r);return b.decode(o)}function i(t,e,r){for(var n=[],o=0;o<r;o++){var i=f.makeStruct(t,e+o*s.VERTEX_STRUCT_SIZE,s.VERTEX_STRUCT);n.push({x:i.x,y:i.y,z:i.z})}return n}function u(t,e,r){for(var n=[],i=0;i<r;i++){for(var u=f.makeStruct(t,e+i*s.PRIMITIVE_STRUCT_SIZE,s.PRIMITIVE_STRUCT),a=[],c=0;c<u.NumberOfVertexIndexes;c++){var l=t.getUint16(u.OffsetToVertexIndexArray+2*c,!0);a.push(l)}var b=o(t,u.OffsetToTextureName);n.push({vertexIndices:a,textureName:b})}return n}var a=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&a(e,t,r);return c(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Parse3do=void 0;var f=l(r("CCBT")),s=r("weEs"),b=new TextDecoder("ascii");e.Parse3do={fromBuffer:function(t){return{rootNodes:n(t,0)}}}},CCBT:function(t,e){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw u}}}}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LE";return"I8"===r?t.getInt8(e):"U8"===r?t.getUint8(e):"I16"===r?t.getInt16(e,"LE"===n):"U16"===r?t.getUint16(e,"LE"===n):t.getInt32(e,"LE"===n)}Object.defineProperty(e,"__esModule",{value:!0}),e.makeStruct=e.readInteger=e.ENDIANNESSES=e.INTEGER_TYPES=void 0,e.INTEGER_TYPES=["U8","I8","U16","I16","U32","I32"],e.ENDIANNESSES=["LE","BE"],e.readInteger=u,e.makeStruct=function(t,e,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LE",c={},l=n(o);try{for(l.s();!(i=l.n()).done;){var f=r(i.value,2),s=f[0],b=f[1];c[s]=u(t,e,b,a),"U8"===b||"I8"===b?e+=1:"U16"===b||"I16"===b?e+=2:"U32"!==b&&"I32"!==b||(e+=4)}}catch(t){l.e(t)}finally{l.f()}return c}},GssO:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r("hosL"),u=r("QRet"),a=r("Xvsu");e.a=function(t){var e=t.color,r=t.setColor,o=n(Object(u.e)(!1),2),c=o[0],l=o[1],f="custom";c||(1===e[0]&&1===e[1]&&1===e[2]&&1===e[3]?f="white":1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]?f="red":0===e[0]&&1===e[1]&&0===e[2]&&1===e[3]?f="green":0===e[0]&&0===e[1]&&1===e[2]&&1===e[3]&&(f="blue"));var s=Object(u.c)((function(){return c?Object(i.h)("div",{class:"space-y-2"},Object(i.h)(a.a,{id:"red",label:"Red",min:0,max:255,value:Math.floor(255*e[0]),setValue:function(t){r([t/255,e[1],e[2],e[3]])}}),Object(i.h)(a.a,{id:"green",label:"Green",min:0,max:255,value:Math.floor(255*e[1]),setValue:function(t){r([e[0],t/255,e[2],e[3]])}}),Object(i.h)(a.a,{id:"blue",label:"Blue",min:0,max:255,value:Math.floor(255*e[2]),setValue:function(t){r([e[0],e[1],t/255,e[3]])}})):null}),[c,e,r]);return Object(i.h)("div",{class:""},Object(i.h)("select",{value:f,onChange:function(t){var e=t.currentTarget.value;"custom"!==e?(l(!1),r("red"===e?[1,0,0,1]:"green"===e?[0,1,0,1]:"blue"===e?[0,0,1,1]:[1,1,1,1])):l(!0)}},Object(i.h)("option",{value:"custom"},"(Custom)"),Object(i.h)("option",{value:"white"},"White"),Object(i.h)("option",{value:"red"},"Red"),Object(i.h)("option",{value:"green"},"Green"),Object(i.h)("option",{value:"blue"},"Blue")),s)}},IomO:function(t,e,r){"use strict";(function(t){var n=r("hosL"),o=r("QRet"),i=r("NOVX"),u=r("tpTz"),a=r("/dwh"),c=r("nF9+"),l=r("qiYd"),f=r("b2Zb");e.a=function(e){var r=e.modelControls,s=e.setModelControls,b=e.userSettings,h=e.setUserSettings,d=e.logoDefs,y=e.canvasRef,p=Object(o.c)((function(){return Object(n.h)(i.a,{modelControls:r,setModelControls:s})}),[r,s]),v=Object(o.c)((function(){return Object(n.h)(a.a,{userSettings:b,setUserSettings:h})}),[b,h]),m=Object(o.c)((function(){var e=r.viewMode,o="regular"===e?Object(n.h)(c.a,{modelControls:r,setModelControls:s,logoDefs:d}):"solid_color"===e?Object(n.h)(l.a,{modelControls:r,setModelControls:s}):"wireframe"===e?Object(n.h)(f.a,{modelControls:r,setModelControls:s}):null;return Object(n.h)(t,null,Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6"},"View Mode Settings"),o)}),[r,s]);return Object(n.h)("div",{class:"max-h-full overflow-auto px-6"},Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1"},"Controls"),p,m,Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6"},"User Settings"),v,Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6"},"Misc."),Object(n.h)(u.a,{modelControls:r,setModelControls:s,canvasRef:y,enableSaveImageButton:b.preserveDrawingBuffer}))}}).call(this,r("hosL").Fragment)},NOVX:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=["regular","solid_color","wireframe"],l=r("Xvsu");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)(l.a,{id:"zoom",label:"Zoom",max:1e3,value:e.zoom,setValue:function(t){return r(i(i({},e),{},{zoom:t}))}}),Object(a.h)(l.a,{id:"rotationX",label:"Rotation X",min:-180,max:180,value:e.rotationX,setValue:function(t){return r(i(i({},e),{},{rotationX:t}))}}),Object(a.h)(l.a,{id:"rotationY",label:"Rotation Y",min:-180,max:180,value:e.rotationY,setValue:function(t){return r(i(i({},e),{},{rotationY:t}))}}),Object(a.h)(l.a,{id:"rotationZ",label:"Rotation Z",min:-180,max:180,value:e.rotationZ,setValue:function(t){return r(i(i({},e),{},{rotationZ:t}))}}),Object(a.h)(l.a,{id:"panX",label:"Pan X",value:e.translationX,setValue:function(t){return r(i(i({},e),{},{translationX:t}))}}),Object(a.h)(l.a,{id:"panY",label:"Pan Y",value:e.translationY,setValue:function(t){return r(i(i({},e),{},{translationY:t}))}}),Object(a.h)("div",{class:"flex flex-col items-stretch"},Object(a.h)("label",{for:"viewMode"},"View Mode"),Object(a.h)("select",{id:"viewMode",value:e.viewMode,onChange:function(t){var n=c.find((function(e){return e===t.currentTarget.value}));n&&r(i(i({},e),{},{viewMode:n}))}},Object(a.h)("option",{value:"regular"},"Regular"),Object(a.h)("option",{value:"solid_color"},"Solid Color"),Object(a.h)("option",{value:"wireframe"},"Wireframe"))))}},"Pq/i":function(t,e,r){"use strict";r.r(e);var n=r("hosL"),o=n.h,i=n.render,u=n.hydrate,a=function(t){return t&&t.default?t.default:t},c=function(t){return"/"===t[t.length-1]?t:t+"/"};if("serviceWorker"in navigator&&navigator.serviceWorker.register(c(r.p)+"sw.js"),"function"==typeof a(r("qVkA"))){var l=document.getElementById("preact_root")||document.body.firstElementChild;0,function(){var t=a(r("qVkA")),e={},n=document.querySelector('[type="__PREACT_CLI_DATA__"]');n&&(e=JSON.parse(decodeURI(n.innerHTML)).preRenderData||e);var f={preRenderData:e},s=e.url?c(e.url):"";(u&&s===c(location.pathname)?u:i)(o(t,{CLI_DATA:f}),document.body,l)}()}},QRet:function(t,e,r){"use strict";function n(t,e){g.options.__h&&g.options.__h(p,t,O||e),O=0;var r=p.__H||(p.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:_}),r.__[t]}function o(t){return O=1,function(t,e,r){var o=n(y++,2);if(o.t=t,!o.__c&&(o.__=[r?r(e):d(void 0,e),function(t){var e=o.__N?o.__N[0]:o.__[0],r=o.t(e,t);e!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=p,!p.u)){p.u=!0;var i=p.shouldComponentUpdate;p.shouldComponentUpdate=function(t,e,r){if(!o.__c.__H)return!0;var n=o.__c.__H.__.filter((function(t){return t.__c}));if(n.every((function(t){return!t.__N})))return!i||i.call(this,t,e,r);var u=!1;return n.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(u=!0)}})),!(!u&&o.__c.props===t)&&(!i||i.call(this,t,e,r))}}return o.__N||o.__}(d,t)}function i(t,e){var r=n(y++,3);!g.options.__s&&h(r.__H,e)&&(r.__=t,r.i=e,p.__H.__h.push(r))}function u(t){return O=5,a((function(){return{current:t}}),[])}function a(t,e){var r=n(y++,7);return h(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function c(t,e){return O=8,a((function(){return t}),e)}function l(){for(var t;t=j.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(s),t.__H.__h.forEach(b),t.__H.__h=[]}catch(e){t.__H.__h=[],g.options.__e(e,t.__v)}}function f(t){var e,r=function(){clearTimeout(n),T&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);T&&(e=requestAnimationFrame(r))}function s(t){var e=p,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),p=e}function b(t){var e=p;t.__c=t.__(),p=e}function h(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function d(t,e){return"function"==typeof e?e(t):e}r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return o}));var y,p,v,m,g=r("hosL"),O=0,j=[],_=[],w=g.options.__b,S=g.options.__r,x=g.options.diffed,P=g.options.__c,M=g.options.unmount;g.options.__b=function(t){p=null,w&&w(t)},g.options.__r=function(t){S&&S(t),y=0;var e=(p=t.__c).__H;e&&(v===p?(e.__h=[],p.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=_,t.__N=t.i=void 0}))):(e.__h.forEach(s),e.__h.forEach(b),e.__h=[])),v=p},g.options.diffed=function(t){x&&x(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==j.push(e)&&m===g.options.requestAnimationFrame||((m=g.options.requestAnimationFrame)||f)(l)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==_&&(t.__=t.__V),t.i=void 0,t.__V=_}))),v=p=null},g.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(s),t.__h=t.__h.filter((function(t){return!t.__||b(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],g.options.__e(r,t.__v)}})),P&&P(t,e)},g.options.unmount=function(t){M&&M(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{s(t)}catch(t){e=t}})),r.__H=void 0,e&&g.options.__e(e,r.__v))};var T="function"==typeof requestAnimationFrame},Xvsu:function(t,e,r){"use strict";var n=r("hosL");e.a=function(t){var e=t.id,r=t.label,o=t.min,i=t.max,u=t.value,a=t.setValue;return Object(n.h)("div",null,Object(n.h)("div",null,Object(n.h)("label",{for:e},r)),Object(n.h)("div",{class:"flex items-center space-x-2"},Object(n.h)("input",{type:"number",style:{width:"80px"},value:u,onChange:function(t){a(+t.currentTarget.value)}}),Object(n.h)("input",{class:"grow",type:"range",min:o,max:i,style:{width:"120px"},value:u,onChange:function(t){a(+t.currentTarget.value||0)}})))}},b2Zb:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=r("GssO");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("div",{class:""},"Wireframe Color"),Object(a.h)(c.a,{color:e.wireframeColor,setColor:function(t){return r(i(i({},e),{},{wireframeColor:t}))}})))}},ejsI:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},hosL:function(t,e,r){"use strict";function n(t,e){for(var r in e)t[r]=e[r];return t}function o(t){var e=t.parentNode;e&&e.removeChild(t)}function i(t,e,r){var n,o,i,a={};for(i in e)"key"==i?n=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?k.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return u(t,a,n,o,null)}function u(t,e,r,n,o){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++I:o};return null==o&&null!=A.vnode&&A.vnode(i),i}function a(){return{current:null}}function c(t){return t.children}function l(t,e){this.props=t,this.context=e}function f(t,e){if(null==e)return t.__?f(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?f(t):null}function s(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return s(t)}}function b(t){(!t.__d&&(t.__d=!0)&&U.push(t)&&!h.__r++||L!==A.debounceRendering)&&((L=A.debounceRendering)||setTimeout)(h)}function h(){for(var t;h.__r=U.length;)t=U.sort((function(t,e){return t.__v.__b-e.__v.__b})),U=[],t.some((function(t){var e,r,o,i,u,a;t.__d&&(u=(i=(e=t).__v).__e,(a=e.__P)&&(r=[],(o=n({},i)).__v=i.__v+1,_(a,i,o,e.__n,void 0!==a.ownerSVGElement,null!=i.__h?[u]:null,r,null==u?f(i):u,i.__h),w(r,i),i.__e!=u&&s(i)))}))}function d(t,e,r,n,o,i,a,l,s,b){var h,d,p,m,g,O,j,w=n&&n.__k||N,S=w.length;for(r.__k=[],h=0;h<e.length;h++)if(null!=(m=r.__k[h]=null==(m=e[h])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?u(null,m,null,null,m):Array.isArray(m)?u(c,{children:m},null,null,null):m.__b>0?u(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)){if(m.__=r,m.__b=r.__b+1,null===(p=w[h])||p&&m.key==p.key&&m.type===p.type)w[h]=void 0;else for(d=0;d<S;d++){if((p=w[d])&&m.key==p.key&&m.type===p.type){w[d]=void 0;break}p=null}_(t,m,p=p||F,o,i,a,l,s,b),g=m.__e,(d=m.ref)&&p.ref!=d&&(j||(j=[]),p.ref&&j.push(p.ref,null,m),j.push(d,m.__c||g,m)),null!=g?(null==O&&(O=g),"function"==typeof m.type&&m.__k===p.__k?m.__d=s=y(m,s,t):s=v(t,m,p,w,g,s),"function"==typeof r.type&&(r.__d=s)):s&&p.__e==s&&s.parentNode!=t&&(s=f(p))}for(r.__e=O,h=S;h--;)null!=w[h]&&P(w[h],w[h]);if(j)for(h=0;h<j.length;h++)x(j[h],j[++h],j[++h])}function y(t,e,r){for(var n,o=t.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=t,e="function"==typeof n.type?y(n,e,r):v(r,n,n,o,n.__e,e));return e}function p(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){p(t,e)})):e.push(t)),e}function v(t,e,r,n,o,i){var u,a,c;if(void 0!==e.__d)u=e.__d,e.__d=void 0;else if(null==r||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),u=null;else{for(a=i,c=0;(a=a.nextSibling)&&c<n.length;c+=1)if(a==o)break t;t.insertBefore(o,i),u=i}return void 0!==u?u:o.nextSibling}function m(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]=null==r?"":"number"!=typeof r||V.test(e)?r:r+"px"}function g(t,e,r,n,o){var i;t:if("style"===e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||m(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||m(t.style,e,r[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n||t.addEventListener(e,i?j:O,i):t.removeEventListener(e,i?j:O,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==r?"":r;break t}catch(t){}"function"==typeof r||(null==r||!1===r&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,r))}}function O(t){this.l[t.type+!1](A.event?A.event(t):t)}function j(t){this.l[t.type+!0](A.event?A.event(t):t)}function _(t,e,r,o,i,u,a,f,s){var b,h,y,p,v,m,g,O,j,_,w,x,P,T,E,C=e.type;if(void 0!==e.constructor)return null;null!=r.__h&&(s=r.__h,f=e.__e=r.__e,e.__h=null,u=[f]),(b=A.__b)&&b(e);try{t:if("function"==typeof C){if(O=e.props,j=(b=C.contextType)&&o[b.__c],_=b?j?j.props.value:b.__:o,r.__c?g=(h=e.__c=r.__c).__=h.__E:("prototype"in C&&C.prototype.render?e.__c=h=new C(O,_):(e.__c=h=new l(O,_),h.constructor=C,h.render=M),j&&j.sub(h),h.props=O,h.state||(h.state={}),h.context=_,h.__n=o,y=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=C.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=n({},h.__s)),n(h.__s,C.getDerivedStateFromProps(O,h.__s))),p=h.props,v=h.state,y)null==C.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==C.getDerivedStateFromProps&&O!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(O,_),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(O,h.__s,_)||e.__v===r.__v){for(h.props=O,h.state=h.__s,e.__v!==r.__v&&(h.__d=!1),h.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach((function(t){t&&(t.__=e)})),w=0;w<h._sb.length;w++)h.__h.push(h._sb[w]);h._sb=[],h.__h.length&&a.push(h);break t}null!=h.componentWillUpdate&&h.componentWillUpdate(O,h.__s,_),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(p,v,m)}))}if(h.context=_,h.props=O,h.__v=e,h.__P=t,x=A.__r,P=0,"prototype"in C&&C.prototype.render){for(h.state=h.__s,h.__d=!1,x&&x(e),b=h.render(h.props,h.state,h.context),T=0;T<h._sb.length;T++)h.__h.push(h._sb[T]);h._sb=[]}else do{h.__d=!1,x&&x(e),b=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(o=n(n({},o),h.getChildContext())),y||null==h.getSnapshotBeforeUpdate||(m=h.getSnapshotBeforeUpdate(p,v)),E=null!=b&&b.type===c&&null==b.key?b.props.children:b,d(t,Array.isArray(E)?E:[E],e,r,o,i,u,a,f,s),h.base=e.__e,e.__h=null,h.__h.length&&a.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==u&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=S(r.__e,e,r,o,i,u,a,s);(b=A.diffed)&&b(e)}catch(t){e.__v=null,(s||null!=u)&&(e.__e=f,e.__h=!!s,u[u.indexOf(f)]=null),A.__e(t,e,r)}}function w(t,e){A.__c&&A.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){A.__e(t,e.__v)}}))}function S(t,e,r,n,i,u,a,c){var l,s,b,h=r.props,y=e.props,p=e.type,v=0;if("svg"===p&&(i=!0),null!=u)for(;v<u.length;v++)if((l=u[v])&&"setAttribute"in l==!!p&&(p?l.localName===p:3===l.nodeType)){t=l,u[v]=null;break}if(null==t){if(null===p)return document.createTextNode(y);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,y.is&&y),u=null,c=!1}if(null===p)h===y||c&&t.data===y||(t.data=y);else{if(u=u&&k.call(t.childNodes),s=(h=r.props||F).dangerouslySetInnerHTML,b=y.dangerouslySetInnerHTML,!c){if(null!=u)for(h={},v=0;v<t.attributes.length;v++)h[t.attributes[v].name]=t.attributes[v].value;(b||s)&&(b&&(s&&b.__html==s.__html||b.__html===t.innerHTML)||(t.innerHTML=b&&b.__html||""))}if(function(t,e,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in e||g(t,i,null,r[i],n);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===e[i]||g(t,i,e[i],r[i],n)}(t,y,h,i,c),b)e.__k=[];else if(v=e.props.children,d(t,Array.isArray(v)?v:[v],e,r,n,i&&"foreignObject"!==p,u,a,u?u[0]:r.__k&&f(r,0),c),null!=u)for(v=u.length;v--;)null!=u[v]&&o(u[v]);c||("value"in y&&void 0!==(v=y.value)&&(v!==t.value||"progress"===p&&!v||"option"===p&&v!==h.value)&&g(t,"value",v,h.value,!1),"checked"in y&&void 0!==(v=y.checked)&&v!==t.checked&&g(t,"checked",v,h.checked,!1))}return t}function x(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){A.__e(t,r)}}function P(t,e,r){var n,i;if(A.unmount&&A.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||x(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){A.__e(t,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&P(n[i],e,r||"function"!=typeof t.type);r||null==t.__e||o(t.__e),t.__=t.__e=t.__d=void 0}function M(t,e,r){return this.constructor(t,r)}function T(t,e,r){var n,o,u;A.__&&A.__(t,e),o=(n="function"==typeof r)?null:r&&r.__k||e.__k,u=[],_(e,t=(!n&&r||e).__k=i(c,null,[t]),o||F,F,void 0!==e.ownerSVGElement,!n&&r?[r]:o?null:e.firstChild?k.call(e.childNodes):null,u,!n&&r?r:o?o.__e:e.firstChild,n),w(u,t)}function E(t,e){T(t,e,E)}function C(t,e,r){var o,i,a,c=n({},t.props);for(a in e)"key"==a?o=e[a]:"ref"==a?i=e[a]:c[a]=e[a];return arguments.length>2&&(c.children=arguments.length>3?k.call(arguments,2):r),u(t.type,c,o||t.key,i||t.ref,null)}function R(t,e){var r={__c:e="__cC"+B++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,n;return this.getChildContext||(r=[],(n={})[e]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&r.some(b)},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return r.Provider.__=r.Consumer.contextType=r}r.r(e),r.d(e,"Component",(function(){return l})),r.d(e,"Fragment",(function(){return c})),r.d(e,"cloneElement",(function(){return C})),r.d(e,"createContext",(function(){return R})),r.d(e,"createElement",(function(){return i})),r.d(e,"createRef",(function(){return a})),r.d(e,"h",(function(){return i})),r.d(e,"hydrate",(function(){return E})),r.d(e,"isValidElement",(function(){return D})),r.d(e,"options",(function(){return A})),r.d(e,"render",(function(){return T})),r.d(e,"toChildArray",(function(){return p}));var k,A,I,D,U,L,B,F={},N=[],V=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;k=N.slice,A={__e:function(t,e,r,n){for(var o,i,u;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),u=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,n||{}),u=o.__d),u)return o.__E=o}catch(e){t=e}throw t}},I=0,D=function(t){return null!=t&&void 0===t.constructor},l.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=n({},this.state),"function"==typeof t&&(t=t(n({},r),this.props)),t&&n(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),b(this))},l.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),b(this))},l.prototype.render=c,U=[],h.__r=0,B=0},"nF9+":function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=function(t){var e=t.htmlColor,r=t.isSelected,n=t.onSelect;return Object(a.h)("button",{class:"w-8 h-8 border border-2 p-1 rounded-full flex justify-center items-center",style:{borderColor:e},onClick:function(){r||n()}},Object(a.h)("span",{class:"w-full h-full rounded-full leading-none",style:{backgroundColor:r?e:""}}))};e.a=function(t){var e=t.modelControls,r=t.setModelControls,n=t.logoDefs;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("div",null,"Team Color"),Object(a.h)("div",{class:"flex flex-wrap -m-1 p-1"},n.idxList.map((function(t){return Object(a.h)("div",{key:t,class:"m-1"},Object(a.h)(c,{htmlColor:n.idxToHtmlColor(t),isSelected:e.logoColorIdx===t,onSelect:function(){return r(i(i({},e),{},{logoColorIdx:t}))}}))})))),Object(a.h)("div",{class:"space-y-2"},Object(a.h)("div",null,Object(a.h)("div",null,"Texture Filter (Min.)"),Object(a.h)("select",{value:e.textureFilterMin,onChange:function(t){var n=t.currentTarget.value;r(i(i({},e),{},{textureFilterMin:n}))}},Object(a.h)("option",{value:"nearest"},"Nearest"),Object(a.h)("option",{value:"linear"},"Linear"))),Object(a.h)("div",null,Object(a.h)("div",null,"Texture Filter (Mag.)"),Object(a.h)("select",{value:e.textureFilterMag,onChange:function(t){var n=t.currentTarget.value;r(i(i({},e),{},{textureFilterMag:n}))}},Object(a.h)("option",{value:"nearest"},"Nearest"),Object(a.h)("option",{value:"linear"},"Linear")))),Object(a.h)("div",null,Object(a.h)("label",{class:"flex items-center"},Object(a.h)("input",{type:"checkbox",checked:e.enableLightingRegular,onChange:function(t){r(i(i({},e),{},{enableLightingRegular:t.currentTarget.checked}))}}),Object(a.h)("span",{class:"pl-1"},"Enable Lighting"))))}},qVkA:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function p(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===b(e)?e:String(e)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P(n.key),n)}}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=S(t);if(e){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}function x(t,e,r){return(e=P(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===m(e)?e:String(e)}function M(t){Fo=t}function T(t){return t*Vo}function E(t,e){return Math.abs(t-e)<=Bo*Math.max(1,Math.abs(t),Math.abs(e))}function C(){var t=new Fo(16);return Fo!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function R(t){var e=new Fo(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function A(t,e,r,n,o,i,u,a,c,l,f,s,b,h,d,y){var p=new Fo(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=o,p[5]=i,p[6]=u,p[7]=a,p[8]=c,p[9]=l,p[10]=f,p[11]=s,p[12]=b,p[13]=h,p[14]=d,p[15]=y,p}function I(t,e,r,n,o,i,u,a,c,l,f,s,b,h,d,y,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=c,t[8]=l,t[9]=f,t[10]=s,t[11]=b,t[12]=h,t[13]=d,t[14]=y,t[15]=p,t}function D(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],i=e[6],u=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=o,t[13]=u,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function L(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=e[4],a=e[5],c=e[6],l=e[7],f=e[8],s=e[9],b=e[10],h=e[11],d=e[12],y=e[13],p=e[14],v=e[15],m=r*a-n*u,g=r*c-o*u,O=r*l-i*u,j=n*c-o*a,_=n*l-i*a,w=o*l-i*c,S=f*y-s*d,x=f*p-b*d,P=f*v-h*d,M=s*p-b*y,T=s*v-h*y,E=b*v-h*p,C=m*E-g*T+O*M+j*P-_*x+w*S;return C?(t[0]=(a*E-c*T+l*M)*(C=1/C),t[1]=(o*T-n*E-i*M)*C,t[2]=(y*w-p*_+v*j)*C,t[3]=(b*_-s*w-h*j)*C,t[4]=(c*P-u*E-l*x)*C,t[5]=(r*E-o*P+i*x)*C,t[6]=(p*O-d*w-v*g)*C,t[7]=(f*w-b*O+h*g)*C,t[8]=(u*T-a*P+l*S)*C,t[9]=(n*P-r*T-i*S)*C,t[10]=(d*_-y*O+v*m)*C,t[11]=(s*O-f*_-h*m)*C,t[12]=(a*x-u*M-c*S)*C,t[13]=(r*M-n*x+o*S)*C,t[14]=(y*g-d*j-p*m)*C,t[15]=(f*j-s*g+b*m)*C,t):null}function B(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=e[4],a=e[5],c=e[6],l=e[7],f=e[8],s=e[9],b=e[10],h=e[11],d=e[12],y=e[13],p=e[14],v=e[15];return t[0]=a*(b*v-h*p)-s*(c*v-l*p)+y*(c*h-l*b),t[1]=-(n*(b*v-h*p)-s*(o*v-i*p)+y*(o*h-i*b)),t[2]=n*(c*v-l*p)-a*(o*v-i*p)+y*(o*l-i*c),t[3]=-(n*(c*h-l*b)-a*(o*h-i*b)+s*(o*l-i*c)),t[4]=-(u*(b*v-h*p)-f*(c*v-l*p)+d*(c*h-l*b)),t[5]=r*(b*v-h*p)-f*(o*v-i*p)+d*(o*h-i*b),t[6]=-(r*(c*v-l*p)-u*(o*v-i*p)+d*(o*l-i*c)),t[7]=r*(c*h-l*b)-u*(o*h-i*b)+f*(o*l-i*c),t[8]=u*(s*v-h*y)-f*(a*v-l*y)+d*(a*h-l*s),t[9]=-(r*(s*v-h*y)-f*(n*v-i*y)+d*(n*h-i*s)),t[10]=r*(a*v-l*y)-u*(n*v-i*y)+d*(n*l-i*a),t[11]=-(r*(a*h-l*s)-u*(n*h-i*s)+f*(n*l-i*a)),t[12]=-(u*(s*p-b*y)-f*(a*p-c*y)+d*(a*b-c*s)),t[13]=r*(s*p-b*y)-f*(n*p-o*y)+d*(n*b-o*s),t[14]=-(r*(a*p-c*y)-u*(n*p-o*y)+d*(n*c-o*a)),t[15]=r*(a*b-c*s)-u*(n*b-o*s)+f*(n*c-o*a),t}function F(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],u=t[5],a=t[6],c=t[7],l=t[8],f=t[9],s=t[10],b=t[11],h=t[12],d=t[13],y=t[14],p=t[15];return(e*u-r*i)*(s*p-b*y)-(e*a-n*i)*(f*p-b*d)+(e*c-o*i)*(f*y-s*d)+(r*a-n*u)*(l*p-b*h)-(r*c-o*u)*(l*y-s*h)+(n*c-o*a)*(l*d-f*h)}function N(t,e,r){var n=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=e[8],b=e[9],h=e[10],d=e[11],y=e[12],p=e[13],v=e[14],m=e[15],g=r[0],O=r[1],j=r[2],_=r[3];return t[0]=g*n+O*a+j*s+_*y,t[1]=g*o+O*c+j*b+_*p,t[2]=g*i+O*l+j*h+_*v,t[3]=g*u+O*f+j*d+_*m,t[4]=(g=r[4])*n+(O=r[5])*a+(j=r[6])*s+(_=r[7])*y,t[5]=g*o+O*c+j*b+_*p,t[6]=g*i+O*l+j*h+_*v,t[7]=g*u+O*f+j*d+_*m,t[8]=(g=r[8])*n+(O=r[9])*a+(j=r[10])*s+(_=r[11])*y,t[9]=g*o+O*c+j*b+_*p,t[10]=g*i+O*l+j*h+_*v,t[11]=g*u+O*f+j*d+_*m,t[12]=(g=r[12])*n+(O=r[13])*a+(j=r[14])*s+(_=r[15])*y,t[13]=g*o+O*c+j*b+_*p,t[14]=g*i+O*l+j*h+_*v,t[15]=g*u+O*f+j*d+_*m,t}function V(t,e,r){var n,o,i,u,a,c,l,f,s,b,h,d,y=r[0],p=r[1],v=r[2];return e===t?(t[12]=e[0]*y+e[4]*p+e[8]*v+e[12],t[13]=e[1]*y+e[5]*p+e[9]*v+e[13],t[14]=e[2]*y+e[6]*p+e[10]*v+e[14],t[15]=e[3]*y+e[7]*p+e[11]*v+e[15]):(o=e[1],i=e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=e[8],b=e[9],h=e[10],d=e[11],t[0]=n=e[0],t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=c,t[6]=l,t[7]=f,t[8]=s,t[9]=b,t[10]=h,t[11]=d,t[12]=n*y+a*p+s*v+e[12],t[13]=o*y+c*p+b*v+e[13],t[14]=i*y+l*p+h*v+e[14],t[15]=u*y+f*p+d*v+e[15]),t}function X(t,e,r){var n=r[0],o=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Y(t,e,r,n){var o,i,u,a,c,l,f,s,b,h,d,y,p,v,m,g,O,j,_,w,S,x,P,M,T=n[0],E=n[1],C=n[2],R=Math.hypot(T,E,C);return R<Bo?null:(T*=R=1/R,E*=R,C*=R,o=Math.sin(r),i=Math.cos(r),c=e[1],l=e[2],f=e[3],b=e[5],h=e[6],d=e[7],p=e[9],v=e[10],m=e[11],_=T*E*(u=1-i)-C*o,w=E*E*u+i,S=C*E*u+T*o,x=T*C*u+E*o,P=E*C*u-T*o,M=C*C*u+i,t[0]=(a=e[0])*(g=T*T*u+i)+(s=e[4])*(O=E*T*u+C*o)+(y=e[8])*(j=C*T*u-E*o),t[1]=c*g+b*O+p*j,t[2]=l*g+h*O+v*j,t[3]=f*g+d*O+m*j,t[4]=a*_+s*w+y*S,t[5]=c*_+b*w+p*S,t[6]=l*_+h*w+v*S,t[7]=f*_+d*w+m*S,t[8]=a*x+s*P+y*M,t[9]=c*x+b*P+p*M,t[10]=l*x+h*P+v*M,t[11]=f*x+d*P+m*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function W(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[4],u=e[5],a=e[6],c=e[7],l=e[8],f=e[9],s=e[10],b=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+l*n,t[5]=u*o+f*n,t[6]=a*o+s*n,t[7]=c*o+b*n,t[8]=l*o-i*n,t[9]=f*o-u*n,t[10]=s*o-a*n,t[11]=b*o-c*n,t}function H(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],u=e[1],a=e[2],c=e[3],l=e[8],f=e[9],s=e[10],b=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-l*n,t[1]=u*o-f*n,t[2]=a*o-s*n,t[3]=c*o-b*n,t[8]=i*n+l*o,t[9]=u*n+f*o,t[10]=a*n+s*o,t[11]=c*n+b*o,t}function z(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],u=e[1],a=e[2],c=e[3],l=e[4],f=e[5],s=e[6],b=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+l*n,t[1]=u*o+f*n,t[2]=a*o+s*n,t[3]=c*o+b*n,t[4]=l*o-i*n,t[5]=f*o-u*n,t[6]=s*o-a*n,t[7]=b*o-c*n,t}function G(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function q(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,e,r){var n,o,i,u=r[0],a=r[1],c=r[2],l=Math.hypot(u,a,c);return l<Bo?null:(u*=l=1/l,a*=l,c*=l,n=Math.sin(e),o=Math.cos(e),t[0]=u*u*(i=1-o)+o,t[1]=a*u*i+c*n,t[2]=c*u*i-a*n,t[3]=0,t[4]=u*a*i-c*n,t[5]=a*a*i+o,t[6]=c*a*i+u*n,t[7]=0,t[8]=u*c*i+a*n,t[9]=a*c*i-u*n,t[10]=c*c*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function $(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function K(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function J(t,e,r){var n=e[0],o=e[1],i=e[2],u=e[3],a=n+n,c=o+o,l=i+i,f=n*a,s=n*c,b=n*l,h=o*c,d=o*l,y=i*l,p=u*a,v=u*c,m=u*l;return t[0]=1-(h+y),t[1]=s+m,t[2]=b-v,t[3]=0,t[4]=s-m,t[5]=1-(f+y),t[6]=d+p,t[7]=0,t[8]=b+v,t[9]=d-p,t[10]=1-(f+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function tt(t,e){var r=new Fo(3),n=-e[0],o=-e[1],i=-e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=n*n+o*o+i*i+u*u;return s>0?(r[0]=2*(a*u+f*n+c*i-l*o)/s,r[1]=2*(c*u+f*o+l*n-a*i)/s,r[2]=2*(l*u+f*i+a*o-c*n)/s):(r[0]=2*(a*u+f*n+c*i-l*o),r[1]=2*(c*u+f*o+l*n-a*i),r[2]=2*(l*u+f*i+a*o-c*n)),J(t,e,r),t}function et(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function rt(t,e){var r=e[4],n=e[5],o=e[6],i=e[8],u=e[9],a=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(r,n,o),t[2]=Math.hypot(i,u,a),t}function nt(t,e){var r=new Fo(3);rt(r,e);var n=1/r[0],o=1/r[1],i=1/r[2],u=e[0]*n,a=e[1]*o,c=e[2]*i,l=e[4]*n,f=e[5]*o,s=e[6]*i,b=e[8]*n,h=e[9]*o,d=e[10]*i,y=u+f+d,p=0;return y>0?(p=2*Math.sqrt(y+1),t[3]=.25*p,t[0]=(s-h)/p,t[1]=(b-c)/p,t[2]=(a-l)/p):u>f&&u>d?(p=2*Math.sqrt(1+u-f-d),t[3]=(s-h)/p,t[0]=.25*p,t[1]=(a+l)/p,t[2]=(b+c)/p):f>d?(p=2*Math.sqrt(1+f-u-d),t[3]=(b-c)/p,t[0]=(a+l)/p,t[1]=.25*p,t[2]=(s+h)/p):(p=2*Math.sqrt(1+d-u-f),t[3]=(a-l)/p,t[0]=(b+c)/p,t[1]=(s+h)/p,t[2]=.25*p),t}function ot(t,e,r,n){var o=e[0],i=e[1],u=e[2],a=e[3],c=o+o,l=i+i,f=u+u,s=o*c,b=o*l,h=o*f,d=i*l,y=i*f,p=u*f,v=a*c,m=a*l,g=a*f,O=n[0],j=n[1],_=n[2];return t[0]=(1-(d+p))*O,t[1]=(b+g)*O,t[2]=(h-m)*O,t[3]=0,t[4]=(b-g)*j,t[5]=(1-(s+p))*j,t[6]=(y+v)*j,t[7]=0,t[8]=(h+m)*_,t[9]=(y-v)*_,t[10]=(1-(s+d))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function it(t,e,r,n,o){var i=e[0],u=e[1],a=e[2],c=e[3],l=i+i,f=u+u,s=a+a,b=i*l,h=i*f,d=i*s,y=u*f,p=u*s,v=a*s,m=c*l,g=c*f,O=c*s,j=n[0],_=n[1],w=n[2],S=o[0],x=o[1],P=o[2],M=(1-(y+v))*j,T=(h+O)*j,E=(d-g)*j,C=(h-O)*_,R=(1-(b+v))*_,k=(p+m)*_,A=(d+g)*w,I=(p-m)*w,D=(1-(b+y))*w;return t[0]=M,t[1]=T,t[2]=E,t[3]=0,t[4]=C,t[5]=R,t[6]=k,t[7]=0,t[8]=A,t[9]=I,t[10]=D,t[11]=0,t[12]=r[0]+S-(M*S+C*x+A*P),t[13]=r[1]+x-(T*S+R*x+I*P),t[14]=r[2]+P-(E*S+k*x+D*P),t[15]=1,t}function ut(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=r+r,a=n+n,c=o+o,l=r*u,f=n*u,s=n*a,b=o*u,h=o*a,d=o*c,y=i*u,p=i*a,v=i*c;return t[0]=1-s-d,t[1]=f+v,t[2]=b-p,t[3]=0,t[4]=f-v,t[5]=1-l-d,t[6]=h+y,t[7]=0,t[8]=b+p,t[9]=h-y,t[10]=1-l-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function at(t,e,r,n,o,i,u){var a=1/(r-e),c=1/(o-n),l=1/(i-u);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(o+n)*c,t[10]=(u+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*l,t[15]=0,t}function ct(t,e,r,n,o){var i,u=1/Math.tan(e/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=(o+n)*(i=1/(n-o)),t[14]=2*o*n*i):(t[10]=-1,t[14]=-2*n),t}function lt(t,e,r,n,o){var i,u=1/Math.tan(e/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=o*(i=1/(n-o)),t[14]=o*n*i):(t[10]=-1,t[14]=-n),t}function ft(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(u+a),l=2/(o+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(u-a)*c*.5,t[9]=(o-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function st(t,e,r,n,o,i,u){var a=1/(e-r),c=1/(n-o),l=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*a,t[13]=(o+n)*c,t[14]=(u+i)*l,t[15]=1,t}function bt(t,e,r,n,o,i,u){var a=1/(e-r),c=1/(n-o),l=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+r)*a,t[13]=(o+n)*c,t[14]=i*l,t[15]=1,t}function ht(t,e,r,n){var o,i,u,a,c,l,f,s,b,h,d=e[0],y=e[1],p=e[2],v=n[0],m=n[1],g=n[2],O=r[0],j=r[1],_=r[2];return Math.abs(d-O)<Bo&&Math.abs(y-j)<Bo&&Math.abs(p-_)<Bo?D(t):(f=d-O,s=y-j,b=p-_,o=m*(b*=h=1/Math.hypot(f,s,b))-g*(s*=h),i=g*(f*=h)-v*b,u=v*s-m*f,(h=Math.hypot(o,i,u))?(o*=h=1/h,i*=h,u*=h):(o=0,i=0,u=0),a=s*u-b*i,c=b*o-f*u,l=f*i-s*o,(h=Math.hypot(a,c,l))?(a*=h=1/h,c*=h,l*=h):(a=0,c=0,l=0),t[0]=o,t[1]=a,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=s,t[7]=0,t[8]=u,t[9]=l,t[10]=b,t[11]=0,t[12]=-(o*d+i*y+u*p),t[13]=-(a*d+c*y+l*p),t[14]=-(f*d+s*y+b*p),t[15]=1,t)}function dt(t,e,r,n){var o=e[0],i=e[1],u=e[2],a=n[0],c=n[1],l=n[2],f=o-r[0],s=i-r[1],b=u-r[2],h=f*f+s*s+b*b;h>0&&(f*=h=1/Math.sqrt(h),s*=h,b*=h);var d=c*b-l*s,y=l*f-a*b,p=a*s-c*f;return(h=d*d+y*y+p*p)>0&&(d*=h=1/Math.sqrt(h),y*=h,p*=h),t[0]=d,t[1]=y,t[2]=p,t[3]=0,t[4]=s*p-b*y,t[5]=b*d-f*p,t[6]=f*y-s*d,t[7]=0,t[8]=f,t[9]=s,t[10]=b,t[11]=0,t[12]=o,t[13]=i,t[14]=u,t[15]=1,t}function yt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function pt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function vt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function mt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function gt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ot(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function jt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function _t(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],a=t[5],c=t[6],l=t[7],f=t[8],s=t[9],b=t[10],h=t[11],d=t[12],y=t[13],p=t[14],v=t[15],m=e[0],g=e[1],O=e[2],j=e[3],_=e[4],w=e[5],S=e[6],x=e[7],P=e[8],M=e[9],T=e[10],E=e[11],C=e[12],R=e[13],k=e[14],A=e[15];return Math.abs(r-m)<=Bo*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-g)<=Bo*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-O)<=Bo*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(i-j)<=Bo*Math.max(1,Math.abs(i),Math.abs(j))&&Math.abs(u-_)<=Bo*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(a-w)<=Bo*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(c-S)<=Bo*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-x)<=Bo*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(f-P)<=Bo*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(s-M)<=Bo*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(b-T)<=Bo*Math.max(1,Math.abs(b),Math.abs(T))&&Math.abs(h-E)<=Bo*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(d-C)<=Bo*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(y-R)<=Bo*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(p-k)<=Bo*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(v-A)<=Bo*Math.max(1,Math.abs(v),Math.abs(A))}function wt(){var t=new Fo(3);return Fo!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function St(t){var e=new Fo(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function xt(t){return Math.hypot(t[0],t[1],t[2])}function Pt(t,e,r){var n=new Fo(3);return n[0]=t,n[1]=e,n[2]=r,n}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Tt(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Et(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Ct(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Rt(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function kt(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function At(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function It(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Dt(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Ut(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Lt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Bt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function Ft(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function Nt(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function Vt(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function Xt(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function Yt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Wt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ht(t,e){var r=e[0],n=e[1],o=e[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function zt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Gt(t,e,r){var n=e[0],o=e[1],i=e[2],u=r[0],a=r[1],c=r[2];return t[0]=o*c-i*a,t[1]=i*u-n*c,t[2]=n*a-o*u,t}function qt(t,e,r,n){var o=e[0],i=e[1],u=e[2];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t}function Zt(t,e,r,n,o,i){var u=i*i,a=u*(2*i-3)+1,c=u*(i-2)+i,l=u*(i-1),f=u*(3-2*i);return t[0]=e[0]*a+r[0]*c+n[0]*l+o[0]*f,t[1]=e[1]*a+r[1]*c+n[1]*l+o[1]*f,t[2]=e[2]*a+r[2]*c+n[2]*l+o[2]*f,t}function $t(t,e,r,n,o,i){var u=1-i,a=u*u,c=i*i,l=a*u,f=3*i*a,s=3*c*u,b=c*i;return t[0]=e[0]*l+r[0]*f+n[0]*s+o[0]*b,t[1]=e[1]*l+r[1]*f+n[1]*s+o[1]*b,t[2]=e[2]*l+r[2]*f+n[2]*s+o[2]*b,t}function Kt(t,e){e=e||1;var r=2*No()*Math.PI,n=2*No()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t}function Qt(t,e,r){var n=e[0],o=e[1],i=e[2],u=r[3]*n+r[7]*o+r[11]*i+r[15];return t[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/(u=u||1),t[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/u,t[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/u,t}function Jt(t,e,r){var n=e[0],o=e[1],i=e[2];return t[0]=n*r[0]+o*r[3]+i*r[6],t[1]=n*r[1]+o*r[4]+i*r[7],t[2]=n*r[2]+o*r[5]+i*r[8],t}function te(t,e,r){var n=r[0],o=r[1],i=r[2],u=e[0],a=e[1],c=e[2],l=o*c-i*a,f=i*u-n*c,s=n*a-o*u,b=o*s-i*f,h=i*l-n*s,d=n*f-o*l,y=2*r[3];return f*=y,s*=y,h*=2,d*=2,t[0]=u+(l*=y)+(b*=2),t[1]=a+f+h,t[2]=c+s+d,t}function ee(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function re(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function ne(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function oe(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],a=e[2],c=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(i*i+u*u+a*a),l=c&&zt(t,e)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function ie(t){return t[0]=0,t[1]=0,t[2]=0,t}function ue(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ae(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ce(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],a=e[2];return Math.abs(r-i)<=Bo*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=Bo*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-a)<=Bo*Math.max(1,Math.abs(o),Math.abs(a))}function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function fe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function se(t,e,r){return(e=be(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function be(t){var e=function(t,e){if("object"!==le(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===le(e)?e:String(e)}function he(t){return 0==(t&t-1)}function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return pe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ge(n.key),n)}}function me(t,e,r){return(e=ge(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ge(t){var e=function(t,e){if("object"!==de(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===de(e)?e:String(e)}function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function _e(){return _e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=we(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_e.apply(this,arguments)}function we(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Te(t)););return t}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Te(t);if(e){var o=Te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Pe(this,r)}}function Pe(t,e){if(e&&("object"===Oe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Me(t)}function Me(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Te(t)}function Ee(t){var e=function(t,e){if("object"!==Oe(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Oe(e)?e:String(e)}function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Re(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ke(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,De(n.key),n)}}function Ie(t,e,r){return(e=De(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function De(t){var e=function(t,e){if("object"!==Ce(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ce(e)?e:String(e)}function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fe(n.key),n)}}function Be(t,e,r){return(e=Fe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fe(t){var e=function(t,e){if("object"!==Ue(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ue(e)?e:String(e)}function Ne(t){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ne(t)}function Ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ze(n.key),n)}}function Ye(t,e){return Ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ye(t,e)}function We(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ge(t);if(e){var o=Ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return He(this,r)}}function He(t,e){if(e&&("object"===Ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ze(t)}function ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ge(t){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ge(t)}function qe(t,e,r){return(e=Ze(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ze(t){var e=function(t,e){if("object"!==Ne(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ne(e)?e:String(e)}function $e(t){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nr(n.key),n)}}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}function Je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=rr(t);if(e){var o=rr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tr(this,r)}}function tr(t,e){if(e&&("object"===$e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return er(t)}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rr(t){return rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rr(t)}function nr(t){var e=function(t,e){if("object"!==$e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==$e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$e(e)?e:String(e)}function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==or(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===or(o)?o:String(o)),n)}var o}function ar(t,e){return ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ar(t,e)}function cr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=fr(t);if(e){var o=fr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return lr(this,r)}}function lr(t,e){if(e&&("object"===or(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function fr(t){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fr(t)}function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==sr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===sr(o)?o:String(o)),n)}var o}function dr(t,e){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dr(t,e)}function yr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=vr(t);if(e){var o=vr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return pr(this,r)}}function pr(t,e){if(e&&("object"===sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function vr(t){return vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vr(t)}function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==mr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===mr(o)?o:String(o)),n)}var o}function jr(t,e){return jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jr(t,e)}function _r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Sr(t);if(e){var o=Sr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wr(this,r)}}function wr(t,e){if(e&&("object"===mr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}function xr(t){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function Pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tr(n.key),n)}}function Mr(t,e,r){return(e=Tr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tr(t){var e=function(t,e){if("object"!==xr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xr(e)?e:String(e)}function Er(t){return function(t){if(Array.isArray(t))return Cr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Cr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rr(t,e,r){var n=e.vertices.flatMap((function(t){return t})),o=new li(t.getGl(),t.getProgramInfo().attribLocations.vertexPosition);o.bufferData(li.createBufferSourceFromPositions(n));var i,u,a=e.indices.map((function(t){if(t<0||t>e.vertices.length-1)throw"Index out of bounds: ".concat(t);return t})),c=new ui(t.getGl());if(c.bufferData(ui.createBufferSourceFromIndices(a)),r){for(var l=[],f=0;f<e.vertices.length;f++)l[f]=Oo.create();for(var s=0;s<a.length;s+=3){var b=a[s+0],h=a[s+1],d=a[s+2],y=Oo.fromValues.apply(Oo,Er(e.vertices[b])),p=Oo.fromValues.apply(Oo,Er(e.vertices[h])),v=Oo.fromValues.apply(Oo,Er(e.vertices[d])),m=Oo.sub(Oo.create(),p,y),g=Oo.sub(Oo.create(),v,y),O=Oo.cross(Oo.create(),m,g);Oo.add(l[b],l[b],O),Oo.add(l[h],l[h],O),Oo.add(l[d],l[d],O)}for(var j=0;j<e.vertices.length;j++)Oo.normalize(l[j],l[j]);(i=new ci(t.getGl(),t.getProgramInfo().attribLocations.vertexNormal)).bufferData(ci.createBufferSourceFromPositions(l.flatMap((function(t){return[t[0],t[1],t[2]]}))))}return e.texCoords&&(u=new fi(t.getGl(),t.getProgramInfo().attribLocations.textureCoord)).bufferData(fi.createBufferSourceFromCoords(e.texCoords)),new si(o,c,i,u)}function kr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ar(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ar(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ir(t,e,r,n,o,i,u){var a=new oi(null,"WRAPPER:"+e.name);a.translate(e.xOffset*hi,e.yOffset*hi,e.zOffset*hi);var c,l=[],f=kr(e.primitives);try{for(f.s();!(c=f.n()).done;){var s=c.value,b=Dr(t,e.vertices,s,o,i,u);null!==b&&(u&&Io.validateTextureName(s.textureName)&&b.setTextureKey(s.textureName),l.push(b))}}catch(t){f.e(t)}finally{f.f()}var h=new oi(l,e.name);a.addChild(h),n.set(e,h);var d,y=kr(e.children);try{for(y.s();!(d=y.n()).done;){Ir(t,d.value,h,n,o,i,u)}}catch(t){y.e(t)}finally{y.f()}r.addChild(a)}function Dr(t,e,r,n,o,i){var u=r.vertexIndices.map((function(t){var r=e[t];return[r.x*hi,r.y*hi,r.z*hi]}));return 3===r.vertexIndices.length?bi.createModelFromIndexedVertices(t,{vertices:u,indices:[0,1,2],texCoords:i?[0,0,0,1,1,1]:null},o):4===r.vertexIndices.length?bi.createModelFromIndexedVertices(t,{vertices:u,indices:n?[0,1,2,0,2,3]:[0,1,2,3],texCoords:i&&n?[0,0,1,0,1,1,0,1]:null},o):null}function Ur(t){return Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ur(t)}function Lr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Fr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fr(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Fr(t,e){if(t){if("string"==typeof t)return Nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(t,e):void 0}}function Nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yr(n.key),n)}}function Xr(t,e,r){return(e=Yr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yr(t){var e=function(t,e){if("object"!==Ur(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ur(e)?e:String(e)}function Wr(t){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wr(t)}function Hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==Wr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===Wr(o)?o:String(o)),n)}var o}function Gr(){return Gr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=qr(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Gr.apply(this,arguments)}function qr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qr(t)););return t}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}function $r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qr(t);if(e){var o=Qr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Kr(this,r)}}function Kr(t,e){if(e&&("object"===Wr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}function Jr(t){return Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jr(t)}function tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==Jr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Jr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===Jr(o)?o:String(o)),n)}var o}function rn(t,e){return rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rn(t,e)}function nn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=un(t);if(e){var o=un(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return on(this,r)}}function on(t,e){if(e&&("object"===Jr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function un(t){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},un(t)}function an(t){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},an(t)}function cn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==an(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===an(o)?o:String(o)),n)}var o}function fn(t,e){return fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fn(t,e)}function sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=hn(t);if(e){var o=hn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return bn(this,r)}}function bn(t,e){if(e&&("object"===an(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function hn(t){return hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hn(t)}function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function yn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sn(n.key),n)}}function pn(){return pn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=vn(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pn.apply(this,arguments)}function vn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_n(t)););return t}function mn(t,e){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mn(t,e)}function gn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=_n(t);if(e){var o=_n(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return On(this,r)}}function On(t,e){if(e&&("object"===dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jn(t)}function jn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _n(t){return _n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_n(t)}function wn(t,e,r){return(e=Sn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sn(t){var e=function(t,e){if("object"!==dn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dn(e)?e:String(e)}function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function Pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(r),!0).forEach((function(e){Tn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==xn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==xn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===xn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function En(t){return function(t){if(Array.isArray(t))return kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Rn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Rn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t,e){if(t){if("string"==typeof t)return kn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kn(t,e):void 0}}function kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function An(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return In(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return In(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Dn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Un(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Un(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function Bn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(r),!0).forEach((function(e){Nn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Ln(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ln(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vn(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Xn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Yn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(t,e){if(t){if("string"==typeof t)return Wn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wn(t,e):void 0}}function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(r),!0).forEach((function(e){qn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Hn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Hn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Qn(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Jn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){Qn(a,n,o,i,u,"next",t)}function u(t){Qn(a,n,o,i,u,"throw",t)}var a=t.apply(e,r);i(void 0)}))}}function to(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=io(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function eo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ro(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eo(Object(r),!0).forEach((function(e){no(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function no(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Kn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Kn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||io(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(t,e){if(t){if("string"==typeof t)return uo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uo(t,e):void 0}}function uo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ao(t){var e,r=new Map,n=function t(e){r.set(e,{highlight:!1,hide:!1});var n,o=to(e.children);try{for(o.s();!(n=o.n()).done;){t(n.value)}}catch(t){o.e(t)}finally{o.f()}},o=to(t.rootNodes);try{for(o.s();!(e=o.n()).done;){n(e.value)}}catch(t){o.e(t)}finally{o.f()}return r}function co(){return(co=Jn((function*(){return{regular:{fsSource:yield fetch("assets/shaders/regular.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/regular.vs").then((function(t){return t.text()}))},solid:{fsSource:yield fetch("assets/shaders/solid_color.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/solid_color.vs").then((function(t){return t.text()}))},wireframe:{fsSource:yield fetch("assets/shaders/wireframe.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/wireframe.vs").then((function(t){return t.text()}))}}}))).apply(this,arguments)}function lo(){return(lo=Jn((function*(t){var e;if("string"==typeof t){var r=yield fetch(t);e=yield r.arrayBuffer()}else e=yield t.arrayBuffer();var n=new DataView(e);return Ro.Parse3do.fromBuffer(n)}))).apply(this,arguments)}function fo(){return(fo=Jn((function*(t,e,r,n){var o,i=new Set,u=function t(e){var r,n=to(e.primitives);try{for(n.s();!(r=n.n()).done;){var o=r.value.textureName;Io.validateTextureName(o)&&i.add(o)}}catch(t){n.e(t)}finally{n.f()}var u,a=to(e.children);try{for(a.s();!(u=a.n()).done;){t(u.value)}}catch(t){a.e(t)}finally{a.f()}},a=to(t.rootNodes);try{for(a.s();!(o=a.n()).done;){u(o.value)}}catch(t){a.e(t)}finally{a.f()}var c={};return yield Promise.all(Array.from(i).map((function(t){return new Promise((function(o,i){if(""===(t=t.trim()))return c[t]=null,void o();if(!e.textureKeyUsesLogo(t)){var u="".concat(t,".").concat(n),a=new Image;return a.src=r+u,a.onerror=function(){console.error("Failed to load image at: ".concat(a.src)),c[t]=null,o()},void(a.onload=function(){c[t]={type:"html",image:a},o()})}Promise.all(e.idxList.map((function(o){return new Promise((function(i){var u=e.idxToTextureKey(o,t),a=e.idxToTextureFilename(o,t),l="".concat(a,".").concat(n),f=new Image;f.src=r+l,f.onerror=function(){console.error("Failed to load image at: ".concat(f.src)),c[u]=null,i()},f.onload=function(){c[u]={type:"html",image:f},i()}}))}))).then((function(){return o()}),i)}))}))),c}))).apply(this,arguments)}function so(t){return so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},so(t)}function bo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ho(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bo(Object(r),!0).forEach((function(e){yo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==so(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==so(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===so(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function po(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.r(e);var mo={};r.r(mo),r.d(mo,"EPSILON",(function(){return Bo})),r.d(mo,"ARRAY_TYPE",(function(){return Fo})),r.d(mo,"RANDOM",(function(){return No})),r.d(mo,"setMatrixArrayType",(function(){return M})),r.d(mo,"toRadian",(function(){return T})),r.d(mo,"equals",(function(){return E}));var go={};r.r(go),r.d(go,"create",(function(){return C})),r.d(go,"clone",(function(){return R})),r.d(go,"copy",(function(){return k})),r.d(go,"fromValues",(function(){return A})),r.d(go,"set",(function(){return I})),r.d(go,"identity",(function(){return D})),r.d(go,"transpose",(function(){return U})),r.d(go,"invert",(function(){return L})),r.d(go,"adjoint",(function(){return B})),r.d(go,"determinant",(function(){return F})),r.d(go,"multiply",(function(){return N})),r.d(go,"translate",(function(){return V})),r.d(go,"scale",(function(){return X})),r.d(go,"rotate",(function(){return Y})),r.d(go,"rotateX",(function(){return W})),r.d(go,"rotateY",(function(){return H})),r.d(go,"rotateZ",(function(){return z})),r.d(go,"fromTranslation",(function(){return G})),r.d(go,"fromScaling",(function(){return q})),r.d(go,"fromRotation",(function(){return Z})),r.d(go,"fromXRotation",(function(){return $})),r.d(go,"fromYRotation",(function(){return K})),r.d(go,"fromZRotation",(function(){return Q})),r.d(go,"fromRotationTranslation",(function(){return J})),r.d(go,"fromQuat2",(function(){return tt})),r.d(go,"getTranslation",(function(){return et})),r.d(go,"getScaling",(function(){return rt})),r.d(go,"getRotation",(function(){return nt})),r.d(go,"fromRotationTranslationScale",(function(){return ot})),r.d(go,"fromRotationTranslationScaleOrigin",(function(){return it})),r.d(go,"fromQuat",(function(){return ut})),r.d(go,"frustum",(function(){return at})),r.d(go,"perspectiveNO",(function(){return ct})),r.d(go,"perspective",(function(){return Yo})),r.d(go,"perspectiveZO",(function(){return lt})),r.d(go,"perspectiveFromFieldOfView",(function(){return ft})),r.d(go,"orthoNO",(function(){return st})),r.d(go,"ortho",(function(){return Wo})),r.d(go,"orthoZO",(function(){return bt})),r.d(go,"lookAt",(function(){return ht})),r.d(go,"targetTo",(function(){return dt})),r.d(go,"str",(function(){return yt})),r.d(go,"frob",(function(){return pt})),r.d(go,"add",(function(){return vt})),r.d(go,"subtract",(function(){return mt})),r.d(go,"multiplyScalar",(function(){return gt})),r.d(go,"multiplyScalarAndAdd",(function(){return Ot})),r.d(go,"exactEquals",(function(){return jt})),r.d(go,"equals",(function(){return _t})),r.d(go,"mul",(function(){return Ho})),r.d(go,"sub",(function(){return zo}));var Oo={};r.r(Oo),r.d(Oo,"create",(function(){return wt})),r.d(Oo,"clone",(function(){return St})),r.d(Oo,"length",(function(){return xt})),r.d(Oo,"fromValues",(function(){return Pt})),r.d(Oo,"copy",(function(){return Mt})),r.d(Oo,"set",(function(){return Tt})),r.d(Oo,"add",(function(){return Et})),r.d(Oo,"subtract",(function(){return Ct})),r.d(Oo,"multiply",(function(){return Rt})),r.d(Oo,"divide",(function(){return kt})),r.d(Oo,"ceil",(function(){return At})),r.d(Oo,"floor",(function(){return It})),r.d(Oo,"min",(function(){return Dt})),r.d(Oo,"max",(function(){return Ut})),r.d(Oo,"round",(function(){return Lt})),r.d(Oo,"scale",(function(){return Bt})),r.d(Oo,"scaleAndAdd",(function(){return Ft})),r.d(Oo,"distance",(function(){return Nt})),r.d(Oo,"squaredDistance",(function(){return Vt})),r.d(Oo,"squaredLength",(function(){return Xt})),r.d(Oo,"negate",(function(){return Yt})),r.d(Oo,"inverse",(function(){return Wt})),r.d(Oo,"normalize",(function(){return Ht})),r.d(Oo,"dot",(function(){return zt})),r.d(Oo,"cross",(function(){return Gt})),r.d(Oo,"lerp",(function(){return qt})),r.d(Oo,"hermite",(function(){return Zt})),r.d(Oo,"bezier",(function(){return $t})),r.d(Oo,"random",(function(){return Kt})),r.d(Oo,"transformMat4",(function(){return Qt})),r.d(Oo,"transformMat3",(function(){return Jt})),r.d(Oo,"transformQuat",(function(){return te})),r.d(Oo,"rotateX",(function(){return ee})),r.d(Oo,"rotateY",(function(){return re})),r.d(Oo,"rotateZ",(function(){return ne})),r.d(Oo,"angle",(function(){return oe})),r.d(Oo,"zero",(function(){return ie})),r.d(Oo,"str",(function(){return ue})),r.d(Oo,"exactEquals",(function(){return ae})),r.d(Oo,"equals",(function(){return ce})),r.d(Oo,"sub",(function(){return Go})),r.d(Oo,"mul",(function(){return qo})),r.d(Oo,"div",(function(){return Zo})),r.d(Oo,"dist",(function(){return $o})),r.d(Oo,"sqrDist",(function(){return Ko})),r.d(Oo,"len",(function(){return Qo})),r.d(Oo,"sqrLen",(function(){return Jo})),r.d(Oo,"forEach",(function(){return ti}));var jo=r("hosL"),_o=r("QRet"),wo={sidebarPosition:"right",sidebarWidth:300,defaultTextureFilterMin:"nearest",defaultTextureFilterMag:"nearest",preserveDrawingBuffer:!0},So={save:function(t){var e=JSON.stringify(t);localStorage.setItem("user",e)},load:function(){var t=localStorage.getItem("user");if(null!==t){var e=JSON.parse(t);if("object"!==n(e))throw new Error("User settings is not an object");var r=e.sidebarPosition;if("left"!==r&&"right"!==r)throw new Error("Invalid sidebarPosition");var o=e.sidebarWidth;if("number"!=typeof o)throw new Error("Invalid sidebarWidth");var i=e.defaultTextureFilterMin;if("nearest"!==i&&"linear"!==i)throw new Error("Invalid defaultTextureFilterMin");var u=e.defaultTextureFilterMag;if("nearest"!==u&&"linear"!==u)throw new Error("Invalid defaultTextureFilterMag");var a=e.preserveDrawingBuffer;return"boolean"!=typeof a&&(a=wo.preserveDrawingBuffer),{sidebarPosition:r,sidebarWidth:o,defaultTextureFilterMin:i,defaultTextureFilterMag:u,preserveDrawingBuffer:a}}}},xo={rotationX:50,rotationY:-150,rotationZ:0,translationX:0,translationY:0,zoom:900,viewMode:"regular",viewColor:[1,1,1,1],canvasBackground:"black",canvasBackgroundSize:"auto",canvasBackgroundRepeat:"repeat",enableLightingRegular:!1,logoColorIdx:0,textureFilterMin:"linear",textureFilterMag:"linear",enableLightingSolidColor:!0,solidColor:[1,1,1,1],wireframeColor:[1,1,1,1]},Po=function(t){var e=t.title,r=t.children,n=t.showByDefault,i=o(Object(_o.e)(null!=n&&n),2),u=i[0],a=i[1],c=u?Object(jo.h)("div",null,r):null,l=Object(jo.h)("button",{onClick:function(){return a(!u)}},u?"[Hide]":"[Show]");return Object(jo.h)("div",null,Object(jo.h)("div",{class:"flex justify-between space-x-2"},Object(jo.h)("span",null,e),l),c)},Mo=["aradrag.3do","tardrag.3do","verdrag.3do","zondrag.3do","creaeri.3do","aralode.3do","araking.3do","cresage.3do","tarnecro.3do","vermage.3do","zonhunt.3do"].map((function(t){return{name:t,path:"assets/3do-samples/"+t}})),To="https://github.com/takingdoms/3do-viewer-preact/issues",Eo="border border-gray-700 px-2 py-0.5 hover:text-yellow-500 focus:text-yellow-500",Co=function(t){var e=t.onSubmit,r=t.defaultUserSettings,n=t.setDefaultUserSettings,o=Object(_o.c)((function(){return Object(jo.h)("div",{class:"text-sm"},Object(jo.h)("h3",{class:"text-base font-bold"},"Controls:"),Object(jo.h)("p",null,Object(jo.h)("u",null,"Left mouse button:")," hold and drag to rotate the model."),Object(jo.h)("p",null,Object(jo.h)("u",null,"Middle mouse button:")," hold and drag to move the model."),Object(jo.h)("p",null,Object(jo.h)("u",null,"Mouse wheel:")," zoom in or out."))}),[]),i=Object(_o.c)((function(){return Object(jo.h)("div",{class:"text-sm"},Object(jo.h)("h3",{class:"text-base font-bold"},"About:"),Object(jo.h)("p",null,"Submit suggestions or problems at: ",Object(jo.h)("a",{class:"text-sky-500 hover:text-sky-700 focus:text-sky-700 hover:underline focus:underline",href:To,target:"_blank"},To)),Object(jo.h)("p",null,"...or message spagg#2962 on Discord."))}),[]),u=Object(_o.c)((function(){return Object(jo.h)("form",{class:"px-4 py-2 border border-4 border-gray-600 rounded h-full",onSubmit:function(t){t.preventDefault();var r=new FormData(t.currentTarget).get("file");r&&r.size&&r.name&&e(r)}},Object(jo.h)("div",{class:"text-3xl text-center mb-4"},"Option 1"),Object(jo.h)("div",{class:"text-xl text-gray-400 mb-2"},"Load your own file"),Object(jo.h)("div",{className:"flex items-stretch space-x-2"},Object(jo.h)("input",{name:"file",type:"file",class:"grow border border-gray-700"}),Object(jo.h)("button",{class:Eo,type:"submit"},"GO")))}),[e]),a=Object(_o.c)((function(){return Object(jo.h)("form",{class:"px-4 py-2 border border-4 border-gray-600 rounded h-full",onSubmit:function(t){var r;t.preventDefault();var n=null===(r=new FormData(t.currentTarget).get("sample"))||void 0===r?void 0:r.toString().trim();n&&e(n)}},Object(jo.h)("div",{class:"text-3xl text-center mb-4"},"Option 2"),Object(jo.h)("div",{class:"text-xl text-gray-400 mb-2"},"Pick a sample file"),Object(jo.h)("div",{className:"flex items-stretch space-x-2"},Object(jo.h)("select",{name:"sample",class:"grow border border-gray-700"},Object(jo.h)("option",{value:""}),Mo.map((function(t,e){return Object(jo.h)("option",{value:t.path,key:e},t.name)}))),Object(jo.h)("button",{class:Eo,type:"submit"},"GO")))}),[e]),l=Object(_o.c)((function(){return Object(jo.h)(Po,{title:"Advanced"},Object(jo.h)("div",{class:"space-y-2"},Object(jo.h)("div",null,Object(jo.h)("label",{class:"flex items-center"},Object(jo.h)("input",{type:"checkbox",checked:r.preserveDrawingBuffer,onChange:function(t){n(c(c({},r),{},{preserveDrawingBuffer:t.currentTarget.checked}))}}),Object(jo.h)("span",{class:"font-bold ml-2"},"WebGL / Preserve Drawing Buffer")),Object(jo.h)("span",{class:"text-gray-300 text-sm"},'Disable this only if the model rendering is lagging (might not even change anything).\n            Disabling this will also disable the "Save Model Image" button and the ability to\n            "Right click > Save Image As"'))))}),[r,n]);return Object(jo.h)("div",{class:"min-w-screen min-h-screen bg-gray-800 flex flex-col justify-center items-center"},Object(jo.h)("div",{style:{maxWidth:800},class:"container flex justify-center items-stretch\r flex-col-reverse md:flex-col"},Object(jo.h)("div",{class:"flex flex-wrap items-stretch"},Object(jo.h)("div",{class:"flex-1 p-4",style:{minWidth:300}},o),Object(jo.h)("div",{class:"flex-1 p-4",style:{minWidth:300}},i)),Object(jo.h)("div",{class:"flex flex-wrap items-stretch"},Object(jo.h)("div",{class:"flex-1 p-4"},u),Object(jo.h)("div",{class:"flex-1 p-4"},a)),Object(jo.h)("div",{class:"mt-8 self-center"},l)))},Ro=r("/u4b"),ko={defaultIdx:0,idxList:Array.from({length:10}).map((function(t,e){return e})),idxCount:10,idxToName:function(t){return t.toString()},idxToHtmlColor:function(t){return Ao[t]},textureKeyUsesLogo:function(t){return t.toLowerCase().includes("logo")},idxToTextureKey:function(t,e){return 0===t?e:"".concat(e,"/color:").concat(t)},idxToTextureFilename:function(t,e){return 0===t?e:"".concat(e,".").concat(t)}},Ao={0:"lightblue",1:"red",2:"white",3:"green",4:"darkblue",5:"purple",6:"yellow",7:"black",8:"orange",9:"brown"},Io={compareObjectsShallow:function(t,e){var r=Object.entries(t),n=Object.keys(e);return r.length===n.length&&r.every((function(t){var r=f(t,2),n=r[0];return n in e&&e[n]===r[1]}))},createUpdatedMap:function(t,e,r){var n=new Map(t);return n.set(e,r),n},validateTextureName:function(t){return/^(?!^(?:COM|PRN|AUX|NUL|CON|CLOCK\$)(?:\..+)?$)[^\s\\/:\*\?\"<>\|\x00-\x1F\x7F]{1,254}$/.test(t)}},Do=function(){function t(t){p(this,"config",void 0),p(this,"resizeObserver",void 0),p(this,"cleanupEvents",void 0),this.config=t}var e,r,n;return e=t,(r=[{key:"setupEvents",value:function(){var t,e,r,n,o,i=this,u=this.config,a=u.listener,c=u.canvas,l=u.mode,f=!1,s=function(u){if(void 0===t){if(0===u.button)t="rotate";else{if(1!==u.button)return;t="pan"}e=u.clientX,r=u.clientY,n="rotate"===t?i.config.modelControls.rotationX:i.config.modelControls.translationX,o="rotate"===t?i.config.modelControls.rotationY:i.config.modelControls.translationY}},b=function(u){if(void 0!==e&&void 0!==r&&void 0!==n&&void 0!==o){var a=Math.round(.75*(u.clientX-e)),c=Math.round(.75*(u.clientY-r));if(0!==a||0!==c){if(0!==a)if("rotate"===t){for(var s=o+a;s>180;)s-=360;for(;s<-180;)s+=360;i.config.modelControls.rotationY=s}else i.config.modelControls.translationX=n+a;if(0!==c)if("rotate"===t){for(var b=n+c;b>180;)b-=360;for(;b<-180;)b+=360;i.config.modelControls.rotationX=b}else i.config.modelControls.translationY=o+c;f=!0,"static"===l&&i.render()}}},h=function(){t=e=r=n=o=void 0,f&&(a.onModelControlsChanged(d({},i.config.modelControls)),f=!1)},y=function(){"hidden"===document.visibilityState&&h()},p=function(t){0!==t.deltaY&&(i.config.modelControls.zoom+=t.deltaY,"static"===i.config.mode&&i.render(),a.onModelControlsChanged(d({},i.config.modelControls)))};c.addEventListener("mousedown",s),c.addEventListener("mousemove",b),window.addEventListener("mouseup",h),document.addEventListener("visibilitychange",y),c.addEventListener("wheel",p),this.cleanupEvents=function(){c.removeEventListener("mousedown",s),c.removeEventListener("mousedown",b),window.removeEventListener("mouseup",h),document.removeEventListener("visibilitychange",y),c.removeEventListener("wheel",p)};var v=function(){var t=c.parentElement;if(!t)throw new Error("Canvas has no parent!!");var e=t.clientWidth,r=t.clientHeight,n=!1;return c.width!==e&&(c.width=e,n=!0),c.height!==r&&(c.height=r,n=!0),!!n&&(i.onResized(),!0)};this.resizeObserver=new ResizeObserver(v);var m=c.parentElement;if(!m)throw window.alert("Failed to create canvas"),new Error("Canvas has no parent!! (Can't listen to resizing...)");this.resizeObserver.observe(m),v()||this.onResized()}},{key:"setModelControls",value:function(t){this.config.modelControls=t,"static"===this.config.mode&&this.render()}},{key:"setTextureMapping",value:function(t){this.config.textureMapping=t,"static"===this.config.mode&&this.render()}},{key:"setObjectStateMap",value:function(t){this.config.objStateMap=t,"static"===this.config.mode&&this.render()}},{key:"destroy",value:function(){var t;this.resizeObserver&&this.resizeObserver.disconnect(),null===(t=this.cleanupEvents)||void 0===t||t.call(this)}},{key:"width",get:function(){return this.config.canvas.width}},{key:"height",get:function(){return this.config.canvas.height}}])&&y(e.prototype,r),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Uo=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),x(w(r=i.call(this,t)),"ctx",void 0),x(w(r),"renderCount",0);var n=t.canvas.getContext("2d");if(null===n)throw window.alert("Canvas not supported in this browser."),new Error("Failed to create context");return r.ctx=n,r.setupEvents(),r}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}(e,t);var r,n,o,i=j(e);return r=e,(n=[{key:"onResized",value:function(){this.render()}},{key:"render",value:function(){var t=this.config.modelControls;console.log("Rendering next  (#".concat(this.renderCount,")"));var e=performance.now(),r=this.width,n=this.height;this.ctx.fillStyle="rgb(4, 16, 22)",this.ctx.fillRect(0,0,r,n),this.ctx.strokeStyle="rgb(0, 0, 200)",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,n/2),this.ctx.lineTo(r,n/2),this.ctx.stroke(),this.ctx.moveTo(r/2,0),this.ctx.lineTo(r/2,n),this.ctx.stroke();var o=["renderCount: ".concat(this.renderCount),"viewWidth: ".concat(r),"viewHeight: ".concat(n),"zoom: ".concat(t.zoom),"rotationX: ".concat(t.rotationX),"rotationY: ".concat(t.rotationY),"rotationZ: ".concat(t.rotationZ),"translationX: ".concat(t.translationX),"translationY: ".concat(t.translationY),"viewMode: ".concat(t.viewMode)];this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.fillStyle="white",this.ctx.font="".concat(18,"px monospace"),this.ctx.strokeStyle="red";for(var i=this.ctx.measureText(o.reduce((function(t,e){return t.length>e.length?t:e}))).width,u=18*o.length+4*o.length*2,a=0;a<o.length;a++)this.ctx.fillText(o[a],r/2-i/2,n/2-u/2+(26*a+13));var c=performance.now();console.log("Finished rendering  in ".concat(c-e,"ms")),this.renderCount++}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(Do),Lo={compileShader:function(t,e,r){var n=t.createShader(r);if(null===n)throw'Failed to create shader of type "'.concat(r,'"');if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw"Could not compile shader: ".concat(t.getShaderInfoLog(n));return n},createProgram:function(t,e,r){var n=t.createProgram();if(null===n)throw"Failed to create program";if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw"Program failed to link: ".concat(t.getProgramInfoLog(n));return n},resizeCanvasToDisplaySize:function(t){var e=t.clientWidth,r=t.clientHeight,n=t.width!==e||t.height!==r;return n&&(t.width=e,t.height=r),n}},Bo=1e-6,Fo="undefined"!=typeof Float32Array?Float32Array:Array,No=Math.random,Vo=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Xo,Yo=ct,Wo=st,Ho=N,zo=mt,Go=Ct,qo=Rt,Zo=kt,$o=Nt,Ko=Vt,Qo=xt,Jo=Xt,ti=(Xo=wt(),function(t,e,r,n,o,i){var u,a;for(e||(e=3),r||(r=0),a=n?Math.min(n*e+r,t.length):t.length,u=r;u<a;u+=e)Xo[0]=t[u],Xo[1]=t[u+1],Xo[2]=t[u+2],o(Xo,Xo,i),t[u]=Xo[0],t[u+1]=Xo[1],t[u+2]=Xo[2];return t}),ei=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),se(this,"gl",void 0),se(this,"handle",void 0),se(this,"deleted",!1),se(this,"ok",!1),this.gl=e;var r=e.createTexture();if(null===r)throw new Error("Failed to create texture.");this.handle=r}var e,r,n;return e=t,(r=[{key:"use",value:function(t,e,r){if(this.deleted)throw"Trying to use a texture that has already been deleted.";return!!this.ok&&(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.uniform1i(t,0),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,r),!0)}},{key:"loadDataFromPixels",value:function(t,e,r){if(this.deleted)throw"Trying to use a texture that has already been deleted.";var n=this.gl.RGBA,o=this.gl.RGBA,i=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.texImage2D(this.gl.TEXTURE_2D,0,n,t,e,0,o,i,r),this.ok=!0}},{key:"loadDataFromImage",value:function(t){var e=this;if(this.deleted)throw"Trying to use a texture that has already been deleted.";if(!t.complete||0===t.naturalWidth){console.error("Trying to load data from an image that hasn't yet loaded!");var r=new Uint8Array([255,255,255,255]);return this.loadDataFromPixels(1,1,r),void(t.onload=function(){t.complete&&0!==t.naturalWidth&&e.loadDataFromImage(t)})}var n=this.gl.RGBA,o=this.gl.RGBA,i=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.texImage2D(this.gl.TEXTURE_2D,0,n,o,i,t),he(t.width)&&he(t.height)&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.ok=!0}},{key:"delete",value:function(){this.gl.deleteTexture(this.handle),this.deleted=!0}}])&&fe(e.prototype,r),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ri=function(t){function e(t,r,n,o){var u,a,c,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=i.call(this,t,r,n),a=Me(u),l=void 0,(c=Ee(c="viewMode"))in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,u.viewMode=o,u}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(e,t);var r,n,o,i=xe(e);return r=e,(n=[{key:"drawElements",value:function(t){this.gl.drawElements("wireframe"===this.viewMode?this.gl.LINE_LOOP:this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0)}},{key:"useTexture",value:function(t){return"regular"!==this.viewMode||_e(Te(e.prototype),"useTexture",this).call(this,t)}}])&&je(r.prototype,n),o&&je(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,"gl",void 0),me(this,"programInfo",void 0),me(this,"logoDefs",void 0),me(this,"currentLogoIdx",void 0),me(this,"textureDatabase",{}),me(this,"lastTexture",void 0),me(this,"baseEntityColor",new Float32Array([1,1,1,1])),me(this,"textureMinFilter",void 0),me(this,"textureMagFilter",void 0),this.gl=e,this.programInfo=r,this.logoDefs=n,this.currentLogoIdx=n.defaultIdx,this.textureMinFilter=e.NEAREST,this.textureMagFilter=e.NEAREST}var e,r,n;return e=t,(r=[{key:"getGl",value:function(){return this.gl}},{key:"getProgramInfo",value:function(){return this.programInfo}},{key:"getBaseEntityColor",value:function(){return this.baseEntityColor}},{key:"setBaseEntityColor",value:function(t){this.baseEntityColor=t}},{key:"setUniformMatrix4",value:function(t,e){var r=this.programInfo.uniformLocations[t];r&&this.gl.uniformMatrix4fv(r,!1,e)}},{key:"setUniformFloat4",value:function(t,e){if(4!==e.length)throw new Error("data.length is not 4: ".concat(e.length));var r=this.programInfo.uniformLocations[t];r&&this.gl.uniform4fv(r,e)}},{key:"setUniformBool",value:function(t,e){var r=this.programInfo.uniformLocations[t];r&&this.gl.uniform1i(r,e?1:0)}},{key:"setTextureMinFilter",value:function(t){this.textureMinFilter=t}},{key:"setTextureMagFilter",value:function(t){this.textureMagFilter=t}},{key:"drawElements",value:function(t){this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0)}},{key:"useTexture",value:function(t){var e;if(null===t)e=null;else{var r=this.logoDefs.textureKeyUsesLogo(t)?this.logoDefs.idxToTextureKey(this.currentLogoIdx,t):t,n=this.textureDatabase[r];void 0===n?(console.error("Missing texture for: ".concat(r)),e=null):e=n}return this.lastTexture===e?null!==e:(this.lastTexture=e,null!==e&&(e.use(this.programInfo.uniformLocations.sampler,this.textureMinFilter,this.textureMagFilter),!0))}},{key:"changeTextureMapping",value:function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var n=ye(r[e],2),o=n[0],i=n[1],u=this.textureDatabase[o];u!==i&&(null!=u&&u.delete(),this.textureDatabase[o]=null===i?null:this.setupTexture(i))}}},{key:"setCurrentLogoIdx",value:function(t){this.currentLogoIdx=t}},{key:"setupTexture",value:function(t){var e=new ei(this.gl);return"html"===t.type?e.loadDataFromImage(t.image):e.loadDataFromPixels(t.width,t.height,t.data),e}}])&&ve(e.prototype,r),n&&ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),ni=new Float32Array([1,1,0,1]),oi=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,"model",void 0),Ie(this,"name",void 0),Ie(this,"children",void 0),Ie(this,"parent",void 0),Ie(this,"modelViewMatrix",void 0),Ie(this,"relativeModelViewMatrix",void 0),Ie(this,"stateOptions",void 0),this.model=e,this.name=null!=r?r:null,this.children=[],this.parent=null,this.modelViewMatrix=go.create(),this.relativeModelViewMatrix=go.create(),this.stateOptions={visibile:!0,highlighted:!1}}var e,r,n;return e=t,(r=[{key:"addChild",value:function(t){if(null!==t.parent)throw new Error("Can't add a child that already has a parent.");this.children.push(t),t.parent=this}},{key:"render",value:function(t){this.recalculateMatrices(go.create()),this.renderChild(t)}},{key:"recalculateMatrices",value:function(t){this.relativeModelViewMatrix=go.mul(go.create(),t,this.modelViewMatrix);var e,r=Re(this.children);try{for(r.s();!(e=r.n()).done;)e.value.recalculateMatrices(this.relativeModelViewMatrix)}catch(t){r.e(t)}finally{r.f()}}},{key:"renderChild",value:function(t){var e,r=null!==(e=this.color)&&void 0!==e?e:t.getBaseEntityColor();if(null!==this.model&&this.stateOptions.visibile)if(t.setUniformFloat4("entityColor",r),t.setUniformMatrix4("modelViewMatrix",this.relativeModelViewMatrix),Array.isArray(this.model)){var n,o=Re(this.model);try{for(o.s();!(n=o.n()).done;)this.renderModel(t,n.value)}catch(t){o.e(t)}finally{o.f()}}else this.renderModel(t,this.model);var i,u=Re(this.children);try{for(u.s();!(i=u.n()).done;)i.value.renderChild(t)}catch(t){u.e(t)}finally{u.f()}}},{key:"findChild",value:function(t,e){var r,n=Re(this.children);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.name===t)return o;if(e){var i=o.findChild(t,e);if(void 0!==i)return i}}}catch(t){n.e(t)}finally{n.f()}}},{key:"renderModel",value:function(t,e){if(e.usesNormals()){var r=go.create();go.invert(r,this.relativeModelViewMatrix),go.transpose(r,r),t.setUniformMatrix4("normalMatrix",r)}e.draw(t)}},{key:"translate",value:function(t,e,r){go.translate(this.modelViewMatrix,this.modelViewMatrix,[t,e,r])}},{key:"scale",value:function(t,e,r){go.scale(this.modelViewMatrix,this.modelViewMatrix,[t,e,r])}},{key:"rotate",value:function(t,e,r,n){go.rotate(this.modelViewMatrix,this.modelViewMatrix,t,[e?1:0,r?1:0,n?1:0])}},{key:"rotateX",value:function(t){go.rotateX(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"rotateY",value:function(t){go.rotateY(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"rotateZ",value:function(t){go.rotateZ(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"resetTransformations",value:function(){this.modelViewMatrix=go.create()}},{key:"color",get:function(){if(this.stateOptions.highlighted)return ni}},{key:"getStateOptions",value:function(){return this.stateOptions}},{key:"setStateOptions",value:function(t){this.stateOptions=t}}])&&Ae(e.prototype,r),n&&Ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ii=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Be(this,"gl",void 0),Be(this,"_handle",void 0),Be(this,"deleted",!1),this.gl=e;var r=e.createBuffer();if(null===r)throw"Failed to create buffer!";this._handle=r}var e,r,n;return e=t,(r=[{key:"handle",get:function(){return this._handle}},{key:"bufferData",value:function(t){if(this.deleted)throw"Trying to use a buffer that has already been deleted.";this.doBufferData(t)}},{key:"use",value:function(){if(this.deleted)throw"Trying to use a buffer that has already been deleted.";this.doUse()}},{key:"delete",value:function(){if(this.deleted)throw"Trying to delete a buffer that has already been deleted.";this.gl.deleteBuffer(this._handle),this.deleted=!0}}])&&Le(e.prototype,r),n&&Le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ui=function(t){function e(){var t;Ve(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return qe(ze(t=i.call.apply(i,[this].concat(n))),"length",0),t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ye(t,e)}(e,t);var r,n,o,i=We(e);return r=e,o=[{key:"createBufferSourceFromIndices",value:function(t){return new Uint16Array(t)}}],(n=[{key:"getLength",value:function(){return this.length}},{key:"doBufferData",value:function(t){this.length=t.byteLength/2,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.handle)}}])&&Xe(r.prototype,n),o&&Xe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(ii),ai=function(t){function e(t,r){var n,o,u,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=i.call(this,t),o=er(n),a=void 0,(u=nr(u="attribLocation"))in o?Object.defineProperty(o,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[u]=a,n.attribLocation=r,n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(e,t);var r,n,o,i=Je(e);return r=e,n&&Ke(r.prototype,n),o&&Ke(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(ii),ci=function(t){function e(){return ir(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ar(t,e)}(e,t);var r,n,o,i=cr(e);return r=e,o=[{key:"createBufferSourceFromPositions",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&ur(r.prototype,n),o&&ur(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(ai),li=function(t){function e(){return br(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dr(t,e)}(e,t);var r,n,o,i=yr(e);return r=e,o=[{key:"createBufferSourceFromPositions",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&hr(r.prototype,n),o&&hr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(ai),fi=function(t){function e(){return gr(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jr(t,e)}(e,t);var r,n,o,i=_r(e);return r=e,o=[{key:"createBufferSourceFromCoords",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&Or(r.prototype,n),o&&Or(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(ai),si=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Mr(this,"positionBuffer",void 0),Mr(this,"indexBuffer",void 0),Mr(this,"normalBuffer",void 0),Mr(this,"textureCoordsBuffer",void 0),Mr(this,"textureKey",null),this.positionBuffer=e,this.indexBuffer=r,this.normalBuffer=n,this.textureCoordsBuffer=o}var e,r,n;return e=t,(r=[{key:"setTextureKey",value:function(t){this.textureKey=t}},{key:"getTextureKey",value:function(){return this.textureKey}},{key:"usesNormals",value:function(){return void 0!==this.normalBuffer}},{key:"draw",value:function(t){t.useTexture(this.textureKey)&&(this.positionBuffer.use(),this.indexBuffer.use(),void 0!==this.normalBuffer&&this.normalBuffer.use(),void 0!==this.textureCoordsBuffer&&this.textureCoordsBuffer.use(),t.drawElements(this.indexBuffer.getLength()))}}])&&Pr(e.prototype,r),n&&Pr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),bi={createModelFromIndexedVertices:Rr,createModelFromSmartVertices:function(t,e,r){var n,o,i=[],u=[];t:for(var a=0;a<e.length;a++){for(var c=e[a],l=0;l<i.length;l++){if((n=c)[0]===(o=i[l])[0]&&n[1]===o[1]&&n[2]===o[2]){u.push(l);continue t}}i.push(c),u.push(i.length-1)}return Rr(t,{vertices:i,indices:u,texCoords:null},r)},makeCube:function(t,e){var r=new li(t,e.attribLocations.vertexPosition);r.bufferData(li.createBufferSourceFromPositions([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]));var n=new ui(t);n.bufferData(ui.createBufferSourceFromIndices([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]));var o=new ci(t,e.attribLocations.vertexNormal);o.bufferData(ci.createBufferSourceFromPositions([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]));var i=new fi(t,e.attribLocations.textureCoord);i.bufferData(fi.createBufferSourceFromCoords([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]));var u=new si(r,n,o,i);return new oi(u,"cube")}},hi=1e-6,di=[1,1,1,1],yi=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.shaderSources=r,this.object3doTree=n,this.logoDefs=o,Xr(this,"programInfo",void 0),Xr(this,"ctx",void 0),Xr(this,"rootEntity",void 0),Xr(this,"objEntityMap",new Map),this.programInfo=this.initProgram(),this.ctx=this.initContext(),this.rootEntity=this.initRootEntity()}var e,r,n;return e=t,(r=[{key:"initContext",value:function(){return new ri(this.gl,this.programInfo,this.logoDefs,this.getViewMode())}},{key:"initRootEntity",value:function(){var t,e=this.getViewMode(),r=new oi(null),n=Br(this.object3doTree.rootNodes);try{for(n.s();!(t=n.n()).done;)Ir(this.ctx,t.value,r,this.objEntityMap,"wireframe"!==e,"wireframe"!==e,"regular"===e)}catch(t){n.e(t)}finally{n.f()}return r}},{key:"changeTextureMapping",value:function(){}},{key:"changeModelControls",value:function(){}},{key:"changeObjectStateMap",value:function(t){var e,r=Br(t);try{for(r.s();!(e=r.n()).done;){var n=Lr(e.value,2),o=n[0],i=n[1],u=this.objEntityMap.get(o);if(void 0===u)throw new Error("Couldn't find an entity for the object: ".concat(o));u.setStateOptions({visibile:!i.hide,highlighted:i.highlight})}}catch(t){r.e(t)}finally{r.f()}}},{key:"inBeforeTheRootRender",value:function(){}},{key:"render",value:function(t,e){var r,n=t.drawingBufferWidth,o=t.drawingBufferHeight;t.clearColor(0,0,0,0),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);var i=45*Math.PI/180,u=n/o,a=go.create();t.useProgram(this.programInfo.program),this.ctx.setUniformFloat4("baseColor",null!==(r=e.viewColor)&&void 0!==r?r:di),go.perspective(a,i,u,.1,100),this.ctx.setUniformMatrix4("projectionMatrix",a);var c=.02*e.translationX,l=.02*e.translationY*-1,f=-1*(8+.01*e.zoom);this.rootEntity.resetTransformations(),this.rootEntity.translate(c,l,f),this.rootEntity.rotateX(mo.toRadian(e.rotationX)),this.rootEntity.rotateY(mo.toRadian(e.rotationY)),this.rootEntity.rotateZ(mo.toRadian(e.rotationZ)),this.inBeforeTheRootRender(t,e),this.rootEntity.render(this.ctx)}},{key:"update",value:function(){}}])&&Vr(e.prototype,r),n&&Vr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),pi=function(t){function e(){return Hr(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(e,t);var r,n,o,i=$r(e);return r=e,(n=[{key:"changeTextureMapping",value:function(t){this.ctx.changeTextureMapping(t)}},{key:"changeModelControls",value:function(t){this.ctx.setCurrentLogoIdx(t.logoColorIdx),Gr(Qr(e.prototype),"changeModelControls",this).call(this,t)}},{key:"getViewMode",value:function(){return"regular"}},{key:"initProgram",value:function(){var t=this.shaderSources.regular,e=t.fsSource,r=Lo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Lo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Lo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition"),vertexNormal:this.gl.getAttribLocation(o,"aVertexNormal"),textureCoord:this.gl.getAttribLocation(o,"aTextureCoord")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor"),normalMatrix:this.gl.getUniformLocation(o,"uNormalMatrix"),sampler:this.gl.getUniformLocation(o,"uSampler"),useLights:this.gl.getUniformLocation(o,"useLights")}}}},{key:"inBeforeTheRootRender",value:function(t,e){this.ctx.setUniformBool("useLights",e.enableLightingRegular);var r="linear"===e.textureFilterMag?t.LINEAR:t.NEAREST;this.ctx.setTextureMinFilter("linear"===e.textureFilterMin?t.LINEAR:t.NEAREST),this.ctx.setTextureMagFilter(r)}}])&&zr(r.prototype,n),o&&zr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(yi),vi=function(t){function e(){return tn(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rn(t,e)}(e,t);var r,n,o,i=nn(e);return r=e,(n=[{key:"getViewMode",value:function(){return"solid_color"}},{key:"changeModelControls",value:function(t){this.ctx.setBaseEntityColor(t.solidColor)}},{key:"initProgram",value:function(){var t=this.shaderSources.solid,e=t.fsSource,r=Lo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Lo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Lo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition"),vertexNormal:this.gl.getAttribLocation(o,"aVertexNormal")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor"),normalMatrix:this.gl.getUniformLocation(o,"uNormalMatrix"),useLights:this.gl.getUniformLocation(o,"useLights")}}}},{key:"inBeforeTheRootRender",value:function(t,e){this.ctx.setUniformBool("useLights",e.enableLightingSolidColor)}}])&&en(r.prototype,n),o&&en(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(yi),mi=function(t){function e(){return cn(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fn(t,e)}(e,t);var r,n,o,i=sn(e);return r=e,(n=[{key:"getViewMode",value:function(){return"wireframe"}},{key:"changeModelControls",value:function(t){this.ctx.setBaseEntityColor(t.wireframeColor)}},{key:"initProgram",value:function(){var t=this.shaderSources.wireframe,e=t.fsSource,r=Lo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Lo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Lo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor")}}}}])&&ln(r.prototype,n),o&&ln(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(yi),gi=function(t){function e(t,r,n,o){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wn(jn(u=i.call(this,t)),"gl",void 0),wn(jn(u),"subRenderers",void 0);var a=t.canvas.getContext("webgl",{preserveDrawingBuffer:t.preserveDrawingBuffer});if(null===a)throw"Couldn't get WebGL rendering context!";u.gl=a,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),u.subRenderers={regular:new pi(a,r,n,o),solid_color:new vi(a,r,n,o),wireframe:new mi(a,r,n,o)};for(var c=0,l=Object.values(u.subRenderers);c<l.length;c++){l[c].changeTextureMapping(t.textureMapping)}if(u.setupEvents(),"continuous"===t.mode){var f=0;requestAnimationFrame((function t(e){var r=(e*=.001)-f;f=e,u.update(r),u.render(r),requestAnimationFrame(t)}))}return u}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mn(t,e)}(e,t);var r,n,o,i=gn(e);return r=e,(n=[{key:"onResized",value:function(){console.log("Resized! (".concat(this.width," x ").concat(this.height,")")),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),"static"===this.config.mode&&this.render()}},{key:"render",value:function(t){this.subRenderers[this.config.modelControls.viewMode].render(this.gl,this.config.modelControls,t)}},{key:"setTextureMapping",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeTextureMapping(t);pn(_n(e.prototype),"setTextureMapping",this).call(this,t)}},{key:"setModelControls",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeModelControls(t);pn(_n(e.prototype),"setModelControls",this).call(this,t)}},{key:"setObjectStateMap",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeObjectStateMap(t);pn(_n(e.prototype),"setObjectStateMap",this).call(this,t)}},{key:"update",value:function(t){this.subRenderers[this.config.modelControls.viewMode].update(t)}}])&&yn(r.prototype,n),o&&yn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(Do),Oi=function(t){var e=t.canvasRef;console.log("Re-rendering CanvasWrapper");var r=Object(jo.h)("div",{class:"absolute inset-0"},Object(jo.h)("canvas",{ref:e}));return Object(jo.h)("div",{class:"w-full h-full max-w-full max-h-full relative"},r)},ji="NameWrapper__lk4ti",_i="LeftBorder__WZG0Y",wi="MiddleBorder__FcOEe",Si="Root__0piuG",xi=function(t){var e=t.state,r=t.setState;return Object(jo.h)("div",{class:"flex pr-1"},Object(jo.h)("div",{class:"flex items-center px-1 cursor-pointer"+(e.highlight?" text-yellow-500":""),onClick:function(){return r(Mn(Mn({},e),{},{highlight:!e.highlight}))}},"H"),Object(jo.h)("div",{class:"flex items-center px-1 cursor-pointer"+(e.hide?"":" text-yellow-500"),onClick:function(){return r(Mn(Mn({},e),{},{hide:!e.hide}))}},"V"))},Pi="1.50rem",Mi="34px",Ti="0.50rem",Ei=function t(e){var r,n=e.current,o=e.nodes,i=e.onChangeNodeStack,u=e.nodeStack,a=e.objStateMap,c=e.setObjStateMap,l=Cn(Object(_o.e)(!0),2),f=l[0],s=l[1],b=o.length>0,h=n&&a.get(n);return Object(jo.h)("div",{class:Si+" w-full overflow-hidden text-sm"},null!==n&&Object(jo.h)("div",{style:{height:Mi},class:ji+" flex py-1 bg-cyan-900 box-border"},Object(jo.h)("div",{onClick:b?function(){return s(!f)}:void 0,class:"flex items-center px-1 pl-2 ".concat(b?"cursor-pointer hover:text-yellow-400":"invisible")},f?"":""),Object(jo.h)("div",{class:"min-w-0 flex items-center grow hover:text-yellow-400 cursor-pointer",onClick:function(){return i(u)}},Object(jo.h)("div",{class:"truncate px-1",title:n.name},null!==(r=n.name)&&void 0!==r?r:Object(jo.h)("span",{class:"text-gray-300"},"<empty name>"))),h&&Object(jo.h)(xi,{state:h,setState:function(t){var e=Io.createUpdatedMap(a,n,t);c(e)}})),o.length>0&&Object(jo.h)("div",{class:f?"block":"hidden"},o.map((function(e,r){return Object(jo.h)("div",{key:r,class:"flex"},Object(jo.h)("div",{class:_i,style:{marginLeft:"calc(".concat(Pi," / 2)"),height:r===o.length-1?"calc(".concat(Mi," / 2 + ").concat(Ti,")"):"auto"}}),Object(jo.h)("div",{class:wi+" self-start",style:{width:"calc(".concat(Pi," / 2)"),height:"calc(".concat(Mi," / 2 + ").concat(Ti,")")}}),Object(jo.h)("div",{class:"grow max-w-full overflow-hidden",style:{paddingTop:Ti}},Object(jo.h)(t,{current:e,nodes:e.children,onChangeNodeStack:i,nodeStack:[].concat(En(u),[e]),objStateMap:a,setObjStateMap:c})))}))))},Ci="px-1.5 py-1 align-top text-left",Ri="".concat(Ci," whitespace-nowrap"),ki="".concat(Ci," break-all"),Ai=function(t){var e=t.primitives;return Object(jo.h)("table",{class:"w-full overflow-hidden"},Object(jo.h)("thead",null,Object(jo.h)("tr",null,Object(jo.h)("th",{class:Ri},"#"),Object(jo.h)("th",{class:Ri,title:"Vertex Indices"},"V.Indices"),Object(jo.h)("th",{class:Ri},"Texture"))),Object(jo.h)("tbody",null,e.map((function(t,e){return Object(jo.h)("tr",{key:e},Object(jo.h)("td",{class:ki},e),Object(jo.h)("td",{class:ki},"[",t.vertexIndices.join(", "),"]"),Object(jo.h)("td",{class:"".concat(ki)},t.textureName))}))))},Ii=function(t){var e=t.object3doTree,r=t.objStateMap,n=t.setObjStateMap,o=An(Object(_o.e)([]),2),i=o[0],u=o[1],a=0===i.length?null:i[i.length-1],c=null===a?e.rootNodes:a.children,l=a&&r.get(a),f=Object(_o.c)((function(){var t=Object(jo.h)("div",{class:"mx-1 text-pink-600"},""),e="font-bold",r="cursor-pointer text-gray-400 hover:text-white";return Object(jo.h)("div",{class:"flex flex-wrap bg-gray-900 px-1 py-0.5"},Object(jo.h)("div",{class:null===a?e:r,onClick:function(){return u([])}},Object(jo.h)("span",{class:"italic"},"(ROOT)")),null!==a&&t,i.map((function(n,o){return Object(jo.h)(jo.Fragment,{key:o},Object(jo.h)("div",{onClick:function(){return u(i.slice(0,o+1))},class:o===i.length-1?e:r},n.name),o<i.length-1&&t)})))}),[i,a]),s=Object(_o.c)((function(){var t;return Object(jo.h)("div",{class:"flex py-1 bg-cyan-900 border border-yellow-500 text-sm"},Object(jo.h)("div",{class:"min-w-0 grow px-1 pl-2"},null===a?Object(jo.h)("span",{class:"italic"},"(ROOT)"):null!==(t=a.name)&&void 0!==t?t:Object(jo.h)("span",{class:"text-gray-300"},"<empty name>")),l&&Object(jo.h)(xi,{state:l,setState:function(t){var e=Io.createUpdatedMap(r,a,t);n(e)}}))}),[a,l,r,n]),b=Object(_o.c)((function(){return null===a||0===a.primitives.length?null:Object(jo.h)("div",{class:"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300"},Object(jo.h)(Po,{title:"Vertices"},Object(jo.h)("div",{class:"border-t border-gray-700 mt-1 pt-1 text-xs"},Object(jo.h)("span",{class:"break-all"},"[",a.vertices.map((function(t){return"[".concat(t.x,", ").concat(t.y,", ").concat(t.z,"]")})).join(", "),"]"))))}),[a]),h=Object(_o.c)((function(){return null===a||0===a.primitives.length?null:Object(jo.h)("div",{class:"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300"},Object(jo.h)(Po,{title:"Primitives"},Object(jo.h)("div",{class:"border-t border-gray-700 mt-1 pt-1 text-xs"},Object(jo.h)(Ai,{primitives:a.primitives}))))}),[a]);return Object(jo.h)("div",{class:"flex flex-col h-full overflow-hidden"},Object(jo.h)("div",{className:"px-6"},Object(jo.h)("div",{class:"mb-4"},f),Object(jo.h)("div",{class:"mb-2 font-bold"},"Current:"),s,Object(jo.h)("div",{class:"pl-4"},b,h),c.length>0&&Object(jo.h)("div",{class:"mt-6 mb-2 font-bold flex justify-between"},Object(jo.h)("span",null,"Children:"),Object(jo.h)("span",null,"(",c.length,")"))),Object(jo.h)("div",{class:"grow overflow-auto px-6"},Object(jo.h)(Ei,{current:null,nodes:c,onChangeNodeStack:u,nodeStack:i,objStateMap:r,setObjStateMap:n})))},Di=r("IomO"),Ui=r("u6ao"),Li=function(t){var e=t.textures;return Object(jo.h)("div",{class:"flex flex-col space-y-2"},Object.entries(e).map((function(t,e){var r=Dn(t,2),n=r[0],o=r[1],i=null!==o;null!==o&&"html"===o.type&&(i=o.image.complete&&0!==o.image.naturalWidth);var u=i?"OK":"ERROR";return Object(jo.h)("div",{key:e,class:"flex items-center group"+(i?" text-green-600 hover:text-green-500":" text-red-600 hover:text-red-500")},Object(jo.h)("div",{class:"break-all"},n),Object(jo.h)("div",{class:"grow border-b border-dashed border-gray-600 group-hover:border-gray-500 mx-1\r text-transparent text-center",style:{minWidth:"24px",marginBottom:"6px"}},"-"),"html"===(null==o?void 0:o.type)?Object(jo.h)("a",{href:o.image.src,target:"_blank",rel:"noreferrer"},u):Object(jo.h)("div",null,u))})))},Bi=["image/png","image/gif","image/jpeg"],Fi=function(t){var e=t.regularTextures,r=t.customTextures,n=t.setCustomTextures,o=Xn(Object(_o.e)(!1),2),i=o[0],u=o[1],a=Object(_o.a)(function(){var t,e=(t=function*(t){var e,o={},i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Yn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{var u=function*(){var t=e.value;if(!Bi.includes(t.type))return"continue";yield Ui.a.loadDataUrl(t).then(Ui.a.createImageFromDataUrl).then((function(e){var r=t.name.replace(/^.*[\\\/]/,"").replace(/\.[^/.]+$/,"");o[r]={type:"html",image:e}})).catch(console.error)};for(i.s();!(e=i.n()).done;)yield*u()}catch(t){i.e(t)}finally{i.f()}n(Fn(Fn({},r),o))},function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){Vn(a,n,o,i,u,"next",t)}function u(t){Vn(a,n,o,i,u,"throw",t)}var a=t.apply(e,r);i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),[r,n]),c=Object(jo.h)("input",{type:"file",multiple:!0,accept:Bi.join(", "),disabled:i,onChange:function(t){if(i)t.currentTarget.value="";else{var e=t.currentTarget.files;null!==e&&(u(!0),a(e).finally((function(){u(!1)}))),t.currentTarget.value=""}}});return Object(jo.h)("div",{class:"flex flex-col max-h-full overflow-hidden"},Object(jo.h)("div",{class:"text-center font-bold mb-2"},"Custom Textures"),Object(jo.h)("div",{class:"grow overflow-auto px-6"},Object(jo.h)(Li,{textures:r,setTextures:n})),Object(jo.h)("div",{className:"px-6 mt-2"},c),Object(jo.h)("div",{class:"mb-6"}),Object(jo.h)("div",{class:"text-center font-bold mb-2"},"TAK Textures"),Object(jo.h)("div",{class:"grow overflow-auto px-6"},Object(jo.h)(Li,{textures:e})))},Ni=["options","objects","textures"],Vi=function(t){var e=t.engineName,r=t.shaders,n=t.object3doTree,o=t.regularTextures,i=t.defaultObjStateMap,u=t.logoDefs,a=t.userService,c=t.defaultUserSettings,l=t.defaultModelControls;console.log("Re-rendering App");var f=Zn(Object(_o.e)(!1),2),s=f[0],b=f[1],h=Zn(Object(_o.e)("options"),2),d=h[0],y=h[1],p=Zn(Object(_o.e)(l),2),v=p[0],m=p[1],g=Zn(Object(_o.e)(i),2),O=g[0],j=g[1],_=Zn(Object(_o.e)(),2),w=_[0],S=_[1],x=Zn(Object(_o.e)(c),2),P=x[0],M=x[1],T=Object(_o.a)((function(t){M(t),a.save(t)}),[a]),E=Zn(Object(_o.e)({}),2),C=E[0],R=E[1],k=Object(_o.d)();Object(_o.b)((function(){var t=k.current;if(t){t.width=t.clientWidth,t.height=t.clientHeight,console.log("Creating the Engine");var a={mode:"static",canvas:t,modelControls:l,listener:{onModelControlsChanged:m},textureMapping:Gn({},o),objStateMap:i,preserveDrawingBuffer:c.preserveDrawingBuffer},f="webgl"===e?new gi(a,r,n,u):new Uo(a);return S(f),function(){f.destroy(),S(void 0),alert("Unmounting the engine. This should probably not be happening normally!!!")}}}),[k,r,i,e,n,o,u,l,c]),Object(_o.b)((function(){var t=k.current;t&&(t.style.background=v.canvasBackground,t.style.backgroundSize=v.canvasBackgroundSize,t.style.backgroundRepeat=v.canvasBackgroundRepeat,t.style.backgroundPosition="center")}),[k,v]);var A=Object(_o.c)((function(){return Object(jo.h)(Oi,{canvasRef:k})}),[k]),I=Object(_o.c)((function(){return Object(jo.h)("div",{class:"h-full flex flex-col"},Object(jo.h)("div",{class:"flex text-white border-b border-gray-700"},Object(jo.h)("div",{class:"grow px-4 py-4 text-center"},"Canvas"),Object(jo.h)("div",{class:"px-4 py-4 cursor-pointer hover:bg-blue-700 font-mono",onClick:function(){return b(!s)}},s?">[ ]<":"<[ ]>")),Object(jo.h)("div",{class:"grow p-6"},A))}),[A,s]),D=Object(_o.c)((function(){return Object(jo.h)(Di.a,{modelControls:v,setModelControls:function(t){m(t),t.textureFilterMin===v.textureFilterMin&&t.textureFilterMag===v.textureFilterMag||T(Gn(Gn({},P),{},{defaultTextureFilterMin:t.textureFilterMin,defaultTextureFilterMag:t.textureFilterMag})),w&&w.setModelControls(t)},userSettings:P,setUserSettings:T,logoDefs:u,canvasRef:k})}),[w,v,P,T,u,k]),U=Object(_o.c)((function(){return Object(jo.h)(Ii,{object3doTree:n,objStateMap:O,setObjStateMap:function(t){j(t),w&&w.setObjectStateMap(t)}})}),[w,n,O]),L=Object(_o.c)((function(){return Object(jo.h)(Fi,{regularTextures:o,customTextures:C,setCustomTextures:function(t){w&&w.setTextureMapping(Gn(Gn({},o),t)),R(t)}})}),[w,C,o]),B=Object(_o.c)((function(){return Object(jo.h)("div",{class:"h-full flex flex-col"},Object(jo.h)("div",{class:"flex text-white border-b border-gray-700"},Ni.map((function(t,e,r){var n=t===d,o=n?"font-bold":"cursor-pointer text-gray-400 hover:text-white",i=e!==r.length-1?"border-r border-gray-700":"";return Object(jo.h)("div",{key:e,class:"grow basis-0 px-2 py-4 text-center ".concat(o," ").concat(i),onClick:function(){n||y(t)}},"options"===t?"Options":"objects"===t?"Objects":"Textures")}))),Object(jo.h)("div",{class:"grow max-h-full overflow-hidden py-6",style:{width:P.sidebarWidth,overflowX:"auto"}},"options"===d?D:"objects"===d?U:L))}),[d,D,P,U,L]),F=s?" border-gray-800":" border-gray-700",N="left"===P.sidebarPosition?"":" flex-row-reverse",V="left"===P.sidebarPosition?" border-r":" border-l";return Object(jo.h)("div",{class:"flex justify-center items-stretch h-screen overflow-hidden bg-gray-900"},Object(jo.h)("div",{class:"grow flex bg-gray-800 border ".concat(F," ").concat(N),style:{"max-width":s?"100%":"1600px"}},Object(jo.h)("div",{class:"hidden lg:block border-gray-700 ".concat(V)},B),Object(jo.h)("div",{class:"grow"},I)))},Xi=function(t){var e=t.dataSource,r=t.userService,n=t.defaultUserSettings,o=t.defaultModelControls,i=oo(Object(_o.e)(),2),u=i[0],a=i[1],c=oo(Object(_o.e)(),2),l=c[0],f=c[1],s=oo(Object(_o.e)(),2),b=s[0],h=s[1],d=oo(Object(_o.e)(),2),y=d[0],p=d[1],v=ko;if(Object(_o.b)((function(){(function(){return co.apply(this,arguments)})().then(f)}),[]),Object(_o.b)((function(){(function(t){return lo.apply(this,arguments)})(e).then((function(t){return a(t),function(t,e,r,n){return fo.apply(this,arguments)}(t,v,"assets/custom/pngs/","png")})).then(h).catch(p)}),[e]),void 0!==y)return Object(jo.h)("div",{class:"min-w-screen min-h-screen flex flex-col justify-center items-center text-3xl\r bg-black"},Object(jo.h)("div",{class:"text-red-300"},"Error!"),Object(jo.h)("div",{class:"text-red-600"},"(TODO)"),Object(jo.h)("div",{class:"text-red-600"},JSON.stringify(y)));if(void 0===u||void 0===l||void 0===b){var m="Loading...";return u&&l&&(m="Loading textures..."),Object(jo.h)("div",{class:"min-w-screen min-h-screen flex justify-center items-center text-3xl bg-black"},Object(jo.h)("span",{class:"text-gray-400"},m))}var g=Object(_o.c)((function(){return Object.values(b).every((function(t){return null===t}))?"wireframe":o.viewMode}),[b,o]),O=Object(_o.c)((function(){var t="string"==typeof e?e.replace(/^.*[\\\/]/,""):e.name;return t.startsWith("ara")?3:t.startsWith("tar")?1:t.startsWith("ver")?0:t.startsWith("zon")?7:t.startsWith("cre")?6:o.logoColorIdx}),[o,e]);return Object(jo.h)(Vi,{engineName:"webgl",object3doTree:u,shaders:l,regularTextures:b,defaultObjStateMap:ao(u),logoDefs:v,userService:r,defaultUserSettings:n,defaultModelControls:ro(ro({},o),{},{viewMode:g,logoColorIdx:O})})};e.default=function(){var t=po(Object(_o.e)(),2),e=t[0],r=t[1],n=po(Object(_o.e)(So),1)[0],o=po(Object(_o.e)(),2),i=o[0],u=o[1],a=po(Object(_o.e)(),2),c=a[0],l=a[1];return Object(_o.b)((function(){var t;try{var e;t=null!==(e=n.load())&&void 0!==e?e:wo}catch(e){console.error(e),n.save(t=wo)}u(t),l(ho(ho({},xo),{},{textureFilterMin:t.defaultTextureFilterMin,textureFilterMag:t.defaultTextureFilterMag}))}),[n]),void 0===i||void 0===c?Object(jo.h)("div",{class:"min-h-screen flex justify-center items-center"},Object(jo.h)("span",null,"Loading...")):void 0===e?Object(jo.h)(Co,{onSubmit:r,defaultUserSettings:i,setDefaultUserSettings:function(t){u(t),n.save(t)}}):Object(jo.h)(Xi,{dataSource:e,userService:n,defaultUserSettings:i,defaultModelControls:c})}},qiYd:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=r("GssO");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("label",{class:"flex items-center"},Object(a.h)("input",{type:"checkbox",checked:e.enableLightingSolidColor,onChange:function(t){r(i(i({},e),{},{enableLightingSolidColor:t.currentTarget.checked}))}}),Object(a.h)("span",{class:"pl-1"},"Enable Lighting"))),Object(a.h)("div",null,Object(a.h)("div",{class:""},"Solid Color"),Object(a.h)(c.a,{color:e.solidColor,setColor:function(t){return r(i(i({},e),{},{solidColor:t}))}})))}},tpTz:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=r("hosL"),f=r("QRet"),s=r("u6ao");e.a=function(t){var e=t.modelControls,r=t.setModelControls,n=t.enableSaveImageButton,o=t.canvasRef,u=Object(f.e)(function(t){return"black"===t||"white"===t||"transparent"===t?t:"custom"}(e.canvasBackground)),c=a(u,2),b=c[0],h=c[1],d=Object(f.a)((function(t){h(t),"custom"!==t&&r(i(i({},e),{},{canvasBackground:t}))}),[e,r]),y=Object(f.c)((function(){return"custom"!==b?null:Object(l.h)("input",{type:"file",multiple:!1,onChange:function(t){var n=t.currentTarget.files;null!==n&&0!==n.length?s.a.loadDataUrl(n[0]).then((function(t){var n="url(".concat(t,")");r(i(i({},e),{},{canvasBackground:n}))})):t.currentTarget.value=""}})}),[b,e,r]),p=Object(f.c)((function(){return"custom"!==b?null:Object(l.h)("div",null,Object(l.h)("div",null,"Background Size"),Object(l.h)("select",{class:"w-full",value:e.canvasBackgroundSize,onChange:function(t){r(i(i({},e),{},{canvasBackgroundSize:t.currentTarget.value}))}},Object(l.h)("option",{value:"auto"},"Auto"),Object(l.h)("option",{value:"cover"},"Cover"),Object(l.h)("option",{value:"contain"},"Contain")))}),[b,e]),v=Object(f.c)((function(){return"custom"!==b||"cover"===e.canvasBackgroundSize?null:Object(l.h)("div",null,Object(l.h)("div",null,"Background Repeat"),Object(l.h)("select",{class:"w-full",value:e.canvasBackgroundRepeat,onChange:function(t){r(i(i({},e),{},{canvasBackgroundRepeat:t.currentTarget.value}))}},Object(l.h)("option",{value:"repeat"},"On"),Object(l.h)("option",{value:"no-repeat"},"Off")))}),[b,e]),m=Object(f.a)((function(){var t=o.current;if(void 0!==t){var e=t.toDataURL(),r=document.createElement("a"),n=(new Date).getTime();r.href=e,r.download="3do-".concat(n,".png"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}}),[o]),g=Object(f.c)((function(){return n?Object(l.h)("div",{class:"text-center"},Object(l.h)("button",{class:"text-white hover:text-yellow-500 focus:text-yellow-500",onClick:m},"Save Model Image")):null}),[n,m]);return Object(l.h)("div",{class:"space-y-4"},g,Object(l.h)("div",null,"Canvas Background",Object(l.h)("select",{class:"w-full",value:b,onChange:function(t){return d(t.currentTarget.value)}},Object(l.h)("option",{value:"transparent"},"Transparent"),Object(l.h)("option",{value:"black"},"Black"),Object(l.h)("option",{value:"white"},"White"),Object(l.h)("option",{value:"custom"},"(Custom Image)")),Object(l.h)("div",{class:"mt-0.5"},y)),p,v)}},u6ao:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={loadDataUrl:function(t){var e=new FileReader,r=new Promise((function(r,n){e.onload=function(){var o=e.result;"string"==typeof o?r(o):n(new Error("Failed to read file: ".concat(t.name)))},e.onerror=function(){n(new Error("Failed to read file: ".concat(t.name)))}}));return e.readAsDataURL(t),r},createImageFromDataUrl:function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){r(new Error("Failed to create image for dataUrl: ".concat(t)))},n.src=t}))}}},weEs:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PRIMITIVE_STRUCT_SIZE=e.PRIMITIVE_STRUCT=e.VERTEX_STRUCT_SIZE=e.VERTEX_STRUCT=e.OBJECT_STRUCT_SIZE=e.OBJECT_STRUCT=void 0,e.OBJECT_STRUCT=[["VersionSignature","U32"],["NumberOfVertexes","U32"],["NumberOfPrimitives","U32"],["UnknownFlag","U32"],["XFromParent","U32"],["YFromParent","U32"],["ZFromParent","U32"],["OffsetToObjectName","U32"],["Always_0","U32"],["OffsetToVertexArray","U32"],["OffsetToPrimitiveArray","U32"],["OffsetToSiblingObject","U32"],["OffsetToChildObject","U32"]],e.OBJECT_STRUCT_SIZE=4*e.OBJECT_STRUCT.length,e.VERTEX_STRUCT=[["x","U32"],["y","U32"],["z","U32"]],e.VERTEX_STRUCT_SIZE=4*e.VERTEX_STRUCT.length,e.PRIMITIVE_STRUCT=[["Unknown_0","U32"],["NumberOfVertexIndexes","U32"],["Always_0","U32"],["OffsetToVertexIndexArray","U32"],["OffsetToTextureName","U32"],["Unknown_1","U32"],["Unknown_2","U32"],["Unknown_3","U32"]],e.PRIMITIVE_STRUCT_SIZE=4*e.PRIMITIVE_STRUCT.length}});
//# sourceMappingURL=bundle.604f8.js.map