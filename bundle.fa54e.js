!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(e){return t[e]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://takingdoms.github.io/3do-viewer-preact-with-textures/",e(e.s="Pq/i")}({"/dwh":function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL");e.a=function(t){var e=t.userSettings,r=t.setUserSettings;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",{class:"flex flex-col items-stretch"},Object(a.h)("label",{for:"sidebarPosition"},"Sidebar Position"),Object(a.h)("select",{id:"sidebarPosition",value:e.sidebarPosition,onChange:function(t){var n="left"===t.currentTarget.value?"left":"right";r(i(i({},e),{},{sidebarPosition:n}))}},Object(a.h)("option",{value:"left"},"Left"),Object(a.h)("option",{value:"right"},"Right"))))}},"/u4b":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r("CCBT"),e),o(r("ejsI"),e),o(r("BQX+"),e)},"BQX+":function(t,e,r){"use strict";function n(t,e){var r=[],a=e;do{var c=f.makeStruct(t,a,s.OBJECT_STRUCT),l=o(t,c.OffsetToObjectName),h=i(t,c.OffsetToVertexArray,c.NumberOfVertexes),b=u(t,c.OffsetToPrimitiveArray,c.NumberOfPrimitives),d=0!==c.OffsetToChildObject?n(t,c.OffsetToChildObject):[];r.push({name:l,vertices:h,primitives:b,children:d,xOffset:c.XFromParent,yOffset:c.YFromParent,zOffset:c.ZFromParent}),a=c.OffsetToSiblingObject}while(0!==a);return r}function o(t,e){for(var r=0,n=0;n<256;n++){if(r=n,0===t.getUint8(e+n))break}var o=new Uint8Array(t.buffer,e,r);return h.decode(o)}function i(t,e,r){for(var n=[],o=0;o<r;o++){var i=f.makeStruct(t,e+o*s.VERTEX_STRUCT_SIZE,s.VERTEX_STRUCT);n.push({x:i.x,y:i.y,z:i.z})}return n}function u(t,e,r){for(var n=[],i=0;i<r;i++){for(var u=f.makeStruct(t,e+i*s.PRIMITIVE_STRUCT_SIZE,s.PRIMITIVE_STRUCT),a=[],c=0;c<u.NumberOfVertexIndexes;c++){var l=t.getUint16(u.OffsetToVertexIndexArray+2*c,!0);a.push(l)}var h=o(t,u.OffsetToTextureName);n.push({vertexIndices:a,textureName:h})}return n}var a=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),c=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&a(e,t,r);return c(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Parse3do=void 0;var f=l(r("CCBT")),s=r("weEs"),h=new TextDecoder("ascii");e.Parse3do={fromBuffer:function(t){return{rootNodes:n(t,0)}}}},CCBT:function(t,e){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw u}}}}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LE";return"I8"===r?t.getInt8(e):"U8"===r?t.getUint8(e):"I16"===r?t.getInt16(e,"LE"===n):"U16"===r?t.getUint16(e,"LE"===n):t.getInt32(e,"LE"===n)}Object.defineProperty(e,"__esModule",{value:!0}),e.makeStruct=e.readInteger=e.ENDIANNESSES=e.INTEGER_TYPES=void 0,e.INTEGER_TYPES=["U8","I8","U16","I16","U32","I32"],e.ENDIANNESSES=["LE","BE"],e.readInteger=u,e.makeStruct=function(t,e,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"LE",c={},l=n(o);try{for(l.s();!(i=l.n()).done;){var f=r(i.value,2),s=f[0],h=f[1];c[s]=u(t,e,h,a),"U8"===h||"I8"===h?e+=1:"U16"===h||"I16"===h?e+=2:"U32"!==h&&"I32"!==h||(e+=4)}}catch(t){l.e(t)}finally{l.f()}return c}},GssO:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r("hosL"),u=r("QRet"),a=r("Xvsu");e.a=function(t){var e=t.color,r=t.setColor,o=n(Object(u.e)(!1),2),c=o[0],l=o[1],f="custom";c||(1===e[0]&&1===e[1]&&1===e[2]&&1===e[3]?f="white":1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]?f="red":0===e[0]&&1===e[1]&&0===e[2]&&1===e[3]?f="green":0===e[0]&&0===e[1]&&1===e[2]&&1===e[3]&&(f="blue"));var s=Object(u.c)((function(){return c?Object(i.h)("div",{class:"space-y-2"},Object(i.h)(a.a,{id:"red",label:"Red",min:0,max:255,value:Math.floor(255*e[0]),setValue:function(t){r([t/255,e[1],e[2],e[3]])}}),Object(i.h)(a.a,{id:"green",label:"Green",min:0,max:255,value:Math.floor(255*e[1]),setValue:function(t){r([e[0],t/255,e[2],e[3]])}}),Object(i.h)(a.a,{id:"blue",label:"Blue",min:0,max:255,value:Math.floor(255*e[2]),setValue:function(t){r([e[0],e[1],t/255,e[3]])}})):null}),[c,e,r]);return Object(i.h)("div",{class:""},Object(i.h)("select",{value:f,onChange:function(t){var e=t.currentTarget.value;"custom"!==e?(l(!1),r("red"===e?[1,0,0,1]:"green"===e?[0,1,0,1]:"blue"===e?[0,0,1,1]:[1,1,1,1])):l(!0)}},Object(i.h)("option",{value:"custom"},"(Custom)"),Object(i.h)("option",{value:"white"},"White"),Object(i.h)("option",{value:"red"},"Red"),Object(i.h)("option",{value:"green"},"Green"),Object(i.h)("option",{value:"blue"},"Blue")),s)}},IomO:function(t,e,r){"use strict";(function(t){var n=r("hosL"),o=r("QRet"),i=r("NOVX"),u=r("/dwh"),a=r("nF9+"),c=r("qiYd"),l=r("b2Zb");e.a=function(e){var r=e.modelControls,f=e.setModelControls,s=e.userSettings,h=e.setUserSettings,b=e.logoDefs,d=Object(o.c)((function(){return Object(n.h)(i.a,{modelControls:r,setModelControls:f})}),[r,f]),y=Object(o.c)((function(){return Object(n.h)(u.a,{userSettings:s,setUserSettings:h})}),[s,h]),p=Object(o.c)((function(){var e=r.viewMode,o="regular"===e?Object(n.h)(a.a,{modelControls:r,setModelControls:f,logoDefs:b}):"solid_color"===e?Object(n.h)(c.a,{modelControls:r,setModelControls:f}):"wireframe"===e?Object(n.h)(l.a,{modelControls:r,setModelControls:f}):null;return Object(n.h)(t,null,Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6"},"View Mode Settings"),o)}),[r,f]);return Object(n.h)("div",{class:"max-h-full overflow-auto px-6"},Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1"},"Controls"),d,p,Object(n.h)("div",{class:"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6"},"User Settings"),y)}}).call(this,r("hosL").Fragment)},NOVX:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=["regular","solid_color","wireframe"],l=r("Xvsu");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)(l.a,{id:"zoom",label:"Zoom",max:1e3,value:e.zoom,setValue:function(t){return r(i(i({},e),{},{zoom:t}))}}),Object(a.h)(l.a,{id:"rotationX",label:"Rotation X",min:-180,max:180,value:e.rotationX,setValue:function(t){return r(i(i({},e),{},{rotationX:t}))}}),Object(a.h)(l.a,{id:"rotationY",label:"Rotation Y",min:-180,max:180,value:e.rotationY,setValue:function(t){return r(i(i({},e),{},{rotationY:t}))}}),Object(a.h)(l.a,{id:"rotationZ",label:"Rotation Z",min:-180,max:180,value:e.rotationZ,setValue:function(t){return r(i(i({},e),{},{rotationZ:t}))}}),Object(a.h)(l.a,{id:"panX",label:"Pan X",value:e.translationX,setValue:function(t){return r(i(i({},e),{},{translationX:t}))}}),Object(a.h)(l.a,{id:"panY",label:"Pan Y",value:e.translationY,setValue:function(t){return r(i(i({},e),{},{translationY:t}))}}),Object(a.h)("div",{class:"flex flex-col items-stretch"},Object(a.h)("label",{for:"viewMode"},"View Mode"),Object(a.h)("select",{id:"viewMode",value:e.viewMode,onChange:function(t){var n=c.find((function(e){return e===t.currentTarget.value}));n&&r(i(i({},e),{},{viewMode:n}))}},Object(a.h)("option",{value:"regular"},"Regular"),Object(a.h)("option",{value:"solid_color"},"Solid Color"),Object(a.h)("option",{value:"wireframe"},"Wireframe"))))}},"Pq/i":function(t,e,r){"use strict";r.r(e);var n=r("hosL"),o=n.h,i=n.render,u=n.hydrate,a=function(t){return t&&t.default?t.default:t},c=function(t){return"/"===t[t.length-1]?t:t+"/"};if("serviceWorker"in navigator&&navigator.serviceWorker.register(c(r.p)+"sw.js"),"function"==typeof a(r("qVkA"))){var l=document.getElementById("preact_root")||document.body.firstElementChild;0,function(){var t=a(r("qVkA")),e={},n=document.querySelector('[type="__PREACT_CLI_DATA__"]');n&&(e=JSON.parse(decodeURI(n.innerHTML)).preRenderData||e);var f={preRenderData:e},s=e.url?c(e.url):"";(u&&s===c(location.pathname)?u:i)(o(t,{CLI_DATA:f}),document.body,l)}()}},QRet:function(t,e,r){"use strict";function n(t,e){g.options.__h&&g.options.__h(p,t,_||e),_=0;var r=p.__H||(p.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({__V:j}),r.__[t]}function o(t){return _=1,function(t,e,r){var o=n(y++,2);if(o.t=t,!o.__c&&(o.__=[r?r(e):d(void 0,e),function(t){var e=o.__N?o.__N[0]:o.__[0],r=o.t(e,t);e!==r&&(o.__N=[r,o.__[1]],o.__c.setState({}))}],o.__c=p,!p.u)){p.u=!0;var i=p.shouldComponentUpdate;p.shouldComponentUpdate=function(t,e,r){if(!o.__c.__H)return!0;var n=o.__c.__H.__.filter((function(t){return t.__c}));if(n.every((function(t){return!t.__N})))return!i||i.call(this,t,e,r);var u=!1;return n.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(u=!0)}})),!(!u&&o.__c.props===t)&&(!i||i.call(this,t,e,r))}}return o.__N||o.__}(d,t)}function i(t,e){var r=n(y++,3);!g.options.__s&&b(r.__H,e)&&(r.__=t,r.i=e,p.__H.__h.push(r))}function u(t){return _=5,a((function(){return{current:t}}),[])}function a(t,e){var r=n(y++,7);return b(r.__H,e)?(r.__V=t(),r.i=e,r.__h=t,r.__V):r.__}function c(t,e){return _=8,a((function(){return t}),e)}function l(){for(var t;t=O.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(s),t.__H.__h.forEach(h),t.__H.__h=[]}catch(e){t.__H.__h=[],g.options.__e(e,t.__v)}}function f(t){var e,r=function(){clearTimeout(n),T&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);T&&(e=requestAnimationFrame(r))}function s(t){var e=p,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),p=e}function h(t){var e=p;t.__c=t.__(),p=e}function b(t,e){return!t||t.length!==e.length||e.some((function(e,r){return e!==t[r]}))}function d(t,e){return"function"==typeof e?e(t):e}r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return o}));var y,p,v,m,g=r("hosL"),_=0,O=[],j=[],w=g.options.__b,S=g.options.__r,x=g.options.diffed,M=g.options.__c,P=g.options.unmount;g.options.__b=function(t){p=null,w&&w(t)},g.options.__r=function(t){S&&S(t),y=0;var e=(p=t.__c).__H;e&&(v===p?(e.__h=[],p.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=j,t.__N=t.i=void 0}))):(e.__h.forEach(s),e.__h.forEach(h),e.__h=[])),v=p},g.options.diffed=function(t){x&&x(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==O.push(e)&&m===g.options.requestAnimationFrame||((m=g.options.requestAnimationFrame)||f)(l)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==j&&(t.__=t.__V),t.i=void 0,t.__V=j}))),v=p=null},g.options.__c=function(t,e){e.some((function(t){try{t.__h.forEach(s),t.__h=t.__h.filter((function(t){return!t.__||h(t)}))}catch(r){e.some((function(t){t.__h&&(t.__h=[])})),e=[],g.options.__e(r,t.__v)}})),M&&M(t,e)},g.options.unmount=function(t){P&&P(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach((function(t){try{s(t)}catch(t){e=t}})),r.__H=void 0,e&&g.options.__e(e,r.__v))};var T="function"==typeof requestAnimationFrame},Xvsu:function(t,e,r){"use strict";var n=r("hosL");e.a=function(t){var e=t.id,r=t.label,o=t.min,i=t.max,u=t.value,a=t.setValue;return Object(n.h)("div",null,Object(n.h)("div",null,Object(n.h)("label",{for:e},r)),Object(n.h)("div",{class:"flex items-center space-x-2"},Object(n.h)("input",{type:"number",style:{width:"80px"},value:u,onChange:function(t){a(+t.currentTarget.value)}}),Object(n.h)("input",{class:"grow",type:"range",min:o,max:i,style:{width:"120px"},value:u,onChange:function(t){a(+t.currentTarget.value||0)}})))}},b2Zb:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=r("GssO");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("div",{class:""},"Wireframe Color"),Object(a.h)(c.a,{color:e.wireframeColor,setColor:function(t){return r(i(i({},e),{},{wireframeColor:t}))}})))}},ejsI:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},hosL:function(t,e,r){"use strict";function n(t,e){for(var r in e)t[r]=e[r];return t}function o(t){var e=t.parentNode;e&&e.removeChild(t)}function i(t,e,r){var n,o,i,a={};for(i in e)"key"==i?n=e[i]:"ref"==i?o=e[i]:a[i]=e[i];if(arguments.length>2&&(a.children=arguments.length>3?A.call(arguments,2):r),"function"==typeof t&&null!=t.defaultProps)for(i in t.defaultProps)void 0===a[i]&&(a[i]=t.defaultProps[i]);return u(t,a,n,o,null)}function u(t,e,r,n,o){var i={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++I:o};return null==o&&null!=k.vnode&&k.vnode(i),i}function a(){return{current:null}}function c(t){return t.children}function l(t,e){this.props=t,this.context=e}function f(t,e){if(null==e)return t.__?f(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?f(t):null}function s(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return s(t)}}function h(t){(!t.__d&&(t.__d=!0)&&D.push(t)&&!b.__r++||L!==k.debounceRendering)&&((L=k.debounceRendering)||setTimeout)(b)}function b(){for(var t;b.__r=D.length;)t=D.sort((function(t,e){return t.__v.__b-e.__v.__b})),D=[],t.some((function(t){var e,r,o,i,u,a;t.__d&&(u=(i=(e=t).__v).__e,(a=e.__P)&&(r=[],(o=n({},i)).__v=i.__v+1,j(a,i,o,e.__n,void 0!==a.ownerSVGElement,null!=i.__h?[u]:null,r,null==u?f(i):u,i.__h),w(r,i),i.__e!=u&&s(i)))}))}function d(t,e,r,n,o,i,a,l,s,h){var b,d,p,m,g,_,O,w=n&&n.__k||B,S=w.length;for(r.__k=[],b=0;b<e.length;b++)if(null!=(m=r.__k[b]=null==(m=e[b])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?u(null,m,null,null,m):Array.isArray(m)?u(c,{children:m},null,null,null):m.__b>0?u(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)){if(m.__=r,m.__b=r.__b+1,null===(p=w[b])||p&&m.key==p.key&&m.type===p.type)w[b]=void 0;else for(d=0;d<S;d++){if((p=w[d])&&m.key==p.key&&m.type===p.type){w[d]=void 0;break}p=null}j(t,m,p=p||N,o,i,a,l,s,h),g=m.__e,(d=m.ref)&&p.ref!=d&&(O||(O=[]),p.ref&&O.push(p.ref,null,m),O.push(d,m.__c||g,m)),null!=g?(null==_&&(_=g),"function"==typeof m.type&&m.__k===p.__k?m.__d=s=y(m,s,t):s=v(t,m,p,w,g,s),"function"==typeof r.type&&(r.__d=s)):s&&p.__e==s&&s.parentNode!=t&&(s=f(p))}for(r.__e=_,b=S;b--;)null!=w[b]&&M(w[b],w[b]);if(O)for(b=0;b<O.length;b++)x(O[b],O[++b],O[++b])}function y(t,e,r){for(var n,o=t.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=t,e="function"==typeof n.type?y(n,e,r):v(r,n,n,o,n.__e,e));return e}function p(t,e){return e=e||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some((function(t){p(t,e)})):e.push(t)),e}function v(t,e,r,n,o,i){var u,a,c;if(void 0!==e.__d)u=e.__d,e.__d=void 0;else if(null==r||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),u=null;else{for(a=i,c=0;(a=a.nextSibling)&&c<n.length;c+=1)if(a==o)break t;t.insertBefore(o,i),u=i}return void 0!==u?u:o.nextSibling}function m(t,e,r){"-"===e[0]?t.setProperty(e,r):t[e]=null==r?"":"number"!=typeof r||V.test(e)?r:r+"px"}function g(t,e,r,n,o){var i;t:if("style"===e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||m(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||m(t.style,e,r[e])}else if("o"===e[0]&&"n"===e[1])i=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n||t.addEventListener(e,i?O:_,i):t.removeEventListener(e,i?O:_,i);else if("dangerouslySetInnerHTML"!==e){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==e&&"list"!==e&&"form"!==e&&"tabIndex"!==e&&"download"!==e&&e in t)try{t[e]=null==r?"":r;break t}catch(t){}"function"==typeof r||(null==r||!1===r&&-1==e.indexOf("-")?t.removeAttribute(e):t.setAttribute(e,r))}}function _(t){this.l[t.type+!1](k.event?k.event(t):t)}function O(t){this.l[t.type+!0](k.event?k.event(t):t)}function j(t,e,r,o,i,u,a,f,s){var h,b,y,p,v,m,g,_,O,j,w,x,M,T,E,C=e.type;if(void 0!==e.constructor)return null;null!=r.__h&&(s=r.__h,f=e.__e=r.__e,e.__h=null,u=[f]),(h=k.__b)&&h(e);try{t:if("function"==typeof C){if(_=e.props,O=(h=C.contextType)&&o[h.__c],j=h?O?O.props.value:h.__:o,r.__c?g=(b=e.__c=r.__c).__=b.__E:("prototype"in C&&C.prototype.render?e.__c=b=new C(_,j):(e.__c=b=new l(_,j),b.constructor=C,b.render=P),O&&O.sub(b),b.props=_,b.state||(b.state={}),b.context=j,b.__n=o,y=b.__d=!0,b.__h=[],b._sb=[]),null==b.__s&&(b.__s=b.state),null!=C.getDerivedStateFromProps&&(b.__s==b.state&&(b.__s=n({},b.__s)),n(b.__s,C.getDerivedStateFromProps(_,b.__s))),p=b.props,v=b.state,y)null==C.getDerivedStateFromProps&&null!=b.componentWillMount&&b.componentWillMount(),null!=b.componentDidMount&&b.__h.push(b.componentDidMount);else{if(null==C.getDerivedStateFromProps&&_!==p&&null!=b.componentWillReceiveProps&&b.componentWillReceiveProps(_,j),!b.__e&&null!=b.shouldComponentUpdate&&!1===b.shouldComponentUpdate(_,b.__s,j)||e.__v===r.__v){for(b.props=_,b.state=b.__s,e.__v!==r.__v&&(b.__d=!1),b.__v=e,e.__e=r.__e,e.__k=r.__k,e.__k.forEach((function(t){t&&(t.__=e)})),w=0;w<b._sb.length;w++)b.__h.push(b._sb[w]);b._sb=[],b.__h.length&&a.push(b);break t}null!=b.componentWillUpdate&&b.componentWillUpdate(_,b.__s,j),null!=b.componentDidUpdate&&b.__h.push((function(){b.componentDidUpdate(p,v,m)}))}if(b.context=j,b.props=_,b.__v=e,b.__P=t,x=k.__r,M=0,"prototype"in C&&C.prototype.render){for(b.state=b.__s,b.__d=!1,x&&x(e),h=b.render(b.props,b.state,b.context),T=0;T<b._sb.length;T++)b.__h.push(b._sb[T]);b._sb=[]}else do{b.__d=!1,x&&x(e),h=b.render(b.props,b.state,b.context),b.state=b.__s}while(b.__d&&++M<25);b.state=b.__s,null!=b.getChildContext&&(o=n(n({},o),b.getChildContext())),y||null==b.getSnapshotBeforeUpdate||(m=b.getSnapshotBeforeUpdate(p,v)),E=null!=h&&h.type===c&&null==h.key?h.props.children:h,d(t,Array.isArray(E)?E:[E],e,r,o,i,u,a,f,s),b.base=e.__e,e.__h=null,b.__h.length&&a.push(b),g&&(b.__E=b.__=null),b.__e=!1}else null==u&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=S(r.__e,e,r,o,i,u,a,s);(h=k.diffed)&&h(e)}catch(t){e.__v=null,(s||null!=u)&&(e.__e=f,e.__h=!!s,u[u.indexOf(f)]=null),k.__e(t,e,r)}}function w(t,e){k.__c&&k.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){k.__e(t,e.__v)}}))}function S(t,e,r,n,i,u,a,c){var l,s,h,b=r.props,y=e.props,p=e.type,v=0;if("svg"===p&&(i=!0),null!=u)for(;v<u.length;v++)if((l=u[v])&&"setAttribute"in l==!!p&&(p?l.localName===p:3===l.nodeType)){t=l,u[v]=null;break}if(null==t){if(null===p)return document.createTextNode(y);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,y.is&&y),u=null,c=!1}if(null===p)b===y||c&&t.data===y||(t.data=y);else{if(u=u&&A.call(t.childNodes),s=(b=r.props||N).dangerouslySetInnerHTML,h=y.dangerouslySetInnerHTML,!c){if(null!=u)for(b={},v=0;v<t.attributes.length;v++)b[t.attributes[v].name]=t.attributes[v].value;(h||s)&&(h&&(s&&h.__html==s.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(t,e,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in e||g(t,i,null,r[i],n);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===e[i]||g(t,i,e[i],r[i],n)}(t,y,b,i,c),h)e.__k=[];else if(v=e.props.children,d(t,Array.isArray(v)?v:[v],e,r,n,i&&"foreignObject"!==p,u,a,u?u[0]:r.__k&&f(r,0),c),null!=u)for(v=u.length;v--;)null!=u[v]&&o(u[v]);c||("value"in y&&void 0!==(v=y.value)&&(v!==t.value||"progress"===p&&!v||"option"===p&&v!==b.value)&&g(t,"value",v,b.value,!1),"checked"in y&&void 0!==(v=y.checked)&&v!==t.checked&&g(t,"checked",v,b.checked,!1))}return t}function x(t,e,r){try{"function"==typeof t?t(e):t.current=e}catch(t){k.__e(t,r)}}function M(t,e,r){var n,i;if(k.unmount&&k.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||x(n,null,e)),null!=(n=t.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(t){k.__e(t,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&M(n[i],e,r||"function"!=typeof t.type);r||null==t.__e||o(t.__e),t.__=t.__e=t.__d=void 0}function P(t,e,r){return this.constructor(t,r)}function T(t,e,r){var n,o,u;k.__&&k.__(t,e),o=(n="function"==typeof r)?null:r&&r.__k||e.__k,u=[],j(e,t=(!n&&r||e).__k=i(c,null,[t]),o||N,N,void 0!==e.ownerSVGElement,!n&&r?[r]:o?null:e.firstChild?A.call(e.childNodes):null,u,!n&&r?r:o?o.__e:e.firstChild,n),w(u,t)}function E(t,e){T(t,e,E)}function C(t,e,r){var o,i,a,c=n({},t.props);for(a in e)"key"==a?o=e[a]:"ref"==a?i=e[a]:c[a]=e[a];return arguments.length>2&&(c.children=arguments.length>3?A.call(arguments,2):r),u(t.type,c,o||t.key,i||t.ref,null)}function R(t,e){var r={__c:e="__cC"+F++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,n;return this.getChildContext||(r=[],(n={})[e]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&r.some(h)},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return r.Provider.__=r.Consumer.contextType=r}r.r(e),r.d(e,"Component",(function(){return l})),r.d(e,"Fragment",(function(){return c})),r.d(e,"cloneElement",(function(){return C})),r.d(e,"createContext",(function(){return R})),r.d(e,"createElement",(function(){return i})),r.d(e,"createRef",(function(){return a})),r.d(e,"h",(function(){return i})),r.d(e,"hydrate",(function(){return E})),r.d(e,"isValidElement",(function(){return U})),r.d(e,"options",(function(){return k})),r.d(e,"render",(function(){return T})),r.d(e,"toChildArray",(function(){return p}));var A,k,I,U,D,L,F,N={},B=[],V=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;A=B.slice,k={__e:function(t,e,r,n){for(var o,i,u;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),u=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,n||{}),u=o.__d),u)return o.__E=o}catch(e){t=e}throw t}},I=0,U=function(t){return null!=t&&void 0===t.constructor},l.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=n({},this.state),"function"==typeof t&&(t=t(n({},r),this.props)),t&&n(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),h(this))},l.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),h(this))},l.prototype.render=c,D=[],b.__r=0,F=0},"nF9+":function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=function(t){var e=t.htmlColor,r=t.isSelected,n=t.onSelect;return Object(a.h)("button",{class:"w-8 h-8 border border-2 p-1 rounded-full flex justify-center items-center",style:{borderColor:e},onClick:function(){r||n()}},Object(a.h)("span",{class:"w-full h-full rounded-full leading-none",style:{backgroundColor:r?e:""}}))};e.a=function(t){var e=t.modelControls,r=t.setModelControls,n=t.logoDefs;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("div",null,"Team Color"),Object(a.h)("div",{class:"flex flex-wrap -m-1 p-1"},n.idxList.map((function(t){return Object(a.h)("div",{key:t,class:"m-1"},Object(a.h)(c,{htmlColor:n.idxToHtmlColor(t),isSelected:e.logoColorIdx===t,onSelect:function(){return r(i(i({},e),{},{logoColorIdx:t}))}}))})))),Object(a.h)("div",{class:"space-y-2"},Object(a.h)("div",null,Object(a.h)("div",null,"Texture Filter (Min.)"),Object(a.h)("select",{value:e.textureFilterMin,onChange:function(t){var n=t.currentTarget.value;r(i(i({},e),{},{textureFilterMin:n}))}},Object(a.h)("option",{value:"nearest"},"Nearest"),Object(a.h)("option",{value:"linear"},"Linear"))),Object(a.h)("div",null,Object(a.h)("div",null,"Texture Filter (Mag.)"),Object(a.h)("select",{value:e.textureFilterMag,onChange:function(t){var n=t.currentTarget.value;r(i(i({},e),{},{textureFilterMag:n}))}},Object(a.h)("option",{value:"nearest"},"Nearest"),Object(a.h)("option",{value:"linear"},"Linear")))),Object(a.h)("div",null,Object(a.h)("label",{class:"flex items-center"},Object(a.h)("input",{type:"checkbox",checked:e.enableLightingRegular,onChange:function(t){r(i(i({},e),{},{enableLightingRegular:t.currentTarget.checked}))}}),Object(a.h)("span",{class:"pl-1"},"Enable Lighting"))))}},qVkA:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function f(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u(e)?e:String(e)}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function g(t,e,r){return(e=_(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t){var e=function(t,e){if("object"!==h(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===h(e)?e:String(e)}function O(t){To=t}function j(t){return t*Co}function w(t,e){return Math.abs(t-e)<=Po*Math.max(1,Math.abs(t),Math.abs(e))}function S(){var t=new To(16);return To!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function x(t){var e=new To(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function M(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function P(t,e,r,n,o,i,u,a,c,l,f,s,h,b,d,y){var p=new To(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=o,p[5]=i,p[6]=u,p[7]=a,p[8]=c,p[9]=l,p[10]=f,p[11]=s,p[12]=h,p[13]=b,p[14]=d,p[15]=y,p}function T(t,e,r,n,o,i,u,a,c,l,f,s,h,b,d,y,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=u,t[6]=a,t[7]=c,t[8]=l,t[9]=f,t[10]=s,t[11]=h,t[12]=b,t[13]=d,t[14]=y,t[15]=p,t}function E(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],i=e[6],u=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=o,t[13]=u,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function R(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=e[4],a=e[5],c=e[6],l=e[7],f=e[8],s=e[9],h=e[10],b=e[11],d=e[12],y=e[13],p=e[14],v=e[15],m=r*a-n*u,g=r*c-o*u,_=r*l-i*u,O=n*c-o*a,j=n*l-i*a,w=o*l-i*c,S=f*y-s*d,x=f*p-h*d,M=f*v-b*d,P=s*p-h*y,T=s*v-b*y,E=h*v-b*p,C=m*E-g*T+_*P+O*M-j*x+w*S;return C?(t[0]=(a*E-c*T+l*P)*(C=1/C),t[1]=(o*T-n*E-i*P)*C,t[2]=(y*w-p*j+v*O)*C,t[3]=(h*j-s*w-b*O)*C,t[4]=(c*M-u*E-l*x)*C,t[5]=(r*E-o*M+i*x)*C,t[6]=(p*_-d*w-v*g)*C,t[7]=(f*w-h*_+b*g)*C,t[8]=(u*T-a*M+l*S)*C,t[9]=(n*M-r*T-i*S)*C,t[10]=(d*j-y*_+v*m)*C,t[11]=(s*_-f*j-b*m)*C,t[12]=(a*x-u*P-c*S)*C,t[13]=(r*P-n*x+o*S)*C,t[14]=(y*g-d*O-p*m)*C,t[15]=(f*O-s*g+h*m)*C,t):null}function A(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=e[4],a=e[5],c=e[6],l=e[7],f=e[8],s=e[9],h=e[10],b=e[11],d=e[12],y=e[13],p=e[14],v=e[15];return t[0]=a*(h*v-b*p)-s*(c*v-l*p)+y*(c*b-l*h),t[1]=-(n*(h*v-b*p)-s*(o*v-i*p)+y*(o*b-i*h)),t[2]=n*(c*v-l*p)-a*(o*v-i*p)+y*(o*l-i*c),t[3]=-(n*(c*b-l*h)-a*(o*b-i*h)+s*(o*l-i*c)),t[4]=-(u*(h*v-b*p)-f*(c*v-l*p)+d*(c*b-l*h)),t[5]=r*(h*v-b*p)-f*(o*v-i*p)+d*(o*b-i*h),t[6]=-(r*(c*v-l*p)-u*(o*v-i*p)+d*(o*l-i*c)),t[7]=r*(c*b-l*h)-u*(o*b-i*h)+f*(o*l-i*c),t[8]=u*(s*v-b*y)-f*(a*v-l*y)+d*(a*b-l*s),t[9]=-(r*(s*v-b*y)-f*(n*v-i*y)+d*(n*b-i*s)),t[10]=r*(a*v-l*y)-u*(n*v-i*y)+d*(n*l-i*a),t[11]=-(r*(a*b-l*s)-u*(n*b-i*s)+f*(n*l-i*a)),t[12]=-(u*(s*p-h*y)-f*(a*p-c*y)+d*(a*h-c*s)),t[13]=r*(s*p-h*y)-f*(n*p-o*y)+d*(n*h-o*s),t[14]=-(r*(a*p-c*y)-u*(n*p-o*y)+d*(n*c-o*a)),t[15]=r*(a*h-c*s)-u*(n*h-o*s)+f*(n*c-o*a),t}function k(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],u=t[5],a=t[6],c=t[7],l=t[8],f=t[9],s=t[10],h=t[11],b=t[12],d=t[13],y=t[14],p=t[15];return(e*u-r*i)*(s*p-h*y)-(e*a-n*i)*(f*p-h*d)+(e*c-o*i)*(f*y-s*d)+(r*a-n*u)*(l*p-h*b)-(r*c-o*u)*(l*y-s*b)+(n*c-o*a)*(l*d-f*b)}function I(t,e,r){var n=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=e[8],h=e[9],b=e[10],d=e[11],y=e[12],p=e[13],v=e[14],m=e[15],g=r[0],_=r[1],O=r[2],j=r[3];return t[0]=g*n+_*a+O*s+j*y,t[1]=g*o+_*c+O*h+j*p,t[2]=g*i+_*l+O*b+j*v,t[3]=g*u+_*f+O*d+j*m,t[4]=(g=r[4])*n+(_=r[5])*a+(O=r[6])*s+(j=r[7])*y,t[5]=g*o+_*c+O*h+j*p,t[6]=g*i+_*l+O*b+j*v,t[7]=g*u+_*f+O*d+j*m,t[8]=(g=r[8])*n+(_=r[9])*a+(O=r[10])*s+(j=r[11])*y,t[9]=g*o+_*c+O*h+j*p,t[10]=g*i+_*l+O*b+j*v,t[11]=g*u+_*f+O*d+j*m,t[12]=(g=r[12])*n+(_=r[13])*a+(O=r[14])*s+(j=r[15])*y,t[13]=g*o+_*c+O*h+j*p,t[14]=g*i+_*l+O*b+j*v,t[15]=g*u+_*f+O*d+j*m,t}function U(t,e,r){var n,o,i,u,a,c,l,f,s,h,b,d,y=r[0],p=r[1],v=r[2];return e===t?(t[12]=e[0]*y+e[4]*p+e[8]*v+e[12],t[13]=e[1]*y+e[5]*p+e[9]*v+e[13],t[14]=e[2]*y+e[6]*p+e[10]*v+e[14],t[15]=e[3]*y+e[7]*p+e[11]*v+e[15]):(o=e[1],i=e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=e[8],h=e[9],b=e[10],d=e[11],t[0]=n=e[0],t[1]=o,t[2]=i,t[3]=u,t[4]=a,t[5]=c,t[6]=l,t[7]=f,t[8]=s,t[9]=h,t[10]=b,t[11]=d,t[12]=n*y+a*p+s*v+e[12],t[13]=o*y+c*p+h*v+e[13],t[14]=i*y+l*p+b*v+e[14],t[15]=u*y+f*p+d*v+e[15]),t}function D(t,e,r){var n=r[0],o=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function L(t,e,r,n){var o,i,u,a,c,l,f,s,h,b,d,y,p,v,m,g,_,O,j,w,S,x,M,P,T=n[0],E=n[1],C=n[2],R=Math.hypot(T,E,C);return R<Po?null:(T*=R=1/R,E*=R,C*=R,o=Math.sin(r),i=Math.cos(r),c=e[1],l=e[2],f=e[3],h=e[5],b=e[6],d=e[7],p=e[9],v=e[10],m=e[11],j=T*E*(u=1-i)-C*o,w=E*E*u+i,S=C*E*u+T*o,x=T*C*u+E*o,M=E*C*u-T*o,P=C*C*u+i,t[0]=(a=e[0])*(g=T*T*u+i)+(s=e[4])*(_=E*T*u+C*o)+(y=e[8])*(O=C*T*u-E*o),t[1]=c*g+h*_+p*O,t[2]=l*g+b*_+v*O,t[3]=f*g+d*_+m*O,t[4]=a*j+s*w+y*S,t[5]=c*j+h*w+p*S,t[6]=l*j+b*w+v*S,t[7]=f*j+d*w+m*S,t[8]=a*x+s*M+y*P,t[9]=c*x+h*M+p*P,t[10]=l*x+b*M+v*P,t[11]=f*x+d*M+m*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function F(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[4],u=e[5],a=e[6],c=e[7],l=e[8],f=e[9],s=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*o+l*n,t[5]=u*o+f*n,t[6]=a*o+s*n,t[7]=c*o+h*n,t[8]=l*o-i*n,t[9]=f*o-u*n,t[10]=s*o-a*n,t[11]=h*o-c*n,t}function N(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],u=e[1],a=e[2],c=e[3],l=e[8],f=e[9],s=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o-l*n,t[1]=u*o-f*n,t[2]=a*o-s*n,t[3]=c*o-h*n,t[8]=i*n+l*o,t[9]=u*n+f*o,t[10]=a*n+s*o,t[11]=c*n+h*o,t}function B(t,e,r){var n=Math.sin(r),o=Math.cos(r),i=e[0],u=e[1],a=e[2],c=e[3],l=e[4],f=e[5],s=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*o+l*n,t[1]=u*o+f*n,t[2]=a*o+s*n,t[3]=c*o+h*n,t[4]=l*o-i*n,t[5]=f*o-u*n,t[6]=s*o-a*n,t[7]=h*o-c*n,t}function V(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function X(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,e,r){var n,o,i,u=r[0],a=r[1],c=r[2],l=Math.hypot(u,a,c);return l<Po?null:(u*=l=1/l,a*=l,c*=l,n=Math.sin(e),o=Math.cos(e),t[0]=u*u*(i=1-o)+o,t[1]=a*u*i+c*n,t[2]=c*u*i-a*n,t[3]=0,t[4]=u*a*i-c*n,t[5]=a*a*i+o,t[6]=c*a*i+u*n,t[7]=0,t[8]=u*c*i+a*n,t[9]=a*c*i-u*n,t[10]=c*c*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function H(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function W(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function z(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,e,r){var n=e[0],o=e[1],i=e[2],u=e[3],a=n+n,c=o+o,l=i+i,f=n*a,s=n*c,h=n*l,b=o*c,d=o*l,y=i*l,p=u*a,v=u*c,m=u*l;return t[0]=1-(b+y),t[1]=s+m,t[2]=h-v,t[3]=0,t[4]=s-m,t[5]=1-(f+y),t[6]=d+p,t[7]=0,t[8]=h+v,t[9]=d-p,t[10]=1-(f+b),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function q(t,e){var r=new To(3),n=-e[0],o=-e[1],i=-e[2],u=e[3],a=e[4],c=e[5],l=e[6],f=e[7],s=n*n+o*o+i*i+u*u;return s>0?(r[0]=2*(a*u+f*n+c*i-l*o)/s,r[1]=2*(c*u+f*o+l*n-a*i)/s,r[2]=2*(l*u+f*i+a*o-c*n)/s):(r[0]=2*(a*u+f*n+c*i-l*o),r[1]=2*(c*u+f*o+l*n-a*i),r[2]=2*(l*u+f*i+a*o-c*n)),G(t,e,r),t}function Z(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function $(t,e){var r=e[4],n=e[5],o=e[6],i=e[8],u=e[9],a=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(r,n,o),t[2]=Math.hypot(i,u,a),t}function K(t,e){var r=new To(3);$(r,e);var n=1/r[0],o=1/r[1],i=1/r[2],u=e[0]*n,a=e[1]*o,c=e[2]*i,l=e[4]*n,f=e[5]*o,s=e[6]*i,h=e[8]*n,b=e[9]*o,d=e[10]*i,y=u+f+d,p=0;return y>0?(p=2*Math.sqrt(y+1),t[3]=.25*p,t[0]=(s-b)/p,t[1]=(h-c)/p,t[2]=(a-l)/p):u>f&&u>d?(p=2*Math.sqrt(1+u-f-d),t[3]=(s-b)/p,t[0]=.25*p,t[1]=(a+l)/p,t[2]=(h+c)/p):f>d?(p=2*Math.sqrt(1+f-u-d),t[3]=(h-c)/p,t[0]=(a+l)/p,t[1]=.25*p,t[2]=(s+b)/p):(p=2*Math.sqrt(1+d-u-f),t[3]=(a-l)/p,t[0]=(h+c)/p,t[1]=(s+b)/p,t[2]=.25*p),t}function J(t,e,r,n){var o=e[0],i=e[1],u=e[2],a=e[3],c=o+o,l=i+i,f=u+u,s=o*c,h=o*l,b=o*f,d=i*l,y=i*f,p=u*f,v=a*c,m=a*l,g=a*f,_=n[0],O=n[1],j=n[2];return t[0]=(1-(d+p))*_,t[1]=(h+g)*_,t[2]=(b-m)*_,t[3]=0,t[4]=(h-g)*O,t[5]=(1-(s+p))*O,t[6]=(y+v)*O,t[7]=0,t[8]=(b+m)*j,t[9]=(y-v)*j,t[10]=(1-(s+d))*j,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Q(t,e,r,n,o){var i=e[0],u=e[1],a=e[2],c=e[3],l=i+i,f=u+u,s=a+a,h=i*l,b=i*f,d=i*s,y=u*f,p=u*s,v=a*s,m=c*l,g=c*f,_=c*s,O=n[0],j=n[1],w=n[2],S=o[0],x=o[1],M=o[2],P=(1-(y+v))*O,T=(b+_)*O,E=(d-g)*O,C=(b-_)*j,R=(1-(h+v))*j,A=(p+m)*j,k=(d+g)*w,I=(p-m)*w,U=(1-(h+y))*w;return t[0]=P,t[1]=T,t[2]=E,t[3]=0,t[4]=C,t[5]=R,t[6]=A,t[7]=0,t[8]=k,t[9]=I,t[10]=U,t[11]=0,t[12]=r[0]+S-(P*S+C*x+k*M),t[13]=r[1]+x-(T*S+R*x+I*M),t[14]=r[2]+M-(E*S+A*x+U*M),t[15]=1,t}function tt(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],u=r+r,a=n+n,c=o+o,l=r*u,f=n*u,s=n*a,h=o*u,b=o*a,d=o*c,y=i*u,p=i*a,v=i*c;return t[0]=1-s-d,t[1]=f+v,t[2]=h-p,t[3]=0,t[4]=f-v,t[5]=1-l-d,t[6]=b+y,t[7]=0,t[8]=h+p,t[9]=b-y,t[10]=1-l-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function et(t,e,r,n,o,i,u){var a=1/(r-e),c=1/(o-n),l=1/(i-u);return t[0]=2*i*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(o+n)*c,t[10]=(u+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*l,t[15]=0,t}function rt(t,e,r,n,o){var i,u=1/Math.tan(e/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=(o+n)*(i=1/(n-o)),t[14]=2*o*n*i):(t[10]=-1,t[14]=-2*n),t}function nt(t,e,r,n,o){var i,u=1/Math.tan(e/2);return t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(t[10]=o*(i=1/(n-o)),t[14]=o*n*i):(t[10]=-1,t[14]=-n),t}function ot(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),c=2/(u+a),l=2/(o+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(u-a)*c*.5,t[9]=(o-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function it(t,e,r,n,o,i,u){var a=1/(e-r),c=1/(n-o),l=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*a,t[13]=(o+n)*c,t[14]=(u+i)*l,t[15]=1,t}function ut(t,e,r,n,o,i,u){var a=1/(e-r),c=1/(n-o),l=1/(i-u);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+r)*a,t[13]=(o+n)*c,t[14]=i*l,t[15]=1,t}function at(t,e,r,n){var o,i,u,a,c,l,f,s,h,b,d=e[0],y=e[1],p=e[2],v=n[0],m=n[1],g=n[2],_=r[0],O=r[1],j=r[2];return Math.abs(d-_)<Po&&Math.abs(y-O)<Po&&Math.abs(p-j)<Po?E(t):(f=d-_,s=y-O,h=p-j,o=m*(h*=b=1/Math.hypot(f,s,h))-g*(s*=b),i=g*(f*=b)-v*h,u=v*s-m*f,(b=Math.hypot(o,i,u))?(o*=b=1/b,i*=b,u*=b):(o=0,i=0,u=0),a=s*u-h*i,c=h*o-f*u,l=f*i-s*o,(b=Math.hypot(a,c,l))?(a*=b=1/b,c*=b,l*=b):(a=0,c=0,l=0),t[0]=o,t[1]=a,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=s,t[7]=0,t[8]=u,t[9]=l,t[10]=h,t[11]=0,t[12]=-(o*d+i*y+u*p),t[13]=-(a*d+c*y+l*p),t[14]=-(f*d+s*y+h*p),t[15]=1,t)}function ct(t,e,r,n){var o=e[0],i=e[1],u=e[2],a=n[0],c=n[1],l=n[2],f=o-r[0],s=i-r[1],h=u-r[2],b=f*f+s*s+h*h;b>0&&(f*=b=1/Math.sqrt(b),s*=b,h*=b);var d=c*h-l*s,y=l*f-a*h,p=a*s-c*f;return(b=d*d+y*y+p*p)>0&&(d*=b=1/Math.sqrt(b),y*=b,p*=b),t[0]=d,t[1]=y,t[2]=p,t[3]=0,t[4]=s*p-h*y,t[5]=h*d-f*p,t[6]=f*y-s*d,t[7]=0,t[8]=f,t[9]=s,t[10]=h,t[11]=0,t[12]=o,t[13]=i,t[14]=u,t[15]=1,t}function lt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ft(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function st(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function ht(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function bt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function yt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function pt(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],a=t[5],c=t[6],l=t[7],f=t[8],s=t[9],h=t[10],b=t[11],d=t[12],y=t[13],p=t[14],v=t[15],m=e[0],g=e[1],_=e[2],O=e[3],j=e[4],w=e[5],S=e[6],x=e[7],M=e[8],P=e[9],T=e[10],E=e[11],C=e[12],R=e[13],A=e[14],k=e[15];return Math.abs(r-m)<=Po*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(n-g)<=Po*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-_)<=Po*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-O)<=Po*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(u-j)<=Po*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(a-w)<=Po*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(c-S)<=Po*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-x)<=Po*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(f-M)<=Po*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(s-P)<=Po*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(h-T)<=Po*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(b-E)<=Po*Math.max(1,Math.abs(b),Math.abs(E))&&Math.abs(d-C)<=Po*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(y-R)<=Po*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(p-A)<=Po*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(v-k)<=Po*Math.max(1,Math.abs(v),Math.abs(k))}function vt(){var t=new To(3);return To!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function mt(t){var e=new To(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function gt(t){return Math.hypot(t[0],t[1],t[2])}function _t(t,e,r){var n=new To(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function jt(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function wt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function St(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function xt(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Mt(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Pt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Tt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Et(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function Ct(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function Rt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function At(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function kt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function It(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])}function Ut(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function Dt(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function Lt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ft(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Nt(t,e){var r=e[0],n=e[1],o=e[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Bt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Vt(t,e,r){var n=e[0],o=e[1],i=e[2],u=r[0],a=r[1],c=r[2];return t[0]=o*c-i*a,t[1]=i*u-n*c,t[2]=n*a-o*u,t}function Xt(t,e,r,n){var o=e[0],i=e[1],u=e[2];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t}function Yt(t,e,r,n,o,i){var u=i*i,a=u*(2*i-3)+1,c=u*(i-2)+i,l=u*(i-1),f=u*(3-2*i);return t[0]=e[0]*a+r[0]*c+n[0]*l+o[0]*f,t[1]=e[1]*a+r[1]*c+n[1]*l+o[1]*f,t[2]=e[2]*a+r[2]*c+n[2]*l+o[2]*f,t}function Ht(t,e,r,n,o,i){var u=1-i,a=u*u,c=i*i,l=a*u,f=3*i*a,s=3*c*u,h=c*i;return t[0]=e[0]*l+r[0]*f+n[0]*s+o[0]*h,t[1]=e[1]*l+r[1]*f+n[1]*s+o[1]*h,t[2]=e[2]*l+r[2]*f+n[2]*s+o[2]*h,t}function Wt(t,e){e=e||1;var r=2*Eo()*Math.PI,n=2*Eo()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t}function zt(t,e,r){var n=e[0],o=e[1],i=e[2],u=r[3]*n+r[7]*o+r[11]*i+r[15];return t[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/(u=u||1),t[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/u,t[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/u,t}function Gt(t,e,r){var n=e[0],o=e[1],i=e[2];return t[0]=n*r[0]+o*r[3]+i*r[6],t[1]=n*r[1]+o*r[4]+i*r[7],t[2]=n*r[2]+o*r[5]+i*r[8],t}function qt(t,e,r){var n=r[0],o=r[1],i=r[2],u=e[0],a=e[1],c=e[2],l=o*c-i*a,f=i*u-n*c,s=n*a-o*u,h=o*s-i*f,b=i*l-n*s,d=n*f-o*l,y=2*r[3];return f*=y,s*=y,b*=2,d*=2,t[0]=u+(l*=y)+(h*=2),t[1]=a+f+b,t[2]=c+s+d,t}function Zt(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function $t(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Kt(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Jt(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],a=e[2],c=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(i*i+u*u+a*a),l=c&&Bt(t,e)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function Qt(t){return t[0]=0,t[1]=0,t[2]=0,t}function te(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function ee(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function re(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],a=e[2];return Math.abs(r-i)<=Po*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=Po*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-a)<=Po*Math.max(1,Math.abs(o),Math.abs(a))}function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ue(n.key),n)}}function ie(t,e,r){return(e=ue(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ue(t){var e=function(t,e){if("object"!==ne(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ne(e)?e:String(e)}function ae(t){return 0==(t&t-1)}function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function le(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return fe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function he(t,e,r){return(e=be(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function be(t){var e=function(t,e){if("object"!==ce(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ce(e)?e:String(e)}function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,we(n.key),n)}}function pe(){return pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ve(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},pe.apply(this,arguments)}function ve(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=je(t)););return t}function me(t,e){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},me(t,e)}function ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=je(t);if(e){var o=je(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _e(this,r)}}function _e(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Oe(t)}function Oe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}function we(t){var e=function(t,e){if("object"!==de(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===de(e)?e:String(e)}function Se(t){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Se(t)}function xe(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ee(n.key),n)}}function Te(t,e,r){return(e=Ee(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ee(t){var e=function(t,e){if("object"!==Se(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Se(e)?e:String(e)}function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function Re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ke(n.key),n)}}function Ae(t,e,r){return(e=ke(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ke(t){var e=function(t,e){if("object"!==Ce(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ce(e)?e:String(e)}function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ye(n.key),n)}}function Le(t,e){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Le(t,e)}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ve(t);if(e){var o=Ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ne(this,r)}}function Ne(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Be(t)}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ve(t)}function Xe(t,e,r){return(e=Ye(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ye(t){var e=function(t,e){if("object"!==Ie(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ie(e)?e:String(e)}function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function We(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ke(n.key),n)}}function ze(t,e){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ze(t,e)}function Ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=$e(t);if(e){var o=$e(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return qe(this,r)}}function qe(t,e){if(e&&("object"===He(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ze(t)}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$e(t)}function Ke(t){var e=function(t,e){if("object"!==He(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===He(e)?e:String(e)}function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function Qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==Je(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===Je(o)?o:String(o)),n)}var o}function er(t,e){return er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},er(t,e)}function rr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=or(t);if(e){var o=or(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nr(this,r)}}function nr(t,e){if(e&&("object"===Je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function or(t){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},or(t)}function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==ir(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===ir(o)?o:String(o)),n)}var o}function cr(t,e){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cr(t,e)}function lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=sr(t);if(e){var o=sr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return fr(this,r)}}function fr(t,e){if(e&&("object"===ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sr(t){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sr(t)}function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function br(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==hr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===hr(o)?o:String(o)),n)}var o}function yr(t,e){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yr(t,e)}function pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=mr(t);if(e){var o=mr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return vr(this,r)}}function vr(t,e){if(e&&("object"===hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function mr(t){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mr(t)}function gr(t){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(t)}function _r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jr(n.key),n)}}function Or(t,e,r){return(e=jr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jr(t){var e=function(t,e){if("object"!==gr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===gr(e)?e:String(e)}function wr(t){return function(t){if(Array.isArray(t))return Sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xr(t,e,r){var n=e.vertices.flatMap((function(t){return t})),o=new Jo(t.getGl(),t.getProgramInfo().attribLocations.vertexPosition);o.bufferData(Jo.createBufferSourceFromPositions(n));var i,u,a=e.indices.map((function(t){if(t<0||t>e.vertices.length-1)throw"Index out of bounds: ".concat(t);return t})),c=new Zo(t.getGl());if(c.bufferData(Zo.createBufferSourceFromIndices(a)),r){for(var l=[],f=0;f<e.vertices.length;f++)l[f]=so.create();for(var s=0;s<a.length;s+=3){var h=a[s+0],b=a[s+1],d=a[s+2],y=so.fromValues.apply(so,wr(e.vertices[h])),p=so.fromValues.apply(so,wr(e.vertices[b])),v=so.fromValues.apply(so,wr(e.vertices[d])),m=so.sub(so.create(),p,y),g=so.sub(so.create(),v,y),_=so.cross(so.create(),m,g);so.add(l[h],l[h],_),so.add(l[b],l[b],_),so.add(l[d],l[d],_)}for(var O=0;O<e.vertices.length;O++)so.normalize(l[O],l[O]);(i=new Ko(t.getGl(),t.getProgramInfo().attribLocations.vertexNormal)).bufferData(Ko.createBufferSourceFromPositions(l.flatMap((function(t){return[t[0],t[1],t[2]]}))))}return e.texCoords&&(u=new Qo(t.getGl(),t.getProgramInfo().attribLocations.textureCoord)).bufferData(Qo.createBufferSourceFromCoords(e.texCoords)),new ti(o,c,i,u)}function Mr(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Pr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tr(t,e,r,n,o,i,u){var a=new Go(null,"WRAPPER:"+e.name);a.translate(e.xOffset*ri,e.yOffset*ri,e.zOffset*ri);var c,l=[],f=Mr(e.primitives);try{for(f.s();!(c=f.n()).done;){var s=c.value,h=Er(t,e.vertices,s,o,i,u);null!==h&&(u&&wo.validateTextureName(s.textureName)&&h.setTextureKey(s.textureName),l.push(h))}}catch(t){f.e(t)}finally{f.f()}var b=new Go(l,e.name);a.addChild(b),n.set(e,b);var d,y=Mr(e.children);try{for(y.s();!(d=y.n()).done;){Tr(t,d.value,b,n,o,i,u)}}catch(t){y.e(t)}finally{y.f()}r.addChild(a)}function Er(t,e,r,n,o,i){var u=r.vertexIndices.map((function(t){var r=e[t];return[r.x*ri,r.y*ri,r.z*ri]}));return 3===r.vertexIndices.length?ei.createModelFromIndexedVertices(t,{vertices:u,indices:[0,1,2],texCoords:i?[0,0,0,1,1,1]:null},o):4===r.vertexIndices.length?ei.createModelFromIndexedVertices(t,{vertices:u,indices:n?[0,1,2,0,2,3]:[0,1,2,3],texCoords:i&&n?[0,0,1,0,1,1,0,1]:null},o):null}function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Rr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||kr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kr(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function kr(t,e){if(t){if("string"==typeof t)return Ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ir(t,e):void 0}}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lr(n.key),n)}}function Dr(t,e,r){return(e=Lr(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lr(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Cr(e)?e:String(e)}function Fr(t){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(t)}function Nr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==Fr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===Fr(o)?o:String(o)),n)}var o}function Vr(){return Vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=Xr(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Vr.apply(this,arguments)}function Xr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zr(t)););return t}function Yr(t,e){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yr(t,e)}function Hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=zr(t);if(e){var o=zr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Wr(this,r)}}function Wr(t,e){if(e&&("object"===Fr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function zr(t){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zr(t)}function Gr(t){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gr(t)}function qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==Gr(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===Gr(o)?o:String(o)),n)}var o}function $r(t,e){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$r(t,e)}function Kr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qr(t);if(e){var o=Qr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Jr(this,r)}}function Jr(t,e){if(e&&("object"===Gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(o=void 0,o=function(t,e){if("object"!==tn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(n.key,"string"),"symbol"===tn(o)?o:String(o)),n)}var o}function nn(t,e){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nn(t,e)}function on(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=an(t);if(e){var o=an(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return un(this,r)}}function un(t,e){if(e&&("object"===tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function an(t){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},an(t)}function cn(t){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mn(n.key),n)}}function fn(){return fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=sn(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},fn.apply(this,arguments)}function sn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pn(t)););return t}function hn(t,e){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hn(t,e)}function bn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=pn(t);if(e){var o=pn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return dn(this,r)}}function dn(t,e){if(e&&("object"===cn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yn(t)}function yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pn(t){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pn(t)}function vn(t,e,r){return(e=mn(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mn(t){var e=function(t,e){if("object"!==cn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cn(e)?e:String(e)}function gn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function On(t){return On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(t)}function jn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jn(Object(r),!0).forEach((function(e){Sn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==On(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==On(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===On(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xn(t){return function(t){if(Array.isArray(t))return Tn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Pn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Pn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(t,e){if(t){if("string"==typeof t)return Tn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tn(t,e):void 0}}function Tn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function En(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return An(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return An(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function In(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Un(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?In(Object(r),!0).forEach((function(e){Dn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==kn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===kn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ln(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function Fn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Nn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(t,e){if(t){if("string"==typeof t)return Bn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(t,e):void 0}}function Bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xn(Object(r),!0).forEach((function(e){Hn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hn(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==Vn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Vn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Vn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gn(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function qn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){Gn(a,n,o,i,u,"next",t)}function u(t){Gn(a,n,o,i,u,"throw",t)}var a=t.apply(e,r);i(void 0)}))}}function Zn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Kn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function $n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||Kn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){if(t){if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jn(t,e):void 0}}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qn(t){var e,r=new Map,n=function t(e){r.set(e,{highlight:!1,hide:!1});var n,o=Zn(e.children);try{for(o.s();!(n=o.n()).done;){t(n.value)}}catch(t){o.e(t)}finally{o.f()}},o=Zn(t.rootNodes);try{for(o.s();!(e=o.n()).done;){n(e.value)}}catch(t){o.e(t)}finally{o.f()}return r}function to(){return(to=qn((function*(){return{regular:{fsSource:yield fetch("assets/shaders/regular.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/regular.vs").then((function(t){return t.text()}))},solid:{fsSource:yield fetch("assets/shaders/solid_color.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/solid_color.vs").then((function(t){return t.text()}))},wireframe:{fsSource:yield fetch("assets/shaders/wireframe.fs").then((function(t){return t.text()})),vsSource:yield fetch("assets/shaders/wireframe.vs").then((function(t){return t.text()}))}}}))).apply(this,arguments)}function eo(){return(eo=qn((function*(t){var e;if("string"==typeof t){var r=yield fetch(t);e=yield r.arrayBuffer()}else e=yield t.arrayBuffer();var n=new DataView(e);return _o.Parse3do.fromBuffer(n)}))).apply(this,arguments)}function ro(){return(ro=qn((function*(t,e,r,n){var o,i=new Set,u=function t(e){var r,n=Zn(e.primitives);try{for(n.s();!(r=n.n()).done;){var o=r.value.textureName;wo.validateTextureName(o)&&i.add(o)}}catch(t){n.e(t)}finally{n.f()}var u,a=Zn(e.children);try{for(a.s();!(u=a.n()).done;){t(u.value)}}catch(t){a.e(t)}finally{a.f()}},a=Zn(t.rootNodes);try{for(a.s();!(o=a.n()).done;){u(o.value)}}catch(t){a.e(t)}finally{a.f()}var c={};return yield Promise.all(Array.from(i).map((function(t){return new Promise((function(o,i){if(""===(t=t.trim()))return c[t]=null,void o();if(!e.textureKeyUsesLogo(t)){var u="".concat(t,".").concat(n),a=new Image;return a.src=r+u,a.onerror=function(){console.error("Failed to load image at: ".concat(a.src)),c[t]=null,o()},void(a.onload=function(){c[t]={type:"html",image:a},o()})}Promise.all(e.idxList.map((function(o){return new Promise((function(i){var u=e.idxToTextureKey(o,t),a=e.idxToTextureFilename(o,t),l="".concat(a,".").concat(n),f=new Image;f.src=r+l,f.onerror=function(){console.error("Failed to load image at: ".concat(f.src)),c[u]=null,i()},f.onload=function(){c[u]={type:"html",image:f},i()}}))}))).then((function(){return o()}),i)}))}))),c}))).apply(this,arguments)}function no(t){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(t)}function oo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function io(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(r),!0).forEach((function(e){uo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==no(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==no(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===no(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ao(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return co(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return co(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.r(e);var lo={};r.r(lo),r.d(lo,"EPSILON",(function(){return Po})),r.d(lo,"ARRAY_TYPE",(function(){return To})),r.d(lo,"RANDOM",(function(){return Eo})),r.d(lo,"setMatrixArrayType",(function(){return O})),r.d(lo,"toRadian",(function(){return j})),r.d(lo,"equals",(function(){return w}));var fo={};r.r(fo),r.d(fo,"create",(function(){return S})),r.d(fo,"clone",(function(){return x})),r.d(fo,"copy",(function(){return M})),r.d(fo,"fromValues",(function(){return P})),r.d(fo,"set",(function(){return T})),r.d(fo,"identity",(function(){return E})),r.d(fo,"transpose",(function(){return C})),r.d(fo,"invert",(function(){return R})),r.d(fo,"adjoint",(function(){return A})),r.d(fo,"determinant",(function(){return k})),r.d(fo,"multiply",(function(){return I})),r.d(fo,"translate",(function(){return U})),r.d(fo,"scale",(function(){return D})),r.d(fo,"rotate",(function(){return L})),r.d(fo,"rotateX",(function(){return F})),r.d(fo,"rotateY",(function(){return N})),r.d(fo,"rotateZ",(function(){return B})),r.d(fo,"fromTranslation",(function(){return V})),r.d(fo,"fromScaling",(function(){return X})),r.d(fo,"fromRotation",(function(){return Y})),r.d(fo,"fromXRotation",(function(){return H})),r.d(fo,"fromYRotation",(function(){return W})),r.d(fo,"fromZRotation",(function(){return z})),r.d(fo,"fromRotationTranslation",(function(){return G})),r.d(fo,"fromQuat2",(function(){return q})),r.d(fo,"getTranslation",(function(){return Z})),r.d(fo,"getScaling",(function(){return $})),r.d(fo,"getRotation",(function(){return K})),r.d(fo,"fromRotationTranslationScale",(function(){return J})),r.d(fo,"fromRotationTranslationScaleOrigin",(function(){return Q})),r.d(fo,"fromQuat",(function(){return tt})),r.d(fo,"frustum",(function(){return et})),r.d(fo,"perspectiveNO",(function(){return rt})),r.d(fo,"perspective",(function(){return Ao})),r.d(fo,"perspectiveZO",(function(){return nt})),r.d(fo,"perspectiveFromFieldOfView",(function(){return ot})),r.d(fo,"orthoNO",(function(){return it})),r.d(fo,"ortho",(function(){return ko})),r.d(fo,"orthoZO",(function(){return ut})),r.d(fo,"lookAt",(function(){return at})),r.d(fo,"targetTo",(function(){return ct})),r.d(fo,"str",(function(){return lt})),r.d(fo,"frob",(function(){return ft})),r.d(fo,"add",(function(){return st})),r.d(fo,"subtract",(function(){return ht})),r.d(fo,"multiplyScalar",(function(){return bt})),r.d(fo,"multiplyScalarAndAdd",(function(){return dt})),r.d(fo,"exactEquals",(function(){return yt})),r.d(fo,"equals",(function(){return pt})),r.d(fo,"mul",(function(){return Io})),r.d(fo,"sub",(function(){return Uo}));var so={};r.r(so),r.d(so,"create",(function(){return vt})),r.d(so,"clone",(function(){return mt})),r.d(so,"length",(function(){return gt})),r.d(so,"fromValues",(function(){return _t})),r.d(so,"copy",(function(){return Ot})),r.d(so,"set",(function(){return jt})),r.d(so,"add",(function(){return wt})),r.d(so,"subtract",(function(){return St})),r.d(so,"multiply",(function(){return xt})),r.d(so,"divide",(function(){return Mt})),r.d(so,"ceil",(function(){return Pt})),r.d(so,"floor",(function(){return Tt})),r.d(so,"min",(function(){return Et})),r.d(so,"max",(function(){return Ct})),r.d(so,"round",(function(){return Rt})),r.d(so,"scale",(function(){return At})),r.d(so,"scaleAndAdd",(function(){return kt})),r.d(so,"distance",(function(){return It})),r.d(so,"squaredDistance",(function(){return Ut})),r.d(so,"squaredLength",(function(){return Dt})),r.d(so,"negate",(function(){return Lt})),r.d(so,"inverse",(function(){return Ft})),r.d(so,"normalize",(function(){return Nt})),r.d(so,"dot",(function(){return Bt})),r.d(so,"cross",(function(){return Vt})),r.d(so,"lerp",(function(){return Xt})),r.d(so,"hermite",(function(){return Yt})),r.d(so,"bezier",(function(){return Ht})),r.d(so,"random",(function(){return Wt})),r.d(so,"transformMat4",(function(){return zt})),r.d(so,"transformMat3",(function(){return Gt})),r.d(so,"transformQuat",(function(){return qt})),r.d(so,"rotateX",(function(){return Zt})),r.d(so,"rotateY",(function(){return $t})),r.d(so,"rotateZ",(function(){return Kt})),r.d(so,"angle",(function(){return Jt})),r.d(so,"zero",(function(){return Qt})),r.d(so,"str",(function(){return te})),r.d(so,"exactEquals",(function(){return ee})),r.d(so,"equals",(function(){return re})),r.d(so,"sub",(function(){return Do})),r.d(so,"mul",(function(){return Lo})),r.d(so,"div",(function(){return Fo})),r.d(so,"dist",(function(){return No})),r.d(so,"sqrDist",(function(){return Bo})),r.d(so,"len",(function(){return Vo})),r.d(so,"sqrLen",(function(){return Xo})),r.d(so,"forEach",(function(){return Yo}));var ho=r("hosL"),bo=r("QRet"),yo={save:function(t){var e=JSON.stringify(t);localStorage.setItem("user",e)},load:function(){var t=localStorage.getItem("user");if(null!==t){var e=JSON.parse(t);if("object"!==n(e))throw new Error("User settings is not an object");var r=e.sidebarPosition;if("left"!==r&&"right"!==r)throw new Error("Invalid sidebarPosition");var o=e.sidebarWidth;if("number"!=typeof o)throw new Error("Invalid sidebarWidth");var i=e.defaultTextureFilterMin;if("nearest"!==i&&"linear"!==i)throw new Error("Invalid defaultTextureFilterMin");var u=e.defaultTextureFilterMag;if("nearest"!==u&&"linear"!==u)throw new Error("Invalid defaultTextureFilterMag");return{sidebarPosition:r,sidebarWidth:o,defaultTextureFilterMin:i,defaultTextureFilterMag:u}}}},po={rotationX:50,rotationY:-150,rotationZ:0,translationX:0,translationY:0,zoom:900,viewMode:"regular",viewColor:[1,1,1,1],enableLightingRegular:!1,logoColorIdx:0,textureFilterMin:"linear",textureFilterMag:"linear",enableLightingSolidColor:!0,solidColor:[1,1,1,1],wireframeColor:[1,1,1,1]},vo={sidebarPosition:"right",sidebarWidth:300,defaultTextureFilterMin:"nearest",defaultTextureFilterMag:"nearest"},mo=["aradrag.3do","tardrag.3do","verdrag.3do","zondrag.3do","creaeri.3do","aralode.3do","araking.3do","cresage.3do","tarnecro.3do","vermage.3do","zonhunt.3do"].map((function(t){return{name:t,path:"assets/3do-samples/"+t}})),go=function(t){var e=t.onSubmit,r=Object(ho.h)("form",{class:"px-4 py-2 border border-4 border-gray-600 rounded",onSubmit:function(t){t.preventDefault();var r=new FormData(t.currentTarget).get("file");r&&r.size&&r.name&&e(r)}},Object(ho.h)("div",{class:"text-3xl text-center mb-4"},"Option 1"),Object(ho.h)("div",{class:"text-xl text-gray-400 mb-2"},"Load your own file"),Object(ho.h)("div",{className:"flex items-stretch space-x-2"},Object(ho.h)("input",{name:"file",type:"file",class:"grow border border-gray-700"}),Object(ho.h)("button",{type:"submit"},"Go"))),n=Object(ho.h)("form",{class:"px-4 py-2 border border-4 border-gray-600 rounded",onSubmit:function(t){var r;t.preventDefault();var n=null===(r=new FormData(t.currentTarget).get("sample"))||void 0===r?void 0:r.toString().trim();n&&e(n)}},Object(ho.h)("div",{class:"text-3xl text-center mb-4"},"Option 2"),Object(ho.h)("div",{class:"text-xl text-gray-400 mb-2"},"Pick a sample file"),Object(ho.h)("div",{className:"flex items-stretch space-x-2"},Object(ho.h)("select",{name:"sample",class:"grow border border-gray-700"},Object(ho.h)("option",{value:""}),mo.map((function(t,e){return Object(ho.h)("option",{value:t.path,key:e},t.name)}))),Object(ho.h)("button",{type:"submit"},"Go")));return Object(ho.h)("div",{class:"min-w-screen min-h-screen bg-gray-800 flex justify-center items-center text-white"},Object(ho.h)("div",{class:"flex flex-col space-y-6"},r,n))},_o=r("/u4b"),Oo={defaultIdx:0,idxList:Array.from({length:10}).map((function(t,e){return e})),idxCount:10,idxToName:function(t){return t.toString()},idxToHtmlColor:function(t){return jo[t]},textureKeyUsesLogo:function(t){return t.toLowerCase().includes("logo")},idxToTextureKey:function(t,e){return 0===t?e:"".concat(e,"/color:").concat(t)},idxToTextureFilename:function(t,e){return 0===t?e:"".concat(e,".").concat(t)}},jo={0:"lightblue",1:"red",2:"white",3:"green",4:"darkblue",5:"purple",6:"yellow",7:"black",8:"orange",9:"brown"},wo={compareObjectsShallow:function(t,e){var r=Object.entries(t),n=Object.keys(e);return r.length===n.length&&r.every((function(t){var r=o(t,2),n=r[0];return n in e&&e[n]===r[1]}))},createUpdatedMap:function(t,e,r){var n=new Map(t);return n.set(e,r),n},validateTextureName:function(t){return/^(?!^(?:COM|PRN|AUX|NUL|CON|CLOCK\$)(?:\..+)?$)[^\s\\/:\*\?\"<>\|\x00-\x1F\x7F]{1,254}$/.test(t)}},So=function(){function t(t){f(this,"config",void 0),f(this,"resizeObserver",void 0),f(this,"cleanupEvents",void 0),this.config=t}var e,r,n;return e=t,(r=[{key:"setupEvents",value:function(){var t,e,r,n,o,i=this,u=this.config,a=u.listener,l=u.canvas,f=u.mode,s=!1,h=function(u){if(void 0===t){if(0===u.button)t="rotate";else{if(1!==u.button)return;t="pan"}e=u.clientX,r=u.clientY,n="rotate"===t?i.config.modelControls.rotationX:i.config.modelControls.translationX,o="rotate"===t?i.config.modelControls.rotationY:i.config.modelControls.translationY}},b=function(u){if(void 0!==e&&void 0!==r&&void 0!==n&&void 0!==o){var a=Math.round(.75*(u.clientX-e)),c=Math.round(.75*(u.clientY-r));if(0!==a||0!==c){if(0!==a)if("rotate"===t){for(var l=o+a;l>180;)l-=360;for(;l<-180;)l+=360;i.config.modelControls.rotationY=l}else i.config.modelControls.translationX=n+a;if(0!==c)if("rotate"===t){for(var h=n+c;h>180;)h-=360;for(;h<-180;)h+=360;i.config.modelControls.rotationX=h}else i.config.modelControls.translationY=o+c;s=!0,"static"===f&&i.render()}}},d=function(){t=e=r=n=o=void 0,s&&(a.onModelControlsChanged(c({},i.config.modelControls)),s=!1)},y=function(){"hidden"===document.visibilityState&&d()},p=function(t){0!==t.deltaY&&(i.config.modelControls.zoom+=t.deltaY,"static"===i.config.mode&&i.render(),a.onModelControlsChanged(c({},i.config.modelControls)))};l.addEventListener("mousedown",h),l.addEventListener("mousemove",b),window.addEventListener("mouseup",d),document.addEventListener("visibilitychange",y),l.addEventListener("wheel",p),this.cleanupEvents=function(){l.removeEventListener("mousedown",h),l.removeEventListener("mousedown",b),window.removeEventListener("mouseup",d),document.removeEventListener("visibilitychange",y),l.removeEventListener("wheel",p)};var v=function(){var t=l.parentElement;if(!t)throw new Error("Canvas has no parent!!");var e=t.clientWidth,r=t.clientHeight,n=!1;return l.width!==e&&(l.width=e,n=!0),l.height!==r&&(l.height=r,n=!0),!!n&&(i.onResized(),!0)};this.resizeObserver=new ResizeObserver(v);var m=l.parentElement;if(!m)throw window.alert("Failed to create canvas"),new Error("Canvas has no parent!! (Can't listen to resizing...)");this.resizeObserver.observe(m),v()||this.onResized()}},{key:"setModelControls",value:function(t){this.config.modelControls=t,"static"===this.config.mode&&this.render()}},{key:"setTextureMapping",value:function(t){this.config.textureMapping=t,"static"===this.config.mode&&this.render()}},{key:"setObjectStateMap",value:function(t){this.config.objStateMap=t,"static"===this.config.mode&&this.render()}},{key:"destroy",value:function(){var t;this.resizeObserver&&this.resizeObserver.disconnect(),null===(t=this.cleanupEvents)||void 0===t||t.call(this)}},{key:"width",get:function(){return this.config.canvas.width}},{key:"height",get:function(){return this.config.canvas.height}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),xo=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),g(v(r=i.call(this,t)),"ctx",void 0),g(v(r),"renderCount",0);var n=t.canvas.getContext("2d");if(null===n)throw window.alert("Canvas not supported in this browser."),new Error("Failed to create context");return r.ctx=n,r.setupEvents(),r}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t);var r,n,o,i=y(e);return r=e,(n=[{key:"onResized",value:function(){this.render()}},{key:"render",value:function(){var t=this.config.modelControls;console.log("Rendering next  (#".concat(this.renderCount,")"));var e=performance.now(),r=this.width,n=this.height;this.ctx.fillStyle="rgb(4, 16, 22)",this.ctx.fillRect(0,0,r,n),this.ctx.strokeStyle="rgb(0, 0, 200)",this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(0,n/2),this.ctx.lineTo(r,n/2),this.ctx.stroke(),this.ctx.moveTo(r/2,0),this.ctx.lineTo(r/2,n),this.ctx.stroke();var o=["renderCount: ".concat(this.renderCount),"viewWidth: ".concat(r),"viewHeight: ".concat(n),"zoom: ".concat(t.zoom),"rotationX: ".concat(t.rotationX),"rotationY: ".concat(t.rotationY),"rotationZ: ".concat(t.rotationZ),"translationX: ".concat(t.translationX),"translationY: ".concat(t.translationY),"viewMode: ".concat(t.viewMode)];this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.fillStyle="white",this.ctx.font="".concat(18,"px monospace"),this.ctx.strokeStyle="red";for(var i=this.ctx.measureText(o.reduce((function(t,e){return t.length>e.length?t:e}))).width,u=18*o.length+4*o.length*2,a=0;a<o.length;a++)this.ctx.fillText(o[a],r/2-i/2,n/2-u/2+(26*a+13));var c=performance.now();console.log("Finished rendering  in ".concat(c-e,"ms")),this.renderCount++}}])&&b(r.prototype,n),o&&b(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(So),Mo={compileShader:function(t,e,r){var n=t.createShader(r);if(null===n)throw'Failed to create shader of type "'.concat(r,'"');if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw"Could not compile shader: ".concat(t.getShaderInfoLog(n));return n},createProgram:function(t,e,r){var n=t.createProgram();if(null===n)throw"Failed to create program";if(t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw"Program failed to link: ".concat(t.getProgramInfoLog(n));return n},resizeCanvasToDisplaySize:function(t){var e=t.clientWidth,r=t.clientHeight,n=t.width!==e||t.height!==r;return n&&(t.width=e,t.height=r),n}},Po=1e-6,To="undefined"!=typeof Float32Array?Float32Array:Array,Eo=Math.random,Co=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Ro,Ao=rt,ko=it,Io=I,Uo=ht,Do=St,Lo=xt,Fo=Mt,No=It,Bo=Ut,Vo=gt,Xo=Dt,Yo=(Ro=vt(),function(t,e,r,n,o,i){var u,a;for(e||(e=3),r||(r=0),a=n?Math.min(n*e+r,t.length):t.length,u=r;u<a;u+=e)Ro[0]=t[u],Ro[1]=t[u+1],Ro[2]=t[u+2],o(Ro,Ro,i),t[u]=Ro[0],t[u+1]=Ro[1],t[u+2]=Ro[2];return t}),Ho=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,"gl",void 0),ie(this,"handle",void 0),ie(this,"deleted",!1),ie(this,"ok",!1),this.gl=e;var r=e.createTexture();if(null===r)throw new Error("Failed to create texture.");this.handle=r}var e,r,n;return e=t,(r=[{key:"use",value:function(t,e,r){if(this.deleted)throw"Trying to use a texture that has already been deleted.";return!!this.ok&&(this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.uniform1i(t,0),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,r),!0)}},{key:"loadDataFromPixels",value:function(t,e,r){if(this.deleted)throw"Trying to use a texture that has already been deleted.";var n=this.gl.RGBA,o=this.gl.RGBA,i=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.texImage2D(this.gl.TEXTURE_2D,0,n,t,e,0,o,i,r),this.ok=!0}},{key:"loadDataFromImage",value:function(t){var e=this;if(this.deleted)throw"Trying to use a texture that has already been deleted.";if(!t.complete||0===t.naturalWidth){console.error("Trying to load data from an image that hasn't yet loaded!");var r=new Uint8Array([255,255,255,255]);return this.loadDataFromPixels(1,1,r),void(t.onload=function(){t.complete&&0!==t.naturalWidth&&e.loadDataFromImage(t)})}var n=this.gl.RGBA,o=this.gl.RGBA,i=this.gl.UNSIGNED_BYTE;this.gl.bindTexture(this.gl.TEXTURE_2D,this.handle),this.gl.texImage2D(this.gl.TEXTURE_2D,0,n,o,i,t),ae(t.width)&&ae(t.height)&&this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.ok=!0}},{key:"delete",value:function(){this.gl.deleteTexture(this.handle),this.deleted=!0}}])&&oe(e.prototype,r),n&&oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Wo=function(t){function e(t,r,n,o){var u,a,c,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=i.call(this,t,r,n),a=Oe(u),l=void 0,(c=we(c="viewMode"))in a?Object.defineProperty(a,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[c]=l,u.viewMode=o,u}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e)}(e,t);var r,n,o,i=ge(e);return r=e,(n=[{key:"drawElements",value:function(t){this.gl.drawElements("wireframe"===this.viewMode?this.gl.LINE_LOOP:this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0)}},{key:"useTexture",value:function(t){return"regular"!==this.viewMode||pe(je(e.prototype),"useTexture",this).call(this,t)}}])&&ye(r.prototype,n),o&&ye(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,"gl",void 0),he(this,"programInfo",void 0),he(this,"logoDefs",void 0),he(this,"currentLogoIdx",void 0),he(this,"textureDatabase",{}),he(this,"lastTexture",void 0),he(this,"baseEntityColor",new Float32Array([1,1,1,1])),he(this,"textureMinFilter",void 0),he(this,"textureMagFilter",void 0),this.gl=e,this.programInfo=r,this.logoDefs=n,this.currentLogoIdx=n.defaultIdx,this.textureMinFilter=e.NEAREST,this.textureMagFilter=e.NEAREST}var e,r,n;return e=t,(r=[{key:"getGl",value:function(){return this.gl}},{key:"getProgramInfo",value:function(){return this.programInfo}},{key:"getBaseEntityColor",value:function(){return this.baseEntityColor}},{key:"setBaseEntityColor",value:function(t){this.baseEntityColor=t}},{key:"setUniformMatrix4",value:function(t,e){var r=this.programInfo.uniformLocations[t];r&&this.gl.uniformMatrix4fv(r,!1,e)}},{key:"setUniformFloat4",value:function(t,e){if(4!==e.length)throw new Error("data.length is not 4: ".concat(e.length));var r=this.programInfo.uniformLocations[t];r&&this.gl.uniform4fv(r,e)}},{key:"setUniformBool",value:function(t,e){var r=this.programInfo.uniformLocations[t];r&&this.gl.uniform1i(r,e?1:0)}},{key:"setTextureMinFilter",value:function(t){this.textureMinFilter=t}},{key:"setTextureMagFilter",value:function(t){this.textureMagFilter=t}},{key:"drawElements",value:function(t){this.gl.drawElements(this.gl.TRIANGLES,t,this.gl.UNSIGNED_SHORT,0)}},{key:"useTexture",value:function(t){var e;if(null===t)e=null;else{var r=this.logoDefs.textureKeyUsesLogo(t)?this.logoDefs.idxToTextureKey(this.currentLogoIdx,t):t,n=this.textureDatabase[r];void 0===n?(console.error("Missing texture for: ".concat(r)),e=null):e=n}return this.lastTexture===e?null!==e:(this.lastTexture=e,null!==e&&(e.use(this.programInfo.uniformLocations.sampler,this.textureMinFilter,this.textureMagFilter),!0))}},{key:"changeTextureMapping",value:function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var n=le(r[e],2),o=n[0],i=n[1],u=this.textureDatabase[o];u!==i&&(null!=u&&u.delete(),this.textureDatabase[o]=null===i?null:this.setupTexture(i))}}},{key:"setCurrentLogoIdx",value:function(t){this.currentLogoIdx=t}},{key:"setupTexture",value:function(t){var e=new Ho(this.gl);return"html"===t.type?e.loadDataFromImage(t.image):e.loadDataFromPixels(t.width,t.height,t.data),e}}])&&se(e.prototype,r),n&&se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()),zo=new Float32Array([1,1,0,1]),Go=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Te(this,"model",void 0),Te(this,"name",void 0),Te(this,"children",void 0),Te(this,"parent",void 0),Te(this,"modelViewMatrix",void 0),Te(this,"relativeModelViewMatrix",void 0),Te(this,"stateOptions",void 0),this.model=e,this.name=null!=r?r:null,this.children=[],this.parent=null,this.modelViewMatrix=fo.create(),this.relativeModelViewMatrix=fo.create(),this.stateOptions={visibile:!0,highlighted:!1}}var e,r,n;return e=t,(r=[{key:"addChild",value:function(t){if(null!==t.parent)throw new Error("Can't add a child that already has a parent.");this.children.push(t),t.parent=this}},{key:"render",value:function(t){this.recalculateMatrices(fo.create()),this.renderChild(t)}},{key:"recalculateMatrices",value:function(t){this.relativeModelViewMatrix=fo.mul(fo.create(),t,this.modelViewMatrix);var e,r=xe(this.children);try{for(r.s();!(e=r.n()).done;)e.value.recalculateMatrices(this.relativeModelViewMatrix)}catch(t){r.e(t)}finally{r.f()}}},{key:"renderChild",value:function(t){var e,r=null!==(e=this.color)&&void 0!==e?e:t.getBaseEntityColor();if(null!==this.model&&this.stateOptions.visibile)if(t.setUniformFloat4("entityColor",r),t.setUniformMatrix4("modelViewMatrix",this.relativeModelViewMatrix),Array.isArray(this.model)){var n,o=xe(this.model);try{for(o.s();!(n=o.n()).done;)this.renderModel(t,n.value)}catch(t){o.e(t)}finally{o.f()}}else this.renderModel(t,this.model);var i,u=xe(this.children);try{for(u.s();!(i=u.n()).done;)i.value.renderChild(t)}catch(t){u.e(t)}finally{u.f()}}},{key:"findChild",value:function(t,e){var r,n=xe(this.children);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.name===t)return o;if(e){var i=o.findChild(t,e);if(void 0!==i)return i}}}catch(t){n.e(t)}finally{n.f()}}},{key:"renderModel",value:function(t,e){if(e.usesNormals()){var r=fo.create();fo.invert(r,this.relativeModelViewMatrix),fo.transpose(r,r),t.setUniformMatrix4("normalMatrix",r)}e.draw(t)}},{key:"translate",value:function(t,e,r){fo.translate(this.modelViewMatrix,this.modelViewMatrix,[t,e,r])}},{key:"scale",value:function(t,e,r){fo.scale(this.modelViewMatrix,this.modelViewMatrix,[t,e,r])}},{key:"rotate",value:function(t,e,r,n){fo.rotate(this.modelViewMatrix,this.modelViewMatrix,t,[e?1:0,r?1:0,n?1:0])}},{key:"rotateX",value:function(t){fo.rotateX(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"rotateY",value:function(t){fo.rotateY(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"rotateZ",value:function(t){fo.rotateZ(this.modelViewMatrix,this.modelViewMatrix,t)}},{key:"resetTransformations",value:function(){this.modelViewMatrix=fo.create()}},{key:"color",get:function(){if(this.stateOptions.highlighted)return zo}},{key:"getStateOptions",value:function(){return this.stateOptions}},{key:"setStateOptions",value:function(t){this.stateOptions=t}}])&&Pe(e.prototype,r),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),qo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,"gl",void 0),Ae(this,"_handle",void 0),Ae(this,"deleted",!1),this.gl=e;var r=e.createBuffer();if(null===r)throw"Failed to create buffer!";this._handle=r}var e,r,n;return e=t,(r=[{key:"handle",get:function(){return this._handle}},{key:"bufferData",value:function(t){if(this.deleted)throw"Trying to use a buffer that has already been deleted.";this.doBufferData(t)}},{key:"use",value:function(){if(this.deleted)throw"Trying to use a buffer that has already been deleted.";this.doUse()}},{key:"delete",value:function(){if(this.deleted)throw"Trying to delete a buffer that has already been deleted.";this.gl.deleteBuffer(this._handle),this.deleted=!0}}])&&Re(e.prototype,r),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Zo=function(t){function e(){var t;Ue(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Xe(Be(t=i.call.apply(i,[this].concat(n))),"length",0),t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(e,t);var r,n,o,i=Fe(e);return r=e,o=[{key:"createBufferSourceFromIndices",value:function(t){return new Uint16Array(t)}}],(n=[{key:"getLength",value:function(){return this.length}},{key:"doBufferData",value:function(t){this.length=t.byteLength/2,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.handle)}}])&&De(r.prototype,n),o&&De(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(qo),$o=function(t){function e(t,r){var n,o,u,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=i.call(this,t),o=Ze(n),a=void 0,(u=Ke(u="attribLocation"))in o?Object.defineProperty(o,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[u]=a,n.attribLocation=r,n}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ze(t,e)}(e,t);var r,n,o,i=Ge(e);return r=e,n&&We(r.prototype,n),o&&We(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}(qo),Ko=function(t){function e(){return Qe(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&er(t,e)}(e,t);var r,n,o,i=rr(e);return r=e,o=[{key:"createBufferSourceFromPositions",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&tr(r.prototype,n),o&&tr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}($o),Jo=function(t){function e(){return ur(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cr(t,e)}(e,t);var r,n,o,i=lr(e);return r=e,o=[{key:"createBufferSourceFromPositions",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,3,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&ar(r.prototype,n),o&&ar(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}($o),Qo=function(t){function e(){return br(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yr(t,e)}(e,t);var r,n,o,i=pr(e);return r=e,o=[{key:"createBufferSourceFromCoords",value:function(t){return new Float32Array(t)}}],(n=[{key:"doBufferData",value:function(t){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)}},{key:"doUse",value:function(){var t=this.gl.FLOAT;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.handle),this.gl.vertexAttribPointer(this.attribLocation,2,t,!1,0,0),this.gl.enableVertexAttribArray(this.attribLocation)}}])&&dr(r.prototype,n),o&&dr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}($o),ti=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Or(this,"positionBuffer",void 0),Or(this,"indexBuffer",void 0),Or(this,"normalBuffer",void 0),Or(this,"textureCoordsBuffer",void 0),Or(this,"textureKey",null),this.positionBuffer=e,this.indexBuffer=r,this.normalBuffer=n,this.textureCoordsBuffer=o}var e,r,n;return e=t,(r=[{key:"setTextureKey",value:function(t){this.textureKey=t}},{key:"getTextureKey",value:function(){return this.textureKey}},{key:"usesNormals",value:function(){return void 0!==this.normalBuffer}},{key:"draw",value:function(t){t.useTexture(this.textureKey)&&(this.positionBuffer.use(),this.indexBuffer.use(),void 0!==this.normalBuffer&&this.normalBuffer.use(),void 0!==this.textureCoordsBuffer&&this.textureCoordsBuffer.use(),t.drawElements(this.indexBuffer.getLength()))}}])&&_r(e.prototype,r),n&&_r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ei={createModelFromIndexedVertices:xr,createModelFromSmartVertices:function(t,e,r){var n,o,i=[],u=[];t:for(var a=0;a<e.length;a++){for(var c=e[a],l=0;l<i.length;l++){if((n=c)[0]===(o=i[l])[0]&&n[1]===o[1]&&n[2]===o[2]){u.push(l);continue t}}i.push(c),u.push(i.length-1)}return xr(t,{vertices:i,indices:u,texCoords:null},r)},makeCube:function(t,e){var r=new Jo(t,e.attribLocations.vertexPosition);r.bufferData(Jo.createBufferSourceFromPositions([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]));var n=new Zo(t);n.bufferData(Zo.createBufferSourceFromIndices([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]));var o=new Ko(t,e.attribLocations.vertexNormal);o.bufferData(Ko.createBufferSourceFromPositions([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]));var i=new Qo(t,e.attribLocations.textureCoord);i.bufferData(Qo.createBufferSourceFromCoords([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]));var u=new ti(r,n,o,i);return new Go(u,"cube")}},ri=1e-6,ni=[1,1,1,1],oi=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.shaderSources=r,this.object3doTree=n,this.logoDefs=o,Dr(this,"programInfo",void 0),Dr(this,"ctx",void 0),Dr(this,"rootEntity",void 0),Dr(this,"objEntityMap",new Map),this.programInfo=this.initProgram(),this.ctx=this.initContext(),this.rootEntity=this.initRootEntity()}var e,r,n;return e=t,(r=[{key:"initContext",value:function(){return new Wo(this.gl,this.programInfo,this.logoDefs,this.getViewMode())}},{key:"initRootEntity",value:function(){var t,e=this.getViewMode(),r=new Go(null),n=Ar(this.object3doTree.rootNodes);try{for(n.s();!(t=n.n()).done;)Tr(this.ctx,t.value,r,this.objEntityMap,"wireframe"!==e,"wireframe"!==e,"regular"===e)}catch(t){n.e(t)}finally{n.f()}return r}},{key:"changeTextureMapping",value:function(){}},{key:"changeModelControls",value:function(){}},{key:"changeObjectStateMap",value:function(t){var e,r=Ar(t);try{for(r.s();!(e=r.n()).done;){var n=Rr(e.value,2),o=n[0],i=n[1],u=this.objEntityMap.get(o);if(void 0===u)throw new Error("Couldn't find an entity for the object: ".concat(o));u.setStateOptions({visibile:!i.hide,highlighted:i.highlight})}}catch(t){r.e(t)}finally{r.f()}}},{key:"inBeforeTheRootRender",value:function(){}},{key:"render",value:function(t,e){var r,n=t.drawingBufferWidth,o=t.drawingBufferHeight;t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);var i=45*Math.PI/180,u=n/o,a=fo.create();t.useProgram(this.programInfo.program),this.ctx.setUniformFloat4("baseColor",null!==(r=e.viewColor)&&void 0!==r?r:ni),fo.perspective(a,i,u,.1,100),this.ctx.setUniformMatrix4("projectionMatrix",a);var c=.02*e.translationX,l=.02*e.translationY*-1,f=-1*(8+.01*e.zoom);this.rootEntity.resetTransformations(),this.rootEntity.translate(c,l,f),this.rootEntity.rotateX(lo.toRadian(e.rotationX)),this.rootEntity.rotateY(lo.toRadian(e.rotationY)),this.rootEntity.rotateZ(lo.toRadian(e.rotationZ)),this.inBeforeTheRootRender(t,e),this.rootEntity.render(this.ctx)}},{key:"update",value:function(){}}])&&Ur(e.prototype,r),n&&Ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ii=function(t){function e(){return Nr(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yr(t,e)}(e,t);var r,n,o,i=Hr(e);return r=e,(n=[{key:"changeTextureMapping",value:function(t){this.ctx.changeTextureMapping(t)}},{key:"changeModelControls",value:function(t){this.ctx.setCurrentLogoIdx(t.logoColorIdx),Vr(zr(e.prototype),"changeModelControls",this).call(this,t)}},{key:"getViewMode",value:function(){return"regular"}},{key:"initProgram",value:function(){var t=this.shaderSources.regular,e=t.fsSource,r=Mo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Mo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Mo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition"),vertexNormal:this.gl.getAttribLocation(o,"aVertexNormal"),textureCoord:this.gl.getAttribLocation(o,"aTextureCoord")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor"),normalMatrix:this.gl.getUniformLocation(o,"uNormalMatrix"),sampler:this.gl.getUniformLocation(o,"uSampler"),useLights:this.gl.getUniformLocation(o,"useLights")}}}},{key:"inBeforeTheRootRender",value:function(t,e){this.ctx.setUniformBool("useLights",e.enableLightingRegular);var r="linear"===e.textureFilterMag?t.LINEAR:t.NEAREST;this.ctx.setTextureMinFilter("linear"===e.textureFilterMin?t.LINEAR:t.NEAREST),this.ctx.setTextureMagFilter(r)}}])&&Br(r.prototype,n),o&&Br(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(oi),ui=function(t){function e(){return qr(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$r(t,e)}(e,t);var r,n,o,i=Kr(e);return r=e,(n=[{key:"getViewMode",value:function(){return"solid_color"}},{key:"changeModelControls",value:function(t){this.ctx.setBaseEntityColor(t.solidColor)}},{key:"initProgram",value:function(){var t=this.shaderSources.solid,e=t.fsSource,r=Mo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Mo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Mo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition"),vertexNormal:this.gl.getAttribLocation(o,"aVertexNormal")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor"),normalMatrix:this.gl.getUniformLocation(o,"uNormalMatrix"),useLights:this.gl.getUniformLocation(o,"useLights")}}}},{key:"inBeforeTheRootRender",value:function(t,e){this.ctx.setUniformBool("useLights",e.enableLightingSolidColor)}}])&&Zr(r.prototype,n),o&&Zr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(oi),ai=function(t){function e(){return en(this,e),i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(e,t);var r,n,o,i=on(e);return r=e,(n=[{key:"getViewMode",value:function(){return"wireframe"}},{key:"changeModelControls",value:function(t){this.ctx.setBaseEntityColor(t.wireframeColor)}},{key:"initProgram",value:function(){var t=this.shaderSources.wireframe,e=t.fsSource,r=Mo.compileShader(this.gl,t.vsSource,this.gl.VERTEX_SHADER),n=Mo.compileShader(this.gl,e,this.gl.FRAGMENT_SHADER),o=Mo.createProgram(this.gl,r,n);return{program:o,attribLocations:{vertexPosition:this.gl.getAttribLocation(o,"aVertexPosition")},uniformLocations:{modelViewMatrix:this.gl.getUniformLocation(o,"uModelViewMatrix"),projectionMatrix:this.gl.getUniformLocation(o,"uProjectionMatrix"),baseColor:this.gl.getUniformLocation(o,"baseColor"),entityColor:this.gl.getUniformLocation(o,"entityColor")}}}}])&&rn(r.prototype,n),o&&rn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(oi),ci=function(t){function e(t,r,n,o){var u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),vn(yn(u=i.call(this,t)),"gl",void 0),vn(yn(u),"subRenderers",void 0);var a=t.canvas.getContext("webgl");if(null===a)throw"Couldn't get WebGL rendering context!";u.gl=a,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.enable(a.BLEND),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),u.subRenderers={regular:new ii(a,r,n,o),solid_color:new ui(a,r,n,o),wireframe:new ai(a,r,n,o)};for(var c=0,l=Object.values(u.subRenderers);c<l.length;c++){l[c].changeTextureMapping(t.textureMapping)}if(u.setupEvents(),"continuous"===t.mode){var f=0;requestAnimationFrame((function t(e){var r=(e*=.001)-f;f=e,u.update(r),u.render(r),requestAnimationFrame(t)}))}return u}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}(e,t);var r,n,o,i=bn(e);return r=e,(n=[{key:"onResized",value:function(){console.log("Resized! (".concat(this.width," x ").concat(this.height,")")),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),"static"===this.config.mode&&this.render()}},{key:"render",value:function(t){this.subRenderers[this.config.modelControls.viewMode].render(this.gl,this.config.modelControls,t)}},{key:"setTextureMapping",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeTextureMapping(t);fn(pn(e.prototype),"setTextureMapping",this).call(this,t)}},{key:"setModelControls",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeModelControls(t);fn(pn(e.prototype),"setModelControls",this).call(this,t)}},{key:"setObjectStateMap",value:function(t){for(var r=0,n=Object.values(this.subRenderers);r<n.length;r++)n[r].changeObjectStateMap(t);fn(pn(e.prototype),"setObjectStateMap",this).call(this,t)}},{key:"update",value:function(t){this.subRenderers[this.config.modelControls.viewMode].update(t)}}])&&ln(r.prototype,n),o&&ln(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(So),li=function(t){var e=t.canvasRef;console.log("Re-rendering CanvasWrapper");var r=Object(ho.h)("div",{class:"absolute inset-0"},Object(ho.h)("canvas",{ref:e}));return Object(ho.h)("div",{class:"w-full h-full max-w-full max-h-full relative"},r)},fi=function(t){var e=t.title,r=t.children,n=t.showByDefault,o=gn(Object(bo.e)(null!=n&&n),2),i=o[0],u=o[1],a=i?Object(ho.h)("div",null,r):null,c=Object(ho.h)("button",{onClick:function(){return u(!i)}},i?"[Hide]":"[Show]");return Object(ho.h)("div",null,Object(ho.h)("div",{class:"flex justify-between"},e,c),a)},si="NameWrapper__lk4ti",hi="LeftBorder__WZG0Y",bi="MiddleBorder__FcOEe",di="Root__0piuG",yi=function(t){var e=t.state,r=t.setState;return Object(ho.h)("div",{class:"flex pr-1"},Object(ho.h)("div",{class:"flex items-center px-1 cursor-pointer"+(e.highlight?" text-yellow-500":""),onClick:function(){return r(wn(wn({},e),{},{highlight:!e.highlight}))}},"H"),Object(ho.h)("div",{class:"flex items-center px-1 cursor-pointer"+(e.hide?"":" text-yellow-500"),onClick:function(){return r(wn(wn({},e),{},{hide:!e.hide}))}},"V"))},pi="1.50rem",vi="34px",mi="0.50rem",gi=function t(e){var r,n=e.current,o=e.nodes,i=e.onChangeNodeStack,u=e.nodeStack,a=e.objStateMap,c=e.setObjStateMap,l=Mn(Object(bo.e)(!0),2),f=l[0],s=l[1],h=o.length>0,b=n&&a.get(n);return Object(ho.h)("div",{class:di+" w-full overflow-hidden text-sm"},null!==n&&Object(ho.h)("div",{style:{height:vi},class:si+" flex py-1 bg-cyan-900 box-border"},Object(ho.h)("div",{onClick:h?function(){return s(!f)}:void 0,class:"flex items-center px-1 pl-2 ".concat(h?"cursor-pointer hover:text-yellow-400":"invisible")},f?"":""),Object(ho.h)("div",{class:"min-w-0 flex items-center grow hover:text-yellow-400 cursor-pointer",onClick:function(){return i(u)}},Object(ho.h)("div",{class:"truncate px-1",title:n.name},null!==(r=n.name)&&void 0!==r?r:Object(ho.h)("span",{class:"text-gray-300"},"<empty name>"))),b&&Object(ho.h)(yi,{state:b,setState:function(t){var e=wo.createUpdatedMap(a,n,t);c(e)}})),o.length>0&&Object(ho.h)("div",{class:f?"block":"hidden"},o.map((function(e,r){return Object(ho.h)("div",{key:r,class:"flex"},Object(ho.h)("div",{class:hi,style:{marginLeft:"calc(".concat(pi," / 2)"),height:r===o.length-1?"calc(".concat(vi," / 2 + ").concat(mi,")"):"auto"}}),Object(ho.h)("div",{class:bi+" self-start",style:{width:"calc(".concat(pi," / 2)"),height:"calc(".concat(vi," / 2 + ").concat(mi,")")}}),Object(ho.h)("div",{class:"grow max-w-full overflow-hidden",style:{paddingTop:mi}},Object(ho.h)(t,{current:e,nodes:e.children,onChangeNodeStack:i,nodeStack:[].concat(xn(u),[e]),objStateMap:a,setObjStateMap:c})))}))))},_i="px-1.5 py-1 align-top text-left",Oi="".concat(_i," whitespace-nowrap"),ji="".concat(_i," break-all"),wi=function(t){var e=t.primitives;return Object(ho.h)("table",{class:"w-full overflow-hidden"},Object(ho.h)("thead",null,Object(ho.h)("tr",null,Object(ho.h)("th",{class:Oi},"#"),Object(ho.h)("th",{class:Oi,title:"Vertex Indices"},"V.Indices"),Object(ho.h)("th",{class:Oi},"Texture"))),Object(ho.h)("tbody",null,e.map((function(t,e){return Object(ho.h)("tr",{key:e},Object(ho.h)("td",{class:ji},e),Object(ho.h)("td",{class:ji},"[",t.vertexIndices.join(", "),"]"),Object(ho.h)("td",{class:"".concat(ji)},t.textureName))}))))},Si=function(t){var e=t.object3doTree,r=t.objStateMap,n=t.setObjStateMap,o=En(Object(bo.e)([]),2),i=o[0],u=o[1],a=0===i.length?null:i[i.length-1],c=null===a?e.rootNodes:a.children,l=a&&r.get(a),f=Object(bo.c)((function(){var t=Object(ho.h)("div",{class:"mx-1 text-pink-600"},""),e="font-bold",r="cursor-pointer text-gray-400 hover:text-white";return Object(ho.h)("div",{class:"flex flex-wrap bg-gray-900 px-1 py-0.5"},Object(ho.h)("div",{class:null===a?e:r,onClick:function(){return u([])}},Object(ho.h)("span",{class:"italic"},"(ROOT)")),null!==a&&t,i.map((function(n,o){return Object(ho.h)(ho.Fragment,{key:o},Object(ho.h)("div",{onClick:function(){return u(i.slice(0,o+1))},class:o===i.length-1?e:r},n.name),o<i.length-1&&t)})))}),[i,a]),s=Object(bo.c)((function(){var t;return Object(ho.h)("div",{class:"flex py-1 bg-cyan-900 border border-yellow-500 text-sm"},Object(ho.h)("div",{class:"min-w-0 grow px-1 pl-2"},null===a?Object(ho.h)("span",{class:"italic"},"(ROOT)"):null!==(t=a.name)&&void 0!==t?t:Object(ho.h)("span",{class:"text-gray-300"},"<empty name>")),l&&Object(ho.h)(yi,{state:l,setState:function(t){var e=wo.createUpdatedMap(r,a,t);n(e)}}))}),[a,l,r,n]),h=Object(bo.c)((function(){return null===a||0===a.primitives.length?null:Object(ho.h)("div",{class:"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300"},Object(ho.h)(fi,{title:"Vertices"},Object(ho.h)("div",{class:"border-t border-gray-700 mt-1 pt-1 text-xs"},Object(ho.h)("span",{class:"break-all"},"[",a.vertices.map((function(t){return"[".concat(t.x,", ").concat(t.y,", ").concat(t.z,"]")})).join(", "),"]"))))}),[a]),b=Object(bo.c)((function(){return null===a||0===a.primitives.length?null:Object(ho.h)("div",{class:"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300"},Object(ho.h)(fi,{title:"Primitives"},Object(ho.h)("div",{class:"border-t border-gray-700 mt-1 pt-1 text-xs"},Object(ho.h)(wi,{primitives:a.primitives}))))}),[a]);return Object(ho.h)("div",{class:"flex flex-col h-full overflow-hidden"},Object(ho.h)("div",{className:"px-6"},Object(ho.h)("div",{class:"mb-4"},f),Object(ho.h)("div",{class:"mb-2 font-bold"},"Current:"),s,Object(ho.h)("div",{class:"pl-4"},h,b),c.length>0&&Object(ho.h)("div",{class:"mt-6 mb-2 font-bold flex justify-between"},Object(ho.h)("span",null,"Children:"),Object(ho.h)("span",null,"(",c.length,")"))),Object(ho.h)("div",{class:"grow overflow-auto px-6"},Object(ho.h)(gi,{current:null,nodes:c,onChangeNodeStack:u,nodeStack:i,objStateMap:r,setObjStateMap:n})))},xi=r("IomO"),Mi={loadDataUrl:function(t){var e=new FileReader,r=new Promise((function(r,n){e.onload=function(){var o=e.result;"string"==typeof o?r(o):n(new Error("Failed to read file: ".concat(t.name)))},e.onerror=function(){n(new Error("Failed to read file: ".concat(t.name)))}}));return e.readAsDataURL(t),r},createImageFromDataUrl:function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=function(){r(new Error("Failed to create image for dataUrl: ".concat(t)))},n.src=t}))}},Pi=function(t){var e=t.textures;return Object(ho.h)("div",{class:"flex flex-col space-y-2"},Object.entries(e).map((function(t,e){var r=Rn(t,2),n=r[0],o=r[1],i=null!==o;null!==o&&"html"===o.type&&(i=o.image.complete&&0!==o.image.naturalWidth);var u=i?"OK":"ERROR";return Object(ho.h)("div",{key:e,class:"flex items-center group"+(i?" text-green-600 hover:text-green-500":" text-red-600 hover:text-red-500")},Object(ho.h)("div",{class:"break-all"},n),Object(ho.h)("div",{class:"grow border-b border-dashed border-gray-600 group-hover:border-gray-500 mx-1\r text-transparent text-center",style:{minWidth:"24px",marginBottom:"6px"}},"-"),"html"===(null==o?void 0:o.type)?Object(ho.h)("a",{href:o.image.src,target:"_blank",rel:"noreferrer"},u):Object(ho.h)("div",null,u))})))},Ti=["image/png","image/gif","image/jpeg"],Ei=function(t){var e=t.regularTextures,r=t.customTextures,n=t.setCustomTextures,o=Fn(Object(bo.e)(!1),2),i=o[0],u=o[1],a=Object(bo.a)(function(){var t,e=(t=function*(t){var e,o={},i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Nn(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}(t);try{var u=function*(){var t=e.value;if(!Ti.includes(t.type))return"continue";yield Mi.loadDataUrl(t).then(Mi.createImageFromDataUrl).then((function(e){var r=t.name.replace(/^.*[\\\/]/,"").replace(/\.[^/.]+$/,"");o[r]={type:"html",image:e}})).catch(console.error)};for(i.s();!(e=i.n()).done;)yield*u()}catch(t){i.e(t)}finally{i.f()}n(Un(Un({},r),o))},function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){Ln(a,n,o,i,u,"next",t)}function u(t){Ln(a,n,o,i,u,"throw",t)}var a=t.apply(e,r);i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),[r,n]),c=Object(ho.h)("input",{type:"file",multiple:!0,accept:Ti.join(", "),disabled:i,onChange:function(t){if(i)t.currentTarget.value="";else{var e=t.currentTarget.files;null!==e&&(u(!0),a(e).finally((function(){u(!1)}))),t.currentTarget.value=""}}});return Object(ho.h)("div",{class:"flex flex-col max-h-full overflow-hidden"},Object(ho.h)("div",{class:"text-center font-bold mb-2"},"Custom Textures"),Object(ho.h)("div",{class:"grow overflow-auto px-6"},Object(ho.h)(Pi,{textures:r,setTextures:n})),Object(ho.h)("div",{className:"px-6 mt-2"},c),Object(ho.h)("div",{class:"mb-6"}),Object(ho.h)("div",{class:"text-center font-bold mb-2"},"TAK Textures"),Object(ho.h)("div",{class:"grow overflow-auto px-6"},Object(ho.h)(Pi,{textures:e})))},Ci=["options","objects","textures"],Ri=function(t){var e=t.engineName,r=t.shaders,n=t.object3doTree,o=t.regularTextures,i=t.defaultObjStateMap,u=t.logoDefs,a=t.userService,c=t.defaultUserSettings,l=t.defaultModelControls;console.log("Re-rendering App");var f=Wn(Object(bo.e)(!1),2),s=f[0],h=f[1],b=Wn(Object(bo.e)("options"),2),d=b[0],y=b[1],p=Wn(Object(bo.e)(l),2),v=p[0],m=p[1],g=Wn(Object(bo.e)(i),2),_=g[0],O=g[1],j=Wn(Object(bo.e)(),2),w=j[0],S=j[1],x=Wn(Object(bo.e)(c),2),M=x[0],P=x[1],T=Object(bo.a)((function(t){P(t),a.save(t)}),[a]),E=Wn(Object(bo.e)({}),2),C=E[0],R=E[1],A=Object(bo.d)();Object(bo.b)((function(){var t=A.current;if(t){t.width=t.clientWidth,t.height=t.clientHeight,console.log("Creating the Engine");var a={mode:"static",canvas:t,modelControls:l,listener:{onModelControlsChanged:m},textureMapping:Yn({},o),objStateMap:i},c="webgl"===e?new ci(a,r,n,u):new xo(a);return S(c),function(){c.destroy(),S(void 0),alert("Unmounting the engine. This should probably not be happening normally!!!")}}}),[A,r,i,e,n,o,u,l]);var k=Object(bo.c)((function(){return Object(ho.h)(li,{canvasRef:A})}),[A]),I=Object(bo.c)((function(){return Object(ho.h)("div",{class:"h-full flex flex-col"},Object(ho.h)("div",{class:"flex text-white border-b border-gray-700"},Object(ho.h)("div",{class:"grow px-4 py-4 text-center"},"Canvas"),Object(ho.h)("div",{class:"px-4 py-4 cursor-pointer hover:bg-blue-700 font-mono",onClick:function(){return h(!s)}},s?">[ ]<":"<[ ]>")),Object(ho.h)("div",{class:"grow p-6"},k))}),[k,s]),U=Object(bo.c)((function(){return Object(ho.h)(xi.a,{modelControls:v,setModelControls:function(t){m(t),t.textureFilterMin===v.textureFilterMin&&t.textureFilterMag===v.textureFilterMag||T(Yn(Yn({},M),{},{defaultTextureFilterMin:t.textureFilterMin,defaultTextureFilterMag:t.textureFilterMag})),w&&w.setModelControls(t)},userSettings:M,setUserSettings:T,logoDefs:u})}),[w,v,M,T,u]),D=Object(bo.c)((function(){return Object(ho.h)(Si,{object3doTree:n,objStateMap:_,setObjStateMap:function(t){O(t),w&&w.setObjectStateMap(t)}})}),[w,n,_]),L=Object(bo.c)((function(){return Object(ho.h)(Ei,{regularTextures:o,customTextures:C,setCustomTextures:function(t){w&&w.setTextureMapping(Yn(Yn({},o),t)),R(t)}})}),[w,C,o]),F=Object(bo.c)((function(){return Object(ho.h)("div",{class:"h-full flex flex-col"},Object(ho.h)("div",{class:"flex text-white border-b border-gray-700"},Ci.map((function(t,e,r){var n=t===d,o=n?"font-bold":"cursor-pointer text-gray-400 hover:text-white",i=e!==r.length-1?"border-r border-gray-700":"";return Object(ho.h)("div",{key:e,class:"grow basis-0 px-2 py-4 text-center ".concat(o," ").concat(i),onClick:function(){n||y(t)}},"options"===t?"Options":"objects"===t?"Objects":"Textures")}))),Object(ho.h)("div",{class:"grow max-h-full overflow-hidden py-6",style:{width:M.sidebarWidth,overflowX:"auto"}},"options"===d?U:"objects"===d?D:L))}),[d,U,M,D,L]),N=s?" border-gray-800":" border-gray-700",B="left"===M.sidebarPosition?"":" flex-row-reverse",V="left"===M.sidebarPosition?" border-r":" border-l";return Object(ho.h)("div",{class:"flex justify-center items-stretch h-screen overflow-hidden bg-gray-900"},Object(ho.h)("div",{class:"grow flex bg-gray-800 border ".concat(N," ").concat(B),style:{"max-width":s?"100%":"1600px"}},Object(ho.h)("div",{class:"hidden lg:block border-gray-700 ".concat(V)},F),Object(ho.h)("div",{class:"grow"},I)))},Ai=function(t){var e=t.dataSource,r=t.userService,n=t.defaultUserSettings,o=t.defaultModelControls,i=$n(Object(bo.e)(),2),u=i[0],a=i[1],c=$n(Object(bo.e)(),2),l=c[0],f=c[1],s=$n(Object(bo.e)(),2),h=s[0],b=s[1],d=$n(Object(bo.e)(),2),y=d[0],p=d[1],v=Oo;if(Object(bo.b)((function(){(function(){return to.apply(this,arguments)})().then(f)}),[]),Object(bo.b)((function(){(function(t){return eo.apply(this,arguments)})(e).then((function(t){return a(t),function(t,e,r,n){return ro.apply(this,arguments)}(t,v,"assets/custom/pngs/","png")})).then(b).catch(p)}),[e]),void 0!==y)return Object(ho.h)("div",{class:"min-w-screen min-h-screen flex flex-col justify-center items-center text-3xl\r bg-black"},Object(ho.h)("div",{class:"text-red-300"},"Error!"),Object(ho.h)("div",{class:"text-red-600"},"(TODO)"),Object(ho.h)("div",{class:"text-red-600"},JSON.stringify(y)));if(void 0===u||void 0===l||void 0===h){var m="Loading...";return u&&l&&(m="Loading textures..."),Object(ho.h)("div",{class:"min-w-screen min-h-screen flex justify-center items-center text-3xl bg-black"},Object(ho.h)("span",{class:"text-gray-400"},m))}return Object(ho.h)(Ri,{engineName:"webgl",object3doTree:u,shaders:l,regularTextures:h,defaultObjStateMap:Qn(u),logoDefs:v,userService:r,defaultUserSettings:n,defaultModelControls:o})};e.default=function(){var t=ao(Object(bo.e)(),2),e=t[0],r=t[1],n=ao(Object(bo.e)(yo),1)[0],o=ao(Object(bo.e)(),2),i=o[0],u=o[1],a=ao(Object(bo.e)(),2),c=a[0],l=a[1];return Object(bo.b)((function(){var t;try{var e;t=null!==(e=n.load())&&void 0!==e?e:vo}catch(e){console.error(e),n.save(t=vo)}u(t),l(io(io({},po),{},{textureFilterMin:t.defaultTextureFilterMin,textureFilterMag:t.defaultTextureFilterMag}))}),[n]),void 0===i||void 0===c?"Loading...":void 0===e?Object(ho.h)(go,{onSubmit:r}):Object(ho.h)(Ai,{dataSource:e,userService:n,defaultUserSettings:i,defaultModelControls:c})}},qiYd:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=r("hosL"),c=r("GssO");e.a=function(t){var e=t.modelControls,r=t.setModelControls;return Object(a.h)("div",{class:"space-y-4"},Object(a.h)("div",null,Object(a.h)("label",{class:"flex items-center"},Object(a.h)("input",{type:"checkbox",checked:e.enableLightingSolidColor,onChange:function(t){r(i(i({},e),{},{enableLightingSolidColor:t.currentTarget.checked}))}}),Object(a.h)("span",{class:"pl-1"},"Enable Lighting"))),Object(a.h)("div",null,Object(a.h)("div",{class:""},"Solid Color"),Object(a.h)(c.a,{color:e.solidColor,setColor:function(t){return r(i(i({},e),{},{solidColor:t}))}})))}},weEs:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PRIMITIVE_STRUCT_SIZE=e.PRIMITIVE_STRUCT=e.VERTEX_STRUCT_SIZE=e.VERTEX_STRUCT=e.OBJECT_STRUCT_SIZE=e.OBJECT_STRUCT=void 0,e.OBJECT_STRUCT=[["VersionSignature","U32"],["NumberOfVertexes","U32"],["NumberOfPrimitives","U32"],["UnknownFlag","U32"],["XFromParent","U32"],["YFromParent","U32"],["ZFromParent","U32"],["OffsetToObjectName","U32"],["Always_0","U32"],["OffsetToVertexArray","U32"],["OffsetToPrimitiveArray","U32"],["OffsetToSiblingObject","U32"],["OffsetToChildObject","U32"]],e.OBJECT_STRUCT_SIZE=4*e.OBJECT_STRUCT.length,e.VERTEX_STRUCT=[["x","U32"],["y","U32"],["z","U32"]],e.VERTEX_STRUCT_SIZE=4*e.VERTEX_STRUCT.length,e.PRIMITIVE_STRUCT=[["Unknown_0","U32"],["NumberOfVertexIndexes","U32"],["Always_0","U32"],["OffsetToVertexIndexArray","U32"],["OffsetToTextureName","U32"],["Unknown_1","U32"],["Unknown_2","U32"],["Unknown_3","U32"]],e.PRIMITIVE_STRUCT_SIZE=4*e.PRIMITIVE_STRUCT.length}});
//# sourceMappingURL=bundle.fa54e.js.map