{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./components/options/OptionsUser.tsx","webpack:///../node_modules/@takingdoms/lib-3do/dist/index.js","webpack:///../node_modules/@takingdoms/lib-3do/dist/src/parse-3do.js","webpack:///../node_modules/@takingdoms/lib-3do/dist/src/byte-utils.js","webpack:///./components/ui/ColorControl.tsx","webpack:///external \"preact\"","webpack:///./components/options/Options.tsx","webpack:///./lib/types/view.ts","webpack:///./components/options/OptionsControls.tsx","webpack:///../node_modules/preact/hooks/src/index.js","webpack:///./components/ui/SliderControl.tsx","webpack:///./components/options/view-modes/WireframeOptions.tsx","webpack:///../node_modules/@takingdoms/lib-3do/dist/src/object-3do.js","webpack:///./components/options/view-modes/RegularOptions.tsx","webpack:///./style/index.css?3992","webpack:///./lib/types/user-settings.ts","webpack:///./lib/services/user-service.ts","webpack:///./lib/types/model-controls.ts","webpack:///./components/ui/Spoiler.tsx","webpack:///./components/loader/FileChooser.tsx","webpack:///./lib/logo-colors.ts","webpack:///./lib/utils.ts","webpack:///./lib/engines/engine.ts","webpack:///./lib/engines/ui-debug-engine.ts","webpack:///./lib/engines/gl/webgl-helper.ts","webpack:///../node_modules/gl-matrix/esm/common.js","webpack:///../node_modules/gl-matrix/esm/mat4.js","webpack:///../node_modules/gl-matrix/esm/vec3.js","webpack:///../node_modules/gl-matrix/esm/index.js","webpack:///./lib/engines/gl/gl-texture.ts","webpack:///./lib/engines/gl/gl-context.ts","webpack:///./lib/engines/gl/gl-custom-context.ts","webpack:///./lib/engines/gl/gl-entity.ts","webpack:///./lib/engines/gl/buffer/gl-buffer.ts","webpack:///./lib/engines/gl/buffer/gl-index-buffer.ts","webpack:///./lib/engines/gl/buffer/gl-array-buffer.ts","webpack:///./lib/engines/gl/buffer/gl-normal-buffer.ts","webpack:///./lib/engines/gl/buffer/gl-position-buffer.ts","webpack:///./lib/engines/gl/buffer/gl-texture-coord-buffer.ts","webpack:///./lib/engines/gl/gl-model.ts","webpack:///./lib/engines/gl/gl-model-helpers.ts","webpack:///./lib/engines/gl/gl-from-3do.ts","webpack:///./lib/engines/webgl-sub-renderers/webgl-sub-renderer.ts","webpack:///./lib/engines/webgl-sub-renderers/regular-renderer.ts","webpack:///./lib/engines/webgl-sub-renderers/solid-color-renderer.ts","webpack:///./lib/engines/webgl-sub-renderers/wireframe-renderer.ts","webpack:///./lib/engines/webgl-engine.ts","webpack:///./components/canvas/CanvasWrapper.tsx","webpack:///./components/object-list/ObjectListTree.module.css?09d9","webpack:///./components/object-list/ObjectSideControls.tsx","webpack:///./components/object-list/ObjectListTree.tsx","webpack:///./components/object-list/PrimitivesTable.tsx","webpack:///./components/object-list/ObjectList.tsx","webpack:///./components/textures/TextureList.tsx","webpack:///./components/textures/TextureManager.tsx","webpack:///./components/Main.tsx","webpack:///./components/loader/Loader.tsx","webpack:///./components/App.tsx","webpack:///./index.ts","webpack:///./components/options/view-modes/SolidColorOptions.tsx","webpack:///./components/options/OptionsMisc.tsx","webpack:///./lib/io-utils.ts","webpack:///../node_modules/@takingdoms/lib-3do/dist/src/structs.js"],"names":["OptionsUser","userSettings","setUserSettings","sidebarPosition","ev","currentTarget","value","__createBinding","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__exportStar","exports","p","prototype","hasOwnProperty","call","require","__setModuleDefault","v","__importStar","mod","result","Parse3do","ByteUtils","structs_1","fromBuffer","data","rootNodes","parseObjects","offset","nextSibling","struct","makeStruct","OBJECT_STRUCT","name","parseName","vertices","parseVertices","primitives","parsePrimitives","children","object","xOffset","yOffset","zOffset","push","textDecoder","TextDecoder","NAME_LIMIT","size","i","nextByte","getUint8","slice","Uint8Array","buffer","decode","count","VERTEX_STRUCT_SIZE","VERTEX_STRUCT","x","y","z","PRIMITIVE_STRUCT_SIZE","PRIMITIVE_STRUCT","vertexIndices","nextVertexIndex","getUint16","textureName","debugPrintStruct","entries","field","hex","toString","toUpperCase","padStart","console","log","readInteger","ENDIANNESSES","INTEGER_TYPES","pos","type","endianness","getInt8","getInt16","getInt32","structDef","ColorControl","color","setColor","useState","isCustom","setIsCustom","currentOption","custom","useMemo","Math","floor","newColor","option","Options","modelControls","setModelControls","logoDefs","canvasRef","controls","user","viewModeOptions","viewMode","sub","preserveDrawingBuffer","VIEW_MODES","OptionsControls","zoom","rotationX","rotationY","rotationZ","translationX","translationY","find","vm","currentIndex","currentComponent","previousComponent","prevRaf","currentHook","afterPaintEffects","EMPTY","oldBeforeDiff","options","oldBeforeRender","oldAfterDiff","diffed","oldCommit","__c","oldBeforeUnmount","unmount","getHookState","index","__h","hooks","__H","__","length","__V","initialState","useReducer","invokeOrReturn","reducer","init","hookState","_reducer","currentValue","__N","nextValue","action","setState","_hasScuFromHooks","prevScu","shouldComponentUpdate","s","c","stateHooks","filter","every","this","shouldUpdate","forEach","hookItem","props","useEffect","callback","args","state","__s","argsChanged","_pendingArgs","useLayoutEffect","useRef","initialValue","current","useImperativeHandle","ref","createHandle","concat","factory","useCallback","useContext","context","provider","useDebugValue","formatter","useErrorBoundary","cb","errState","componentDidCatch","err","errorInfo","useId","root","__v","__m","mask","flushAfterPaintEffects","component","shift","invokeCleanup","invokeEffect","e","__e","vnode","requestAnimationFrame","afterNextFrame","commitQueue","some","hasErrored","HAS_RAF","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","hook","comp","cleanup","oldArgs","newArgs","arg","f","SliderControl","id","label","min","max","setValue","width","WireframeOptions","wireframeColor","RegularOptions","idxList","map","idx","idxToHtmlColor","logoColorIdx","textureFilterMin","textureFilterMag","enableLightingRegular","checked","LogoButton","htmlColor","isSelected","onSelect","borderColor","backgroundColor","DEFAULT_USER_SETTINGS","sidebarWidth","defaultTextureFilterMin","defaultTextureFilterMag","localStorageUserService","save","str","JSON","stringify","localStorage","setItem","load","getItem","obj","parse","Error","DEFAULT_MODEL_CONTROLS","viewColor","canvasBackground","canvasBackgroundSize","canvasBackgroundRepeat","enableLightingSolidColor","solidColor","Spoiler","title","showByDefault","show","setShow","content","showHide","SAMPLES","path","ISSUES_URL","submitButtonCss","anchorCss","FileChooser","onSubmit","defaultUserSettings","setDefaultUserSettings","controlsInfo","miscInfo","option1","preventDefault","formData","FormData","file","option2","sample","trim","advanced","maxWidth","minWidth","defaultLogoColorsDefinitions","defaultIdx","Array","from","_","idxCount","idxToName","htmlColors","textureKeyUsesLogo","textureKey","toLowerCase","includes","idxToTextureKey","idxToTextureFilename","fileName","compareObjectsShallow","obj1","obj2","entries1","entries2","keys","key1","value1","createUpdatedMap","key","newMap","Map","set","validateTextureName","test","Utils","Engine","config","listener","canvas","mode","mouseAction","mouseStartX","mouseStartY","controlStartX","controlStartY","didChange","onMouseDown","button","clientX","clientY","onMouseMove","deltaX","round","deltaY","newRotation","render","onMouseUp","onModelControlsChanged","onVisibilityChange","document","visibilityState","onWheel","addEventListener","window","cleanupEvents","removeEventListener","onResized","canvasParent","parentElement","newWidth","clientWidth","newHeight","clientHeight","didResize","height","resizeObserver","ResizeObserver","alert","observe","textureMapping","objStateMap","disconnect","UiDebugEngine","ctx","getContext","setupEvents","renderCount","startTime","performance","now","viewWidth","viewHeight","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","textLines","textSize","textPadding","showDebugRects","textAlign","textBaseline","font","largestLineWidth","measureText","reduce","l1","l2","totalWidth","totalHeight","lineHeight","strokeRect","fillText","endTime","delta","compileShader","gl","shaderSource","shaderType","shader","createShader","success","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","resizeCanvasToDisplaySize","displayWidth","displayHeight","needResize","WebGlHelper","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","random","setMatrixArrayType","degree","PI","toRadian","a","equals","b","abs","hypot","arguments","sqrt","out","glMatrix","clone","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b0","b1","b2","b3","translate","scale","rotate","rad","axis","len","t","b12","b20","b21","b22","sin","cos","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspectiveNO","fovy","aspect","tan","Infinity","perspective","perspectiveZO","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","orthoNO","lr","bt","ortho","orthoZO","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","target","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","mul","divide","ceil","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","d","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","r","zScale","transformMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag1","mag2","mag","cosine","acos","zero","div","dist","sqrDist","sqrLen","vec","stride","fn","l","GlTexture","handle","createTexture","sampler","minFilter","maxFilter","deleted","ok","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","uniform1i","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","level","internalFormat","RGBA","border","srcFormat","srcType","UNSIGNED_BYTE","texImage2D","image","complete","naturalWidth","error","fallbackPixel","loadDataFromPixels","onload","loadDataFromImage","isPowerOf2","generateMipmap","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","deleteTexture","GlContext","programInfo","currentLogoIdx","textureMinFilter","NEAREST","textureMagFilter","baseEntityColor","uniform","matrix","location","uniformLocations","uniformMatrix4fv","uniform4fv","bool","drawElements","TRIANGLES","UNSIGNED_SHORT","texture","actualTextureKey","fromDb","textureDatabase","lastTexture","use","existing","delete","setupTexture","loadableTexture","GlCustomContext","LINE_LOOP","HIGHLIGHT","GlEntity","model","parent","modelViewMatrix","mat4","relativeModelViewMatrix","stateOptions","visibile","highlighted","child","recalculateMatrices","renderChild","parentViewMatrix","nextColor","getBaseEntityColor","setUniformFloat4","setUniformMatrix4","isArray","subModel","renderModel","recursive","findChild","usesNormals","normalMatrix","draw","GlBuffer","createBuffer","_handle","doBufferData","doUse","deleteBuffer","GlIndexBuffer","byteLength","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","STATIC_DRAW","indices","Uint16Array","GlArrayBuffer","attribLocation","GlNormalBuffer","ARRAY_BUFFER","numComponents","FLOAT","vertexAttribPointer","enableVertexAttribArray","positions","GlPositionBuffer","GlTextureCoordBuffer","num","coords","GlModel","positionBuffer","indexBuffer","normalBuffer","textureCoordsBuffer","textureOk","useTexture","getLength","createModelFromIndexedVertices","computeNormals","positionData","flatMap","vertex","position","getGl","getProgramInfo","attribLocations","vertexPosition","createBufferSourceFromPositions","indicesData","createBufferSourceFromIndices","normals","normalList","vec3","indexA","indexB","indexC","posA","posB","posC","edgeAB","edgeAC","areaWeightedNormal","vertexNormal","texCoords","textureCoord","createBufferSourceFromCoords","createModelFromSmartVertices","uniqueData","uniqueDataIndices","outer","item","j","normItem","isVertexEqual","v1","v2","makeCube","rootModel","rootEntity","GlModelHelpers","SCALE","addGlEntityFrom3do","inputObjectEntityMap","triangulateQuads","useTextures","wrapper","modelParts","primitive","glModelFrom3do","setTextureKey","objectEntity","addChild","subChild","preOrderedVertices","nextVertex","BASE_CAMERA_OFFSET","ZOOM_MODIFIER","TRANSLATION_MODIFIER","DEFAULT_BASE_COLOR","WebglSubRenderer","shaderSources","object3doTree","initProgram","initContext","initRootEntity","getViewMode","object3do","objEntityMap","entity","setStateOptions","hide","highlight","drawingBufferWidth","drawingBufferHeight","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","fieldOfView","zNear","zFar","projectionMatrix","useProgram","resetTransformations","inBeforeTheRootRender","RegularRenderer","changeTextureMapping","setCurrentLogoIdx","regular","vsSource","fsSource","vsShader","VERTEX_SHADER","fsShader","FRAGMENT_SHADER","shaderProgram","getAttribLocation","getUniformLocation","baseColor","entityColor","useLights","setUniformBool","LINEAR","magFilter","setTextureMinFilter","setTextureMagFilter","SolidColorRenderer","setBaseEntityColor","solid","WireframeRenderer","wireframe","WebglEngine","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","subRenderers","solid_color","values","subRenderer","then","deltaTime","update","viewport","currentViewMode","currentSubRenderer","changeModelControls","changeObjectStateMap","CanvasWrapper","ObjectSideControls","INDENT","ROW_HEIGHT","SPACING_Y","ObjectListTree","nodes","onChangeNodeStack","nodeStack","setObjStateMap","showChildren","setShowChildren","hasChildren","objState","Styles","Root","NameWrapper","newObjState","subNode","LeftBorder","marginLeft","MiddleBorder","paddingTop","cellCss","thCss","tdCss","PrimitivesTable","join","ObjectList","setNodeStack","currentParent","currentChildren","currentObjState","pathing","sep","selCss","unselCss","node","currentParentInfo","currentParentPositions","currentParentPrimitives","TextureList","textures","setTextures","isOk","msg","marginBottom","src","validFormats","TextureManager","regularTextures","customTextures","setCustomTextures","isLoading","setIsLoading","loadFiles","files","newMapping","updateMapping","fileBasename","replace","IoUtils","loadDataUrl","createImageFromDataUrl","catch","fileInput","finally","CONTENT_WIDTH","SIDEBAR_TABS","Main","engineName","shaders","defaultObjStateMap","userService","defaultModelControls","expandContent","setExpandContent","sidebarTab","setSidebarTab","engine","setEngine","_setUserSettings","newUserSettings","engineListener","engineConfig","destroy","style","background","backgroundSize","backgroundRepeat","backgroundPosition","canvasWrapper","canvasPanel","optionsPanel","newModelControls","objectsPanel","newObjStateMap","setObjectStateMap","texturesPanel","newCustomTextures","setTextureMapping","sidebar","tab","arr","seletedCss","borderCss","overflowX","contentBorderCss","flexDirCss","sidebarBorderCss","Loader","dataSource","setResult","setShaders","setError","loadShaders","loadModel","res","loadTextures","message","defaultViewMode","allTexturesFailed","defaultLogoColorIdx","startsWith","createStateMap","next","rootChild","fetch","text","response","arrayBuffer","view","DataView","tree","basePath","fileExtension","textureNames","Set","loadNext","rootNode","Promise","all","resolve","reject","usesLogo","textureFilePath","Image","onerror","nextIdx","resolveInner","_rejectInner","logoTextureName","textureFileName","App","setDataSource","setDefaultModelControls","SolidColorOptions","OptionsMisc","enableSaveImageButton","getInitialBg","canvasBg","setCanvasBg","onChangeCanvasBg","customBgFile","dataUrl","imageUrl","selectBgSize","selectBgRepeat","saveCanvasImage","dataURL","toDataURL","downloadLink","createElement","timestamp","Date","getTime","href","download","body","appendChild","click","removeChild","saveImageButton","fileReader","FileReader","loadDataUrlPromise","readAsDataURL","OBJECT_STRUCT_SIZE"],"mappings":"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","file":"ssr-bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"https://takingdoms.github.io/3do-viewer-preact-with-textures/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"qVkA\");\n","import { FunctionComponent, h } from 'preact';\r\nimport { UserSettings } from \"../../lib/types/user-settings\";\r\n\r\nconst OptionsUser: FunctionComponent<{\r\n  userSettings: UserSettings;\r\n  setUserSettings: (s: UserSettings) => void;\r\n}> = ({\r\n  userSettings,\r\n  setUserSettings,\r\n}) => {\r\n  return (\r\n    <div class=\"space-y-4\">\r\n      <div class=\"flex flex-col items-stretch\">\r\n        <label for=\"sidebarPosition\">Sidebar Position</label>\r\n        <select\r\n          id=\"sidebarPosition\"\r\n          value={userSettings.sidebarPosition}\r\n          onChange={(ev) => {\r\n            const sidebarPosition = ev.currentTarget.value === 'left' ? 'left' : 'right';\r\n            setUserSettings({ ...userSettings, sidebarPosition });\r\n          }}\r\n        >\r\n          <option value=\"left\">Left</option>\r\n          <option value=\"right\">Right</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OptionsUser;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./src/byte-utils\"), exports);\r\n__exportStar(require(\"./src/object-3do\"), exports);\r\n__exportStar(require(\"./src/parse-3do\"), exports);\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Parse3do = void 0;\r\nconst ByteUtils = __importStar(require(\"./byte-utils\"));\r\nconst structs_1 = require(\"./structs\");\r\nfunction fromBuffer(data) {\r\n    return {\r\n        rootNodes: parseObjects(data, 0),\r\n    };\r\n}\r\nfunction parseObjects(data, offset) {\r\n    const result = [];\r\n    let nextSibling = offset;\r\n    do {\r\n        const struct = ByteUtils.makeStruct(data, nextSibling, structs_1.OBJECT_STRUCT);\r\n        // debugPrintStruct(struct);\r\n        const name = parseName(data, struct['OffsetToObjectName']);\r\n        const vertices = parseVertices(data, struct['OffsetToVertexArray'], struct['NumberOfVertexes']);\r\n        const primitives = parsePrimitives(data, struct['OffsetToPrimitiveArray'], struct['NumberOfPrimitives']);\r\n        const children = struct['OffsetToChildObject'] !== 0\r\n            ? parseObjects(data, struct['OffsetToChildObject'])\r\n            : [];\r\n        const object = {\r\n            name,\r\n            vertices,\r\n            primitives,\r\n            children,\r\n            xOffset: struct['XFromParent'],\r\n            yOffset: struct['YFromParent'],\r\n            zOffset: struct['ZFromParent'],\r\n        };\r\n        result.push(object);\r\n        nextSibling = struct['OffsetToSiblingObject'];\r\n    } while (nextSibling !== 0);\r\n    return result;\r\n}\r\nconst textDecoder = new TextDecoder('ascii');\r\nconst NAME_LIMIT = 256;\r\nfunction parseName(data, offset) {\r\n    let size = 0;\r\n    for (let i = 0; i < NAME_LIMIT; i++) {\r\n        size = i;\r\n        const nextByte = data.getUint8(offset + i);\r\n        if (nextByte === 0)\r\n            break;\r\n    }\r\n    /*if (size === 0) {\r\n      return '';\r\n    }*/\r\n    const slice = new Uint8Array(data.buffer, offset, size);\r\n    return textDecoder.decode(slice);\r\n}\r\nfunction parseVertices(data, offset, count) {\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const struct = ByteUtils.makeStruct(data, offset + (i * structs_1.VERTEX_STRUCT_SIZE), structs_1.VERTEX_STRUCT);\r\n        result.push({\r\n            x: struct.x,\r\n            y: struct.y,\r\n            z: struct.z,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction parsePrimitives(data, offset, count) {\r\n    const result = [];\r\n    for (let i = 0; i < count; i++) {\r\n        const struct = ByteUtils.makeStruct(data, offset + (i * structs_1.PRIMITIVE_STRUCT_SIZE), structs_1.PRIMITIVE_STRUCT);\r\n        const vertexIndices = [];\r\n        for (let v = 0; v < struct['NumberOfVertexIndexes']; v++) {\r\n            // v * 2 because each vertex index reads 2 bytes (aka Uint16)\r\n            const nextVertexIndex = data.getUint16(struct['OffsetToVertexIndexArray'] + (v * 2), true);\r\n            vertexIndices.push(nextVertexIndex);\r\n        }\r\n        const textureName = parseName(data, struct['OffsetToTextureName']);\r\n        result.push({\r\n            vertexIndices,\r\n            textureName,\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction debugPrintStruct(struct) {\r\n    for (const [field, value] of Object.entries(struct)) {\r\n        const hex = '0x' + value.toString(16).toUpperCase().padStart(4, '0');\r\n        console.log(`${field}: ${value} (${hex})`);\r\n    }\r\n    console.log();\r\n}\r\nexports.Parse3do = {\r\n    fromBuffer,\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.makeStruct = exports.readInteger = exports.ENDIANNESSES = exports.INTEGER_TYPES = void 0;\r\nexports.INTEGER_TYPES = ['U8', 'I8', 'U16', 'I16', 'U32', 'I32'];\r\nexports.ENDIANNESSES = ['LE', 'BE'];\r\nfunction readInteger(data, pos, type, endianness = 'LE') {\r\n    if (type === 'I8') {\r\n        return data.getInt8(pos);\r\n    }\r\n    if (type === 'U8') {\r\n        return data.getUint8(pos);\r\n    }\r\n    if (type === 'I16') {\r\n        return data.getInt16(pos, endianness === 'LE');\r\n    }\r\n    if (type === 'U16') {\r\n        return data.getUint16(pos, endianness === 'LE');\r\n    }\r\n    return data.getInt32(pos, endianness === 'LE');\r\n}\r\nexports.readInteger = readInteger;\r\nfunction makeStruct(data, offset, structDef, endianness = 'LE') {\r\n    let result = {};\r\n    for (const [name, type] of structDef) {\r\n        result[name] = readInteger(data, offset, type, endianness);\r\n        if (type === 'U8' || type === 'I8') {\r\n            offset += 1;\r\n        }\r\n        else if (type === 'U16' || type === 'I16') {\r\n            offset += 2;\r\n        }\r\n        else if (type === 'U32' || type === 'I32') {\r\n            offset += 4;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexports.makeStruct = makeStruct;\r\n","import { ReadonlyVec4 } from \"gl-matrix\";\r\nimport { FunctionComponent, h } from 'preact';\r\nimport { useEffect, useMemo, useState } from \"preact/hooks\";\r\nimport SliderControl from \"./SliderControl\";\r\n\r\nconst ColorControl: FunctionComponent<{\r\n  color: ReadonlyVec4;\r\n  setColor: (c: ReadonlyVec4) => void;\r\n}> = ({ color, setColor }) => {\r\n  const [isCustom, setIsCustom] = useState(false);\r\n\r\n  let currentOption = 'custom';\r\n\r\n  if (!isCustom) {\r\n    if (color[0] === 1 && color[1] === 1 && color[2] === 1 && color[3] === 1) {\r\n      currentOption = 'white';\r\n    }\r\n    else if (color[0] === 1 && color[1] === 0 && color[2] === 0 && color[3] === 1) {\r\n      currentOption = 'red';\r\n    }\r\n    else if (color[0] === 0 && color[1] === 1 && color[2] === 0 && color[3] === 1) {\r\n      currentOption = 'green';\r\n    }\r\n    else if (color[0] === 0 && color[1] === 0 && color[2] === 1 && color[3] === 1) {\r\n      currentOption = 'blue';\r\n    }\r\n  }\r\n\r\n  const custom = useMemo(() => {\r\n    if (!isCustom) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div class=\"space-y-2\">\r\n        <SliderControl\r\n          id=\"red\"\r\n          label=\"Red\"\r\n          min={0}\r\n          max={255}\r\n          value={Math.floor(color[0] * 255)}\r\n          setValue={(value) => {\r\n            const newColor = value / 255;\r\n            setColor([newColor, color[1], color[2], color[3]]);\r\n          }}\r\n        />\r\n        <SliderControl\r\n          id=\"green\"\r\n          label=\"Green\"\r\n          min={0}\r\n          max={255}\r\n          value={Math.floor(color[1] * 255)}\r\n          setValue={(value) => {\r\n            const newColor = value / 255;\r\n            setColor([color[0], newColor, color[2], color[3]]);\r\n          }}\r\n        />\r\n        <SliderControl\r\n          id=\"blue\"\r\n          label=\"Blue\"\r\n          min={0}\r\n          max={255}\r\n          value={Math.floor(color[2] * 255)}\r\n          setValue={(value) => {\r\n            const newColor = value / 255;\r\n            setColor([color[0], color[1], newColor, color[3]]);\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }, [isCustom, color, setColor]);\r\n\r\n  return (\r\n    <div class=\"\">\r\n      <select\r\n        value={currentOption}\r\n        onChange={(ev) => {\r\n          const option = ev.currentTarget.value;\r\n\r\n          if (option === 'custom') {\r\n            setIsCustom(true);\r\n            return;\r\n          }\r\n\r\n          setIsCustom(false);\r\n\r\n          const color: ReadonlyVec4\r\n            = option === 'red' ? [1, 0, 0, 1]\r\n            : option === 'green' ? [0, 1, 0, 1]\r\n            : option === 'blue' ? [0, 0, 1, 1]\r\n            : [1, 1, 1, 1,]; // white\r\n\r\n          setColor(color);\r\n        }}\r\n      >\r\n        <option value=\"custom\">(Custom)</option>\r\n        <option value=\"white\">White</option>\r\n        <option value=\"red\">Red</option>\r\n        <option value=\"green\">Green</option>\r\n        <option value=\"blue\">Blue</option>\r\n      </select>\r\n\r\n      {custom}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ColorControl;\r\n","module.exports = require(\"preact\");","import { FunctionComponent, h, Fragment } from 'preact';\r\nimport { MutableRef, useMemo } from \"preact/hooks\";\r\nimport { TakLogoColorsDefinitions } from \"../../lib/logo-colors\";\r\nimport { ModelControls } from \"../../lib/types/model-controls\";\r\nimport { UserSettings } from \"../../lib/types/user-settings\";\r\nimport OptionsControls from \"./OptionsControls\";\r\nimport OptionsMisc from \"./OptionsMisc\";\r\nimport OptionsUser from \"./OptionsUser\";\r\nimport RegularOptions from \"./view-modes/RegularOptions\";\r\nimport SolidColorOptions from \"./view-modes/SolidColorOptions\";\r\nimport WireframeOptions from \"./view-modes/WireframeOptions\";\r\n\r\ntype OptionsProps = {\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n  userSettings: UserSettings;\r\n  setUserSettings: (s: UserSettings) => void;\r\n  logoDefs: TakLogoColorsDefinitions;\r\n  canvasRef: MutableRef<HTMLCanvasElement | undefined>;\r\n};\r\n\r\nconst Options: FunctionComponent<OptionsProps> = ({\r\n  modelControls,\r\n  setModelControls,\r\n  userSettings,\r\n  setUserSettings,\r\n  logoDefs,\r\n  canvasRef,\r\n}) => {\r\n  const controls = useMemo(() => (\r\n    <OptionsControls modelControls={modelControls} setModelControls={setModelControls} />\r\n  ), [modelControls, setModelControls]);\r\n\r\n  const user = useMemo(() => (\r\n    <OptionsUser userSettings={userSettings} setUserSettings={setUserSettings} />\r\n  ), [userSettings, setUserSettings]);\r\n\r\n  const viewModeOptions = useMemo(() => {\r\n    const viewMode = modelControls.viewMode;\r\n\r\n    const sub\r\n      = viewMode === 'regular'\r\n        ? <RegularOptions modelControls={modelControls} setModelControls={setModelControls} logoDefs={logoDefs} />\r\n      : viewMode === 'solid_color'\r\n        ? <SolidColorOptions modelControls={modelControls} setModelControls={setModelControls} />\r\n      : viewMode === 'wireframe'\r\n        ? <WireframeOptions modelControls={modelControls} setModelControls={setModelControls} />\r\n      : null;\r\n\r\n    return (<>\r\n      <div class=\"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6\">View Mode Settings</div>\r\n      {sub}\r\n    </>);\r\n  }, [modelControls, setModelControls]);\r\n\r\n  return (\r\n    <div class=\"max-h-full overflow-auto px-6\">\r\n      <div class=\"text-center font-bold border-b border-gray-700 mb-2 pb-1\">Controls</div>\r\n      {controls}\r\n\r\n      {viewModeOptions}\r\n\r\n      <div class=\"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6\">User Settings</div>\r\n      {user}\r\n\r\n      <div class=\"text-center font-bold border-b border-gray-700 mb-2 pb-1 mt-6\">Misc.</div>\r\n      <OptionsMisc\r\n        modelControls={modelControls}\r\n        setModelControls={setModelControls}\r\n        canvasRef={canvasRef}\r\n        enableSaveImageButton={userSettings.preserveDrawingBuffer}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Options;\r\n","export type ViewMode = 'regular' | 'solid_color' | 'wireframe';\r\nexport type ViewColor = [number, number, number, number];\r\n\r\nexport const VIEW_MODES: ViewMode[] = ['regular', 'solid_color', 'wireframe'];\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { ModelControls } from \"../../lib/types/model-controls\";\r\nimport { VIEW_MODES } from \"../../lib/types/view\";\r\nimport SliderControl from \"../ui/SliderControl\";\r\n\r\nconst OptionsControls: FunctionComponent<{\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n}> = ({\r\n  modelControls,\r\n  setModelControls,\r\n}) => {\r\n  return (\r\n    <div class=\"space-y-4\">\r\n      <SliderControl\r\n        id=\"zoom\"\r\n        label=\"Zoom\"\r\n        max={1000}\r\n        value={modelControls.zoom}\r\n        setValue={(zoom) => setModelControls({ ...modelControls, zoom })}\r\n      />\r\n      <SliderControl\r\n        id=\"rotationX\"\r\n        label=\"Rotation X\"\r\n        min={-180}\r\n        max={180}\r\n        value={modelControls.rotationX}\r\n        setValue={(rotationX) =>  setModelControls({ ...modelControls, rotationX })}\r\n      />\r\n      <SliderControl\r\n        id=\"rotationY\"\r\n        label=\"Rotation Y\"\r\n        min={-180}\r\n        max={180}\r\n        value={modelControls.rotationY}\r\n        setValue={(rotationY) => setModelControls({ ...modelControls, rotationY })}\r\n      />\r\n      <SliderControl\r\n        id=\"rotationZ\"\r\n        label=\"Rotation Z\"\r\n        min={-180}\r\n        max={180}\r\n        value={modelControls.rotationZ}\r\n        setValue={(rotationZ) => setModelControls({ ...modelControls, rotationZ })}\r\n      />\r\n      <SliderControl\r\n        id=\"panX\"\r\n        label=\"Pan X\"\r\n        value={modelControls.translationX}\r\n        setValue={(translationX) => setModelControls({ ...modelControls, translationX })}\r\n      />\r\n      <SliderControl\r\n        id=\"panY\"\r\n        label=\"Pan Y\"\r\n        value={modelControls.translationY}\r\n        setValue={(translationY) => setModelControls({ ...modelControls, translationY })}\r\n      />\r\n      <div class=\"flex flex-col items-stretch\">\r\n        <label for=\"viewMode\">View Mode</label>\r\n        <select\r\n          id=\"viewMode\"\r\n          value={modelControls.viewMode}\r\n          onChange={(ev) => {\r\n            const viewMode = VIEW_MODES.find((vm) => vm === ev.currentTarget.value);\r\n            if (viewMode) {\r\n              setModelControls({ ...modelControls, viewMode });\r\n            }\r\n          }}\r\n        >\r\n          <option value=\"regular\">Regular</option>\r\n          <option value=\"solid_color\">Solid Color</option>\r\n          <option value=\"wireframe\">Wireframe</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OptionsControls;\r\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet EMPTY = [];\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingValue = EMPTY;\n\t\t\t\thookItem._nextValue = hookItem._pendingArgs = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\tif (hookItem._pendingValue !== EMPTY) {\n\t\t\t\thookItem._value = hookItem._pendingValue;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t\thookItem._pendingValue = EMPTY;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({ _pendingValue: EMPTY });\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} [initialState]\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tconst prevScu = currentComponent.shouldComponentUpdate;\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\tcurrentComponent.shouldComponentUpdate = function(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\tconst stateHooks = hookState._component.__hooks._list.filter(\n\t\t\t\t\tx => x._component\n\t\t\t\t);\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t};\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._pendingValue = factory();\n\t\tstate._pendingArgs = args;\n\t\tstate._factory = factory;\n\t\treturn state._pendingValue;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\n/**\n * @param {(error: any, errorInfo: import('preact').ErrorInfo) => void} cb\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\nexport function useId() {\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","import { FunctionComponent, h } from 'preact';\r\n\r\nconst SliderControl: FunctionComponent<{\r\n  id: string;\r\n  label: string;\r\n  min?: number;\r\n  max?: number;\r\n  value: number;\r\n  setValue: (value: number) => void;\r\n}> = ({ id, label, min, max, value, setValue }) => {\r\n  // console.log(`Re-rendering SliderControl (${id})`);\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <label for={id}>{label}</label>\r\n      </div>\r\n      <div class=\"flex items-center space-x-2\">\r\n        <input\r\n          type=\"number\"\r\n          style={{ width: '80px' }}\r\n          value={value}\r\n          onChange={(ev) => {\r\n            setValue(+ev.currentTarget.value);\r\n          }}\r\n        />\r\n        <input\r\n          class=\"grow\"\r\n          type=\"range\"\r\n          min={min}\r\n          max={max}\r\n          style={{ width: '120px' }}\r\n          value={value}\r\n          onChange={(ev) => {\r\n            setValue(+ev.currentTarget.value || 0);\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SliderControl;\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { ModelControls } from \"../../../lib/types/model-controls\";\r\nimport ColorControl from \"../../ui/ColorControl\";\r\n\r\nconst WireframeOptions: FunctionComponent<{\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n}> = ({\r\n  modelControls,\r\n  setModelControls,\r\n}) => {\r\n  return (\r\n    <div class=\"space-y-4\">\r\n      <div>\r\n        <div class=\"\">\r\n          Wireframe Color\r\n        </div>\r\n\r\n        <ColorControl\r\n          color={modelControls.wireframeColor}\r\n          setColor={(wireframeColor) => setModelControls({ ...modelControls, wireframeColor })}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WireframeOptions;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { TakLogoColorsDefinitions } from \"../../../lib/logo-colors\";\r\nimport { ModelControls } from \"../../../lib/types/model-controls\";\r\n\r\nconst RegularOptions: FunctionComponent<{\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n  logoDefs: TakLogoColorsDefinitions;\r\n}> = ({\r\n  modelControls,\r\n  setModelControls,\r\n  logoDefs,\r\n}) => {\r\n  return (\r\n    <div class=\"space-y-4\">\r\n\r\n      <div>\r\n        <div>Team Color</div>\r\n        <div\r\n          class=\"flex flex-wrap -m-1 p-1\"\r\n          // style={{ background: '#333', border: '1px solid #222' }}\r\n        >\r\n          {logoDefs.idxList.map((idx) => (\r\n            <div key={idx} class=\"m-1\">\r\n              <LogoButton\r\n                htmlColor={logoDefs.idxToHtmlColor(idx)}\r\n                isSelected={modelControls.logoColorIdx === idx}\r\n                onSelect={() => setModelControls({ ...modelControls, logoColorIdx: idx })}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"space-y-2\">\r\n        <div>\r\n          <div>Texture Filter (Min.)</div>\r\n          <select\r\n            value={modelControls.textureFilterMin}\r\n            onChange={(ev) => {\r\n              const value = ev.currentTarget.value as 'linear' | 'nearest';\r\n              setModelControls({ ...modelControls, textureFilterMin: value });\r\n            }}\r\n          >\r\n            <option value=\"nearest\">Nearest</option>\r\n            <option value=\"linear\">Linear</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <div>Texture Filter (Mag.)</div>\r\n          <select\r\n            value={modelControls.textureFilterMag}\r\n            onChange={(ev) => {\r\n              const value = ev.currentTarget.value as 'linear' | 'nearest';\r\n              setModelControls({ ...modelControls, textureFilterMag: value });\r\n            }}\r\n          >\r\n            <option value=\"nearest\">Nearest</option>\r\n            <option value=\"linear\">Linear</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label class=\"flex items-center\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={modelControls.enableLightingRegular}\r\n            onChange={(ev) => {\r\n              setModelControls({\r\n                ...modelControls,\r\n                enableLightingRegular: ev.currentTarget.checked,\r\n              });\r\n            }}\r\n          />\r\n          <span class=\"pl-1\">Enable Lighting</span>\r\n        </label>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nconst LogoButton: FunctionComponent<{\r\n  htmlColor: string;\r\n  isSelected: boolean;\r\n  onSelect: () => void;\r\n}> = ({ htmlColor, isSelected, onSelect }) => {\r\n  return (\r\n    <button\r\n      class=\"w-8 h-8 border border-2 p-1 rounded-full flex justify-center items-center\"\r\n      style={{ borderColor: htmlColor }}\r\n      onClick={() => {\r\n        if (!isSelected)\r\n          onSelect();\r\n      }}\r\n    >\r\n      <span\r\n        class=\"w-full h-full rounded-full leading-none\"\r\n        style={{ backgroundColor: isSelected ? htmlColor : '' }}\r\n      />\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default RegularOptions;\r\n","// extracted by mini-css-extract-plugin\nexport {};","export type UserSettings = {\r\n  sidebarPosition: 'left' | 'right';\r\n  sidebarWidth: number;\r\n  defaultTextureFilterMin: 'linear' | 'nearest';\r\n  defaultTextureFilterMag: 'linear' | 'nearest';\r\n  preserveDrawingBuffer: boolean;\r\n};\r\n\r\nexport const DEFAULT_USER_SETTINGS: UserSettings = {\r\n  sidebarPosition: 'right',\r\n  sidebarWidth: 300,\r\n  defaultTextureFilterMin: 'nearest',\r\n  defaultTextureFilterMag: 'nearest',\r\n  preserveDrawingBuffer: true,\r\n};\r\n","import { UserSettings, DEFAULT_USER_SETTINGS } from \"../types/user-settings\";\r\n\r\nexport type UserService = {\r\n  save: (userSettings: UserSettings) => void;\r\n  load: () => UserSettings | undefined;\r\n};\r\n\r\nexport const localStorageUserService: UserService = {\r\n  save: (userSettings: UserSettings) => {\r\n    const str = JSON.stringify(userSettings);\r\n    localStorage.setItem('user', str);\r\n  },\r\n  load: (): UserSettings | undefined => {\r\n    const str = localStorage.getItem('user');\r\n\r\n    if (str === null) {\r\n      return undefined;\r\n    }\r\n\r\n    const obj = JSON.parse(str);\r\n\r\n    if (typeof obj !== 'object') {\r\n      throw new Error(`User settings is not an object`);\r\n    }\r\n\r\n    const sidebarPosition = obj['sidebarPosition'];\r\n\r\n    if (sidebarPosition !== 'left' && sidebarPosition !== 'right') {\r\n      throw new Error(`Invalid sidebarPosition`);\r\n    }\r\n\r\n    const sidebarWidth = obj['sidebarWidth'];\r\n\r\n    if (typeof sidebarWidth !== 'number') {\r\n      throw new Error(`Invalid sidebarWidth`);\r\n    }\r\n\r\n    const defaultTextureFilterMin = obj['defaultTextureFilterMin'];\r\n\r\n    if (defaultTextureFilterMin !== 'nearest' && defaultTextureFilterMin !== 'linear') {\r\n      throw new Error(`Invalid defaultTextureFilterMin`);\r\n    }\r\n\r\n    const defaultTextureFilterMag = obj['defaultTextureFilterMag'];\r\n\r\n    if (defaultTextureFilterMag !== 'nearest' && defaultTextureFilterMag !== 'linear') {\r\n      throw new Error(`Invalid defaultTextureFilterMag`);\r\n    }\r\n\r\n    let preserveDrawingBuffer = obj['preserveDrawingBuffer'];\r\n\r\n    if (typeof preserveDrawingBuffer !== 'boolean') {\r\n      preserveDrawingBuffer = DEFAULT_USER_SETTINGS.preserveDrawingBuffer;\r\n    }\r\n\r\n    return {\r\n      sidebarPosition,\r\n      sidebarWidth,\r\n      defaultTextureFilterMin,\r\n      defaultTextureFilterMag,\r\n      preserveDrawingBuffer,\r\n    };\r\n  },\r\n};\r\n","import { ReadonlyVec4 } from \"gl-matrix\";\r\nimport { TakLogoIndex } from \"../logo-colors\";\r\nimport { ViewMode, ViewColor } from \"./view\";\r\n\r\nexport type ModelControls = {\r\n  rotationX: number;\r\n  rotationY: number;\r\n  rotationZ: number;\r\n  translationX: number;\r\n  translationY: number;\r\n  zoom: number;\r\n  viewMode: ViewMode;\r\n  viewColor?: ViewColor;\r\n  canvasBackground: string;\r\n  canvasBackgroundSize: 'auto' | 'cover' | 'contain';\r\n  canvasBackgroundRepeat: 'repeat' | 'no-repeat';\r\n\r\n  //:: Regular mode options\r\n  enableLightingRegular: boolean;\r\n  logoColorIdx: TakLogoIndex;\r\n  textureFilterMin: 'linear' | 'nearest';\r\n  textureFilterMag: 'linear' | 'nearest';\r\n\r\n  //:: Solid color mode options\r\n  enableLightingSolidColor: boolean;\r\n  solidColor: ReadonlyVec4;\r\n\r\n  //:: Wireframe mode options\r\n  wireframeColor: ReadonlyVec4;\r\n};\r\n\r\nexport const DEFAULT_MODEL_CONTROLS: ModelControls = {\r\n  rotationX: 50,\r\n  rotationY: -150,\r\n  rotationZ: 0,\r\n  translationX: 0,\r\n  translationY: 0,\r\n  zoom: 900,\r\n  viewMode: 'regular',\r\n  viewColor: [1.0, 1.0, 1.0, 1.0], // mixes multiplicatively\r\n  canvasBackground: 'black',\r\n  canvasBackgroundSize: 'auto',\r\n  canvasBackgroundRepeat: 'repeat',\r\n\r\n  enableLightingRegular: false,\r\n  logoColorIdx: 0,\r\n  textureFilterMin: 'linear',\r\n  textureFilterMag: 'linear',\r\n\r\n  enableLightingSolidColor: true,\r\n  solidColor: [1.0, 1.0, 1.0, 1.0],\r\n\r\n  wireframeColor: [1.0, 1.0, 1.0, 1.0],\r\n};\r\n","import { ComponentChildren, FunctionComponent, h } from 'preact';\r\nimport { useState } from \"preact/hooks\";\r\n\r\nconst Spoiler: FunctionComponent<{\r\n  title: string;\r\n  children: ComponentChildren;\r\n  showByDefault?: boolean;\r\n}> = ({ title, children, showByDefault }) => {\r\n  const [show, setShow] = useState(showByDefault ?? false);\r\n\r\n  const content = show ? (\r\n    <div>{children}</div>\r\n  ) : null;\r\n\r\n  const showHide = (\r\n    <button\r\n      onClick={() => setShow(!show)}\r\n    >\r\n      {show ? '[Hide]' : '[Show]'}\r\n    </button>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div class=\"flex justify-between space-x-2\">\r\n        <span>{title}</span>\r\n        {showHide}\r\n      </div>\r\n\r\n      {content}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spoiler;\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { useMemo, useState } from \"preact/hooks\";\r\nimport { UserService } from \"../../lib/services/user-service\";\r\nimport { UserSettings } from \"../../lib/types/user-settings\";\r\nimport Spoiler from \"../ui/Spoiler\";\r\n\r\nconst SAMPLES: Array<{ path: string; name: string }> = [\r\n  'aradrag.3do',\r\n  'tardrag.3do',\r\n  'verdrag.3do',\r\n  'zondrag.3do',\r\n  'creaeri.3do',\r\n  'aralode.3do',\r\n  'araking.3do',\r\n  'cresage.3do',\r\n  'tarnecro.3do',\r\n  'vermage.3do',\r\n  'zonhunt.3do',\r\n].map((name) => ({\r\n  name,\r\n  path: 'assets/3do-samples/' + name,\r\n}));\r\n\r\nconst ISSUES_URL = 'https://github.com/takingdoms/3do-viewer-preact/issues';\r\n\r\nconst submitButtonCss = 'border border-gray-700 px-2 py-0.5 hover:text-yellow-500 '\r\n  + 'focus:text-yellow-500';\r\n\r\nconst anchorCss = 'text-sky-500 hover:text-sky-700 focus:text-sky-700 hover:underline focus:underline';\r\n\r\nconst FileChooser: FunctionComponent<{\r\n  onSubmit: (dataSource: File | string) => void;\r\n  defaultUserSettings: UserSettings;\r\n  setDefaultUserSettings: (userSettings: UserSettings) => void;\r\n}> = ({ onSubmit, defaultUserSettings, setDefaultUserSettings }) => {\r\n  const controlsInfo = useMemo(() => (\r\n    <div class=\"text-sm\">\r\n      <h3 class=\"text-base font-bold\">Controls:</h3>\r\n      <p><u>Left mouse button:</u> hold and drag to rotate the model.</p>\r\n      <p><u>Middle mouse button:</u> hold and drag to move the model.</p>\r\n      <p><u>Mouse wheel:</u> zoom in or out.</p>\r\n    </div>\r\n  ), []);\r\n\r\n  const miscInfo = useMemo(() => (\r\n    <div class=\"text-sm\">\r\n      <h3 class=\"text-base font-bold\">About:</h3>\r\n      {/* <p>Nothing is uploaded anywhere, everything is done locally on the browser.</p> */}\r\n      <p>Submit suggestions or problems at: <a class={anchorCss} href={ISSUES_URL} target=\"_blank\">{ISSUES_URL}</a></p>\r\n      <p>...or message spagg#2962 on Discord.</p>\r\n    </div>\r\n  ), []);\r\n\r\n  const option1 = useMemo(() => (\r\n    <form\r\n      class=\"px-4 py-2 border border-4 border-gray-600 rounded h-full\"\r\n      onSubmit={(ev) => {\r\n        ev.preventDefault();\r\n        const formData = new FormData(ev.currentTarget);\r\n        const file = formData.get('file') as File;\r\n\r\n        if (file && file.size && file.name) {\r\n          onSubmit(file);\r\n        }\r\n      }}\r\n    >\r\n      <div class=\"text-3xl text-center mb-4\">Option 1</div>\r\n      <div class=\"text-xl text-gray-400 mb-2\">Load your own file</div>\r\n      <div className=\"flex items-stretch space-x-2\">\r\n        <input name=\"file\" type=\"file\" class=\"grow border border-gray-700\" />\r\n        <button class={submitButtonCss} type=\"submit\">GO</button>\r\n      </div>\r\n    </form>\r\n  ), [onSubmit]);\r\n\r\n  const option2 = useMemo(() => (\r\n    <form\r\n      class=\"px-4 py-2 border border-4 border-gray-600 rounded h-full\"\r\n      onSubmit={(ev) => {\r\n        ev.preventDefault();\r\n        const formData = new FormData(ev.currentTarget);\r\n        const sample = formData.get('sample')?.toString().trim();\r\n\r\n        if (sample) {\r\n          onSubmit(sample);\r\n        }\r\n      }}\r\n    >\r\n      <div class=\"text-3xl text-center mb-4\">Option 2</div>\r\n      <div class=\"text-xl text-gray-400 mb-2\">Pick a sample file</div>\r\n      <div className=\"flex items-stretch space-x-2\">\r\n        <select name=\"sample\" class=\"grow border border-gray-700\">\r\n          <option value=\"\"></option>\r\n          {SAMPLES.map((sample, idx) => (\r\n            <option value={sample.path} key={idx}>{sample.name}</option>\r\n          ))}\r\n        </select>\r\n        <button class={submitButtonCss} type=\"submit\">GO</button>\r\n      </div>\r\n    </form>\r\n  ), [onSubmit]);\r\n\r\n  const advanced = useMemo(() => (\r\n    <Spoiler title=\"Advanced\">\r\n      <div class=\"space-y-2\">\r\n        <div>\r\n          <label class=\"flex items-center\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={defaultUserSettings.preserveDrawingBuffer}\r\n              onChange={(ev) => {\r\n                setDefaultUserSettings({\r\n                  ...defaultUserSettings,\r\n                  preserveDrawingBuffer: ev.currentTarget.checked,\r\n                });\r\n              }}\r\n            />\r\n            <span class=\"font-bold ml-2\">WebGL / Preserve Drawing Buffer</span>\r\n          </label>\r\n          <span class=\"text-gray-300 text-sm\">\r\n            {`Disable this only if the model rendering is lagging (might not even change anything).\r\n            Disabling this will also disable the \"Save Model Image\" button and the ability to\r\n            \"Right click > Save Image As\"`}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </Spoiler>\r\n  ), [defaultUserSettings, setDefaultUserSettings]);\r\n\r\n  return (\r\n    <div class=\"min-w-screen min-h-screen bg-gray-800 flex flex-col justify-center items-center\">\r\n      <div\r\n        style={{ maxWidth: 800 }}\r\n        class=\"container flex justify-center items-stretch\r\n          flex-col-reverse md:flex-col\"\r\n      >\r\n        <div class=\"flex flex-wrap items-stretch\">\r\n          <div class=\"flex-1 p-4\" style={{ minWidth: 300 }}>{controlsInfo}</div>\r\n          <div class=\"flex-1 p-4\" style={{ minWidth: 300 }}>{miscInfo}</div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-wrap items-stretch\">\r\n          <div class=\"flex-1 p-4\">{option1}</div>\r\n          <div class=\"flex-1 p-4\">{option2}</div>\r\n        </div>\r\n\r\n        <div class=\"mt-8 self-center\">\r\n          {advanced}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FileChooser;\r\n","export interface LogoColorsDefinitions<TNumber extends number = number> {\r\n  defaultIdx: TNumber;\r\n  idxList: TNumber[];\r\n  idxCount: number;\r\n  idxToName: (idx: TNumber) => string;\r\n  idxToHtmlColor: (idx: TNumber) => string;\r\n  textureKeyUsesLogo: (textureKey: string) => boolean;\r\n  idxToTextureKey: (idx: TNumber, textureKey: string) => string;\r\n  idxToTextureFilename: (idx: TNumber, fileName: string) => string;\r\n}\r\n\r\n// TAK ---------------------------------------------------------------------------------------------\r\n\r\nexport type TakLogoIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\r\n\r\nexport type TakLogoColorsDefinitions = LogoColorsDefinitions<TakLogoIndex>;\r\n\r\nexport const defaultLogoColorsDefinitions: Readonly<TakLogoColorsDefinitions> = {\r\n  defaultIdx: 0,\r\n  idxList: Array.from({ length: 10 }).map((_, idx) => idx) as TakLogoIndex[],\r\n  idxCount: 10,\r\n  idxToName: (idx) => idx.toString(),\r\n  idxToHtmlColor: (idx) => htmlColors[idx],\r\n  textureKeyUsesLogo: (textureKey) => textureKey.toLowerCase().includes('logo'),\r\n  idxToTextureKey: (idx, textureKey) => {\r\n    if (idx === 0)\r\n      return textureKey;\r\n\r\n    return `${textureKey}/color:${idx}`;\r\n  },\r\n  idxToTextureFilename: (idx, fileName) => {\r\n    if (idx === 0) {\r\n      return fileName;\r\n    }\r\n\r\n    return `${fileName}.${idx}`;\r\n  },\r\n};\r\n\r\nconst htmlColors: Record<TakLogoIndex, string> = {\r\n  0: 'lightblue',\r\n  1: 'red',\r\n  2: 'white',\r\n  3: 'green',\r\n  4: 'darkblue',\r\n  5: 'purple',\r\n  6: 'yellow',\r\n  7: 'black',\r\n  8: 'orange',\r\n  9: 'brown',\r\n};\r\n","function compareObjectsShallow(obj1: any, obj2: any): boolean {\r\n  const entries1 = Object.entries(obj1);\r\n  const entries2 = Object.keys(obj2);\r\n\r\n  return entries1.length === entries2.length && entries1.every(([key1, value1]) => {\r\n    return key1 in obj2 && obj2[key1] === value1;\r\n  });\r\n}\r\n\r\nfunction createUpdatedMap<K, V>(map: Map<K, V>, key: K, value: V): Map<K, V> {\r\n  const newMap = new Map(map);\r\n  newMap.set(key, value);\r\n  return newMap;\r\n}\r\n\r\nfunction validateTextureName(textureName: string) {\r\n  // return /^[a-zA-Z0-9]+$/.test(textureName);\r\n  return /^(?!^(?:COM|PRN|AUX|NUL|CON|CLOCK\\$)(?:\\..+)?$)[^\\s\\\\/:\\*\\?\\\"<>\\|\\x00-\\x1F\\x7F]{1,254}$/\r\n    .test(textureName);\r\n}\r\n\r\nexport const Utils = {\r\n  compareObjectsShallow,\r\n  createUpdatedMap,\r\n  validateTextureName,\r\n};\r\n","import { ObjectStateMap } from \"../../components/Main\";\r\nimport { TextureMapping } from \"../texture-mapping\";\r\nimport { ModelControls } from \"../types/model-controls\";\r\n\r\nexport type EngineListener = {\r\n  onModelControlsChanged: (modelControls: ModelControls) => void;\r\n};\r\n\r\nexport type EngineConfig = {\r\n  mode:\r\n    | 'static'      // only re-renders when the camera or viewport is updated\r\n    | 'continuous'  // re-renders continuously (usually at 60 FPS)\r\n  ;\r\n  canvas: HTMLCanvasElement;\r\n  modelControls: ModelControls;\r\n  textureMapping: TextureMapping;\r\n  objStateMap: ObjectStateMap;\r\n  listener: EngineListener;\r\n  preserveDrawingBuffer: boolean; // needs to be true for \"Right Click > Save Image\" to work\r\n};\r\n\r\nexport abstract class Engine {\r\n  protected readonly config: EngineConfig;\r\n  private resizeObserver: ResizeObserver | undefined;\r\n  private cleanupEvents?: () => void;\r\n\r\n  constructor(config: EngineConfig) {\r\n    this.config = config;\r\n  }\r\n\r\n  protected setupEvents() {\r\n    const { listener, canvas, mode } = this.config;\r\n\r\n    //:: Handle mouse events\r\n\r\n    let mouseAction: 'rotate' | 'pan' | undefined;\r\n    let mouseStartX: number | undefined;\r\n    let mouseStartY: number | undefined;\r\n    let controlStartX: number | undefined;\r\n    let controlStartY: number | undefined;\r\n    let didChange = false;\r\n\r\n    const onMouseDown = (ev: MouseEvent) => {\r\n      if (mouseAction !== undefined) {\r\n        // stop if another button was already being processed\r\n        return;\r\n      }\r\n\r\n      if (ev.button === 0) {\r\n        mouseAction = 'rotate';\r\n      }\r\n      else if (ev.button === 1) {\r\n        mouseAction = 'pan';\r\n      }\r\n      else {\r\n        // only button 0 (left-click) and button 1 (middle-click) are used\r\n        return;\r\n      }\r\n\r\n      mouseStartX = ev.clientX;\r\n      mouseStartY = ev.clientY;\r\n\r\n      controlStartX = mouseAction === 'rotate'\r\n        ? this.config.modelControls.rotationX\r\n        : this.config.modelControls.translationX;\r\n\r\n      controlStartY = mouseAction === 'rotate'\r\n        ? this.config.modelControls.rotationY\r\n        : this.config.modelControls.translationY;\r\n    };\r\n\r\n    const onMouseMove = (ev: MouseEvent) => {\r\n      if (mouseStartX === undefined || mouseStartY === undefined || controlStartX === undefined ||\r\n          controlStartY === undefined)\r\n      {\r\n        return;\r\n      }\r\n\r\n      const deltaX = Math.round((ev.clientX - mouseStartX) * 0.75);\r\n      const deltaY = Math.round((ev.clientY - mouseStartY) * 0.75);\r\n\r\n      if (deltaX === 0 && deltaY === 0) {\r\n        return;\r\n      }\r\n\r\n      if (deltaX !== 0) {\r\n        if (mouseAction === 'rotate') {\r\n          let newRotation = controlStartY + deltaX;\r\n          while (newRotation > 180) {\r\n            newRotation -= 360;\r\n          }\r\n          while (newRotation < -180) {\r\n            newRotation += 360;\r\n          }\r\n\r\n          this.config.modelControls.rotationY = newRotation;\r\n        } else {\r\n          this.config.modelControls.translationX = controlStartX + deltaX;\r\n        }\r\n      }\r\n\r\n      if (deltaY !== 0) {\r\n        if (mouseAction === 'rotate') {\r\n          let newRotation = controlStartX + deltaY;\r\n          while (newRotation > 180) {\r\n            newRotation -= 360;\r\n          }\r\n          while (newRotation < -180) {\r\n            newRotation += 360;\r\n          }\r\n\r\n          this.config.modelControls.rotationX = newRotation;\r\n        } else {\r\n          this.config.modelControls.translationY = controlStartY + deltaY;\r\n        }\r\n      }\r\n\r\n      didChange = true;\r\n\r\n      if (mode === 'static') {\r\n        this.render();\r\n      }\r\n    };\r\n\r\n    const onMouseUp = () => {\r\n      mouseAction = mouseStartX = mouseStartY = controlStartX = controlStartY = undefined;\r\n\r\n      if (didChange) {\r\n        listener.onModelControlsChanged({ ...this.config.modelControls });\r\n        didChange = false;\r\n      }\r\n    };\r\n\r\n    const onVisibilityChange = () => {\r\n      if (document.visibilityState === 'hidden') {\r\n        onMouseUp();\r\n      }\r\n    };\r\n\r\n    const onWheel = (ev: WheelEvent) => {\r\n      if (ev.deltaY === 0)\r\n        return;\r\n\r\n      this.config.modelControls.zoom += ev.deltaY;\r\n\r\n      if (this.config.mode === 'static') {\r\n        this.render();\r\n      }\r\n\r\n      listener.onModelControlsChanged({ ...this.config.modelControls }); // TODO DEBOUNCE! (or not?)\r\n    };\r\n\r\n    canvas.addEventListener('mousedown', onMouseDown);\r\n    canvas.addEventListener('mousemove', onMouseMove);\r\n    window.addEventListener('mouseup', onMouseUp);\r\n    document.addEventListener('visibilitychange', onVisibilityChange);\r\n    canvas.addEventListener('wheel', onWheel);\r\n\r\n    this.cleanupEvents = () => {\r\n      canvas.removeEventListener('mousedown', onMouseDown);\r\n      canvas.removeEventListener('mousedown', onMouseMove);\r\n      window.removeEventListener('mouseup', onMouseUp);\r\n      document.removeEventListener('visibilitychange', onVisibilityChange);\r\n      canvas.removeEventListener('wheel', onWheel);\r\n    };\r\n\r\n    //:: Handle resizing\r\n\r\n    const onResized = () => {\r\n      const canvasParent = canvas.parentElement;\r\n\r\n      if (!canvasParent) {\r\n        throw new Error(`Canvas has no parent!!`);\r\n      }\r\n\r\n      const newWidth = canvasParent.clientWidth;\r\n      const newHeight = canvasParent.clientHeight;\r\n\r\n      let didResize = false;\r\n\r\n      if (canvas.width !== newWidth) {\r\n        canvas.width = newWidth;\r\n        didResize = true;\r\n      }\r\n\r\n      if (canvas.height !== newHeight) {\r\n        canvas.height = newHeight;\r\n        didResize = true;\r\n      }\r\n\r\n      if (didResize) {\r\n        this.onResized();\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    this.resizeObserver = new ResizeObserver(onResized);\r\n    const canvasParent = canvas.parentElement;\r\n\r\n    if (!canvasParent) {\r\n      window.alert('Failed to create canvas');\r\n      throw new Error(`Canvas has no parent!! (Can't listen to resizing...)`);\r\n    }\r\n\r\n    this.resizeObserver.observe(canvasParent);\r\n\r\n    // manually call onResized and also call this.onResized if onResized didn't already call it\r\n    if (!onResized()) {\r\n      this.onResized();\r\n    }\r\n  }\r\n\r\n  setModelControls(modelControls: ModelControls) {\r\n    this.config.modelControls = modelControls;\r\n\r\n    if (this.config.mode === 'static') {\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  setTextureMapping(textureMapping: TextureMapping) {\r\n    this.config.textureMapping = textureMapping;\r\n\r\n    if (this.config.mode === 'static') {\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  setObjectStateMap(objStateMap: ObjectStateMap) {\r\n    this.config.objStateMap = objStateMap;\r\n\r\n    if (this.config.mode === 'static') {\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n    }\r\n\r\n    this.cleanupEvents?.();\r\n    // TODO\r\n  }\r\n\r\n  protected abstract onResized(): void;\r\n\r\n  // delta is only used when this.config.mode === 'continuous'\r\n  protected abstract render(delta?: number): void;\r\n\r\n  protected get width() {\r\n    return this.config.canvas.width;\r\n  }\r\n\r\n  protected get height() {\r\n    return this.config.canvas.height;\r\n  }\r\n}\r\n","import { Engine, EngineConfig } from \"./engine\";\r\n\r\nexport class UiDebugEngine extends Engine {\r\n  private ctx: CanvasRenderingContext2D;\r\n  private renderCount = 0;\r\n\r\n  constructor(config: EngineConfig) {\r\n    super(config);\r\n\r\n    const ctx = config.canvas.getContext('2d');\r\n\r\n    if (ctx === null) {\r\n      window.alert('Canvas not supported in this browser.');\r\n      throw new Error(`Failed to create context`);\r\n    }\r\n\r\n    this.ctx = ctx;\r\n    this.setupEvents();\r\n  }\r\n\r\n  protected onResized(): void {\r\n    this.render();\r\n  }\r\n\r\n  protected render(): void {\r\n    const { modelControls } = this.config;\r\n\r\n    console.log(`Rendering next  (#${this.renderCount})`);\r\n    const startTime = performance.now();\r\n\r\n    const viewWidth = this.width;\r\n    const viewHeight = this.height;\r\n\r\n    // this.ctx.clearRect(0, 0, viewWidth, viewHeight); // redundant with the fillRect below \\/\r\n\r\n    this.ctx.fillStyle = `rgb(4, 16, 22)`;\r\n    this.ctx.fillRect(0, 0, viewWidth, viewHeight);\r\n\r\n    this.ctx.strokeStyle = `rgb(0, 0, 200)`;\r\n    this.ctx.lineWidth = 1;\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(0, viewHeight / 2);\r\n    this.ctx.lineTo(viewWidth, viewHeight / 2);\r\n    this.ctx.stroke();\r\n    this.ctx.moveTo(viewWidth / 2, 0);\r\n    this.ctx.lineTo(viewWidth / 2, viewHeight);\r\n    this.ctx.stroke();\r\n\r\n    const textLines = [\r\n      `renderCount: ${this.renderCount}`,\r\n      `viewWidth: ${viewWidth}`,\r\n      `viewHeight: ${viewHeight}`,\r\n      `zoom: ${modelControls.zoom}`,\r\n      `rotationX: ${modelControls.rotationX}`,\r\n      `rotationY: ${modelControls.rotationY}`,\r\n      `rotationZ: ${modelControls.rotationZ}`,\r\n      `translationX: ${modelControls.translationX}`,\r\n      `translationY: ${modelControls.translationY}`,\r\n      `viewMode: ${modelControls.viewMode}`,\r\n    ];\r\n\r\n    const textSize = 18;\r\n    const textPadding = 4;\r\n    const showDebugRects = false;\r\n\r\n    this.ctx.textAlign = 'left';\r\n    this.ctx.textBaseline = 'middle';\r\n    this.ctx.fillStyle = 'white';\r\n    this.ctx.font = `${textSize}px monospace`;\r\n\r\n    this.ctx.strokeStyle = 'red';\r\n\r\n    const largestLineWidth = this.ctx.measureText(\r\n      // \\/ only works when using a monospaced font!!!\r\n      textLines.reduce((l1, l2) => l1.length > l2.length ? l1 : l2)\r\n    ).width;\r\n\r\n    const totalWidth = largestLineWidth;\r\n    const totalHeight = (textSize * textLines.length) + (textLines.length * textPadding * 2);\r\n\r\n    for (let i = 0; i < textLines.length; i++) {\r\n      const lineHeight = textSize + textPadding * 2;\r\n\r\n      if (showDebugRects) {\r\n        this.ctx.strokeRect(\r\n          viewWidth / 2 - totalWidth / 2,\r\n          viewHeight / 2 - totalHeight / 2 + i * (lineHeight),\r\n          totalWidth,\r\n          textSize + textPadding * 2,\r\n        );\r\n      }\r\n\r\n      this.ctx.fillText(\r\n        textLines[i]!,\r\n        viewWidth / 2 - totalWidth / 2,\r\n        (viewHeight / 2) - (totalHeight / 2) + (i * lineHeight + lineHeight / 2),\r\n      );\r\n    }\r\n\r\n    const endTime = performance.now();\r\n    const delta = endTime - startTime;\r\n    console.log(`Finished rendering  in ${delta}ms`);\r\n    this.renderCount++;\r\n  }\r\n}\r\n","// Credits to most of these: https://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html\r\n\r\nfunction compileShader(gl: WebGLRenderingContext, shaderSource: string, shaderType: number) {\r\n  const shader = gl.createShader(shaderType);\r\n\r\n  if (shader === null) {\r\n    throw `Failed to create shader of type \"${shaderType}\"`;\r\n  }\r\n\r\n  gl.shaderSource(shader, shaderSource);\r\n  gl.compileShader(shader);\r\n\r\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n  if (!success) {\r\n    throw `Could not compile shader: ${gl.getShaderInfoLog(shader)}`;\r\n  }\r\n\r\n  return shader;\r\n}\r\n\r\nfunction createProgram(\r\n  gl: WebGLRenderingContext,\r\n  vertexShader: WebGLShader,\r\n  fragmentShader: WebGLShader,\r\n) {\r\n  const program = gl.createProgram();\r\n\r\n  if (program === null) {\r\n    throw `Failed to create program`;\r\n  }\r\n\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragmentShader);\r\n  gl.linkProgram(program);\r\n\r\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (!success) {\r\n    throw `Program failed to link: ${gl.getProgramInfoLog(program)}`;\r\n  }\r\n\r\n  return program;\r\n};\r\n\r\nfunction resizeCanvasToDisplaySize(canvas: HTMLCanvasElement) {\r\n  const displayWidth  = canvas.clientWidth;\r\n  const displayHeight = canvas.clientHeight;\r\n\r\n  const needResize = canvas.width !== displayWidth || canvas.height !== displayHeight;\r\n\r\n  if (needResize) {\r\n    canvas.width = displayWidth;\r\n    canvas.height = displayHeight;\r\n  }\r\n\r\n  return needResize;\r\n}\r\n\r\nexport const WebGlHelper = {\r\n  compileShader,\r\n  createProgram,\r\n  resizeCanvasToDisplaySize,\r\n};\r\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","export class GlTexture {\r\n  protected readonly gl: WebGLRenderingContext;\r\n  private handle: WebGLTexture;\r\n  private deleted = false;\r\n  private ok = false; // has a valid texture\r\n\r\n  constructor(gl: WebGLRenderingContext) {\r\n    this.gl = gl;\r\n    const handle = gl.createTexture();\r\n\r\n    if (handle === null) {\r\n      throw new Error(`Failed to create texture.`);\r\n    }\r\n\r\n    this.handle = handle;\r\n  }\r\n\r\n  use(sampler: WebGLUniformLocation, minFilter: number, maxFilter: number): boolean {\r\n    if (this.deleted) {\r\n      throw `Trying to use a texture that has already been deleted.`;\r\n    }\r\n\r\n    if (!this.ok) {\r\n      return false;\r\n    }\r\n\r\n    this.gl.activeTexture(this.gl.TEXTURE0);\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.handle);\r\n    this.gl.uniform1i(sampler, 0);\r\n\r\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, minFilter);\r\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, maxFilter);\r\n\r\n    return true;\r\n  }\r\n\r\n  loadDataFromPixels(width: number, height: number, data: Uint8Array) {\r\n    if (this.deleted) {\r\n      throw `Trying to use a texture that has already been deleted.`;\r\n    }\r\n\r\n    const level = 0;\r\n    const internalFormat = this.gl.RGBA;\r\n    const border = 0;\r\n    const srcFormat = this.gl.RGBA;\r\n    const srcType = this.gl.UNSIGNED_BYTE;\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.handle);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      level,\r\n      internalFormat,\r\n      width,\r\n      height,\r\n      border,\r\n      srcFormat,\r\n      srcType,\r\n      data,\r\n    );\r\n\r\n    this.ok = true;\r\n  }\r\n\r\n  loadDataFromImage(image: HTMLImageElement) {\r\n    if (this.deleted) {\r\n      throw `Trying to use a texture that has already been deleted.`;\r\n    }\r\n\r\n    if (!image.complete || image.naturalWidth === 0) {\r\n      console.error(`Trying to load data from an image that hasn't yet loaded!`);\r\n\r\n      const fallbackPixel = new Uint8Array([255, 255, 255, 255]); // opaque white\r\n      this.loadDataFromPixels(1, 1, fallbackPixel);\r\n\r\n      image.onload = () => {\r\n        if (image.complete && image.naturalWidth !== 0) {\r\n          this.loadDataFromImage(image);\r\n        }\r\n      };\r\n\r\n      return;\r\n    }\r\n\r\n    const level = 0;\r\n    const internalFormat = this.gl.RGBA;\r\n    const srcFormat = this.gl.RGBA;\r\n    const srcType = this.gl.UNSIGNED_BYTE;\r\n\r\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.handle);\r\n    this.gl.texImage2D(\r\n      this.gl.TEXTURE_2D,\r\n      level,\r\n      internalFormat,\r\n      srcFormat,\r\n      srcType,\r\n      image,\r\n    );\r\n\r\n    if (isPowerOf2(image.width) && isPowerOf2(image.height)) {\r\n      this.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n    }\r\n\r\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\r\n    this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\r\n\r\n    this.ok = true;\r\n  }\r\n\r\n  delete() {\r\n    this.gl.deleteTexture(this.handle);\r\n    this.deleted = true;\r\n  }\r\n}\r\n\r\nfunction isPowerOf2(value: number) {\r\n  return (value & (value - 1)) === 0;\r\n}\r\n","import { mat4, ReadonlyVec4 } from \"gl-matrix\";\r\nimport { TakLogoColorsDefinitions, TakLogoIndex } from \"../../logo-colors\";\r\nimport { LoadableTexture, TextureMapping } from \"../../texture-mapping\";\r\nimport { GlTexture } from \"./gl-texture\";\r\nimport { ProgramInfo } from \"./program-info\";\r\n\r\nexport class GlContext {\r\n  protected gl: WebGLRenderingContext;\r\n  protected programInfo: ProgramInfo<any, any>;\r\n  private logoDefs: TakLogoColorsDefinitions;\r\n\r\n  private currentLogoIdx: TakLogoIndex;\r\n  private textureDatabase: Record<string, GlTexture | null> = {};\r\n  private lastTexture?: GlTexture | null; // undefined = not initialized; null = no texture\r\n\r\n  private baseEntityColor: ReadonlyVec4 = new Float32Array([1.0, 1.0, 1.0, 1.0]); // WHITE\r\n\r\n  private textureMinFilter: number;\r\n  private textureMagFilter: number;\r\n\r\n  constructor(\r\n    gl: WebGLRenderingContext,\r\n    programInfo: ProgramInfo<any, any>,\r\n    logoDefs: TakLogoColorsDefinitions,\r\n  ) {\r\n    this.gl = gl;\r\n    this.programInfo = programInfo;\r\n    this.logoDefs = logoDefs;\r\n\r\n    this.currentLogoIdx = logoDefs.defaultIdx;\r\n\r\n    this.textureMinFilter = gl.NEAREST;\r\n    this.textureMagFilter = gl.NEAREST;\r\n  }\r\n\r\n  /// Warning: Use this only when REALLY needed\r\n  getGl() {\r\n    return this.gl;\r\n  }\r\n\r\n  getProgramInfo(): Readonly<ProgramInfo<any, any>> {\r\n    return this.programInfo;\r\n  }\r\n\r\n  getBaseEntityColor(): ReadonlyVec4 {\r\n    return this.baseEntityColor;\r\n  }\r\n\r\n  setBaseEntityColor(color: ReadonlyVec4) {\r\n    this.baseEntityColor = color;\r\n  }\r\n\r\n  setUniformMatrix4(uniform: string, matrix: mat4) {\r\n    const location = this.programInfo.uniformLocations[uniform];\r\n\r\n    if (location) {\r\n      this.gl.uniformMatrix4fv(location, false, matrix);\r\n    }\r\n  }\r\n\r\n  setUniformFloat4(uniform: string, data: Readonly<Float32List>) {\r\n    if (data.length !== 4) {\r\n      throw new Error(`data.length is not 4: ${data.length}`);\r\n    }\r\n\r\n    const location = this.programInfo.uniformLocations[uniform];\r\n\r\n    if (location) {\r\n      this.gl.uniform4fv(location, data);\r\n    }\r\n  }\r\n\r\n  setUniformBool(uniform: string, bool: boolean) {\r\n    const location = this.programInfo.uniformLocations[uniform];\r\n\r\n    if (location) {\r\n      this.gl.uniform1i(location, bool ? 1 : 0);\r\n    }\r\n  }\r\n\r\n  setTextureMinFilter(filter: number) {\r\n    this.textureMinFilter = filter;\r\n  }\r\n\r\n  setTextureMagFilter(filter: number) {\r\n    this.textureMagFilter = filter;\r\n  }\r\n\r\n  drawElements(length: number) {\r\n    this.gl.drawElements(this.gl.TRIANGLES, length, this.gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  useTexture(textureKey: string | null): boolean {\r\n    let texture: GlTexture | null;\r\n\r\n    if (textureKey === null) {\r\n      texture = null;\r\n    }\r\n    else {\r\n      const actualTextureKey = this.logoDefs.textureKeyUsesLogo(textureKey)\r\n        ? this.logoDefs.idxToTextureKey(this.currentLogoIdx, textureKey)\r\n        : textureKey;\r\n\r\n      const fromDb = this.textureDatabase[actualTextureKey];\r\n\r\n      if (fromDb === undefined) {\r\n        console.error(`Missing texture for: ${actualTextureKey}`);\r\n        texture = null;\r\n      }\r\n      else {\r\n        texture = fromDb;\r\n      }\r\n    }\r\n\r\n    if (this.lastTexture === texture) {\r\n      // already using this texture\r\n      return texture !== null;\r\n    }\r\n\r\n    this.lastTexture = texture;\r\n\r\n    if (texture === null) {\r\n      // TODO unbind texture? or use fallback (all white) texture maybe?\r\n      return false;\r\n    }\r\n\r\n    texture.use(this.programInfo.uniformLocations['sampler']!, this.textureMinFilter, this.textureMagFilter);\r\n    return true;\r\n  }\r\n\r\n  changeTextureMapping(textureMapping: Readonly<TextureMapping>) {\r\n    for (const [key, value] of Object.entries(textureMapping)) {\r\n      const existing = this.textureDatabase[key];\r\n      const didChange = existing !== value;\r\n\r\n      if (!didChange) {\r\n        continue;\r\n      }\r\n\r\n      if (existing !== undefined && existing !== null) {\r\n        existing.delete();\r\n      }\r\n\r\n      this.textureDatabase[key] = value === null\r\n        ? null\r\n        : this.setupTexture(value);\r\n    }\r\n  }\r\n\r\n  setCurrentLogoIdx(idx: TakLogoIndex) {\r\n    this.currentLogoIdx = idx;\r\n  }\r\n\r\n  private setupTexture(loadableTexture: LoadableTexture): GlTexture {\r\n    const texture = new GlTexture(this.gl);\r\n\r\n    if (loadableTexture.type === 'html') {\r\n      texture.loadDataFromImage(loadableTexture.image);\r\n    }\r\n    else {\r\n      const { width, height, data } = loadableTexture;\r\n      texture.loadDataFromPixels(width, height, data);\r\n    }\r\n\r\n    return texture;\r\n  }\r\n}\r\n","import { GlContext } from \"./gl-context\";\r\nimport { ProgramInfo } from \"./program-info\";\r\nimport { TakLogoColorsDefinitions } from \"../../logo-colors\";\r\nimport { ViewMode } from \"../../types/view\";\r\n\r\nexport class GlCustomContext extends GlContext {\r\n  private viewMode: ViewMode;\r\n\r\n  constructor(\r\n    gl: WebGLRenderingContext,\r\n    programInfo: ProgramInfo<any, any>,\r\n    logoDefs: TakLogoColorsDefinitions,\r\n    viewMode: ViewMode,\r\n  ) {\r\n    super(gl, programInfo, logoDefs);\r\n    this.viewMode = viewMode;\r\n  }\r\n\r\n  override drawElements(length: number): void {\r\n    if (this.viewMode === 'wireframe') {\r\n      this.gl.drawElements(this.gl.LINE_LOOP, length, this.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    else {\r\n      this.gl.drawElements(this.gl.TRIANGLES, length, this.gl.UNSIGNED_SHORT, 0);\r\n    }\r\n  }\r\n\r\n  override useTexture(textureKey: string | null): boolean {\r\n    if (this.viewMode === 'regular')\r\n      return super.useTexture(textureKey);\r\n\r\n    return true;\r\n  }\r\n}\r\n","import { mat4, ReadonlyVec4 } from \"gl-matrix\";\r\nimport { GlContext } from \"./gl-context\";\r\nimport { GlModel } from \"./gl-model\";\r\nimport { GlTexture } from \"./gl-texture\";\r\nimport { Vector3 } from \"./types\";\r\n\r\nconst HIGHLIGHT = new Float32Array([1.0, 1.0, 0.0, 1.0]); // yellow\r\n\r\ntype GlEntityStateOptions = Readonly<{\r\n  visibile: boolean;\r\n  highlighted: boolean;\r\n  // rotate... translate... etc...\r\n}>;\r\n\r\nexport class GlEntity {\r\n  protected model: GlModel | GlModel[] | null;\r\n  protected name: string | null;\r\n  protected children: GlEntity[];\r\n  protected parent: GlEntity | null;\r\n\r\n  protected modelViewMatrix: mat4; // this is what receives transformation operations\r\n  protected relativeModelViewMatrix: mat4; // this inherits transformations from the parent tree\r\n\r\n  protected stateOptions: GlEntityStateOptions;\r\n\r\n  constructor(model: GlModel | GlModel[] | null, name?: string) {\r\n    this.model = model;\r\n    this.name = name ?? null;\r\n\r\n    this.children = [];\r\n    this.parent = null;\r\n    this.modelViewMatrix = mat4.create();\r\n    this.relativeModelViewMatrix = mat4.create();\r\n\r\n    this.stateOptions = {\r\n      visibile: true,\r\n      highlighted: false,\r\n    };\r\n  }\r\n\r\n  addChild(child: GlEntity) {\r\n    if (child.parent !== null) {\r\n      throw new Error(`Can't add a child that already has a parent.`);\r\n    }\r\n\r\n    this.children.push(child);\r\n    child.parent = this;\r\n  }\r\n\r\n  render(ctx: GlContext) {\r\n    // TODO go back to passing the parentViewMatrix during the renderChild function!\r\n    this.recalculateMatrices(mat4.create());\r\n    this.renderChild(ctx);\r\n  }\r\n\r\n  protected recalculateMatrices(parentViewMatrix: mat4) {\r\n    this.relativeModelViewMatrix = mat4.mul(mat4.create(), parentViewMatrix, this.modelViewMatrix);\r\n\r\n    for (const child of this.children) {\r\n      child.recalculateMatrices(this.relativeModelViewMatrix);\r\n    }\r\n  }\r\n\r\n  protected renderChild(ctx: GlContext) {\r\n    const nextColor = this.color ?? ctx.getBaseEntityColor();\r\n\r\n    if (this.model !== null && this.stateOptions.visibile) {\r\n      ctx.setUniformFloat4('entityColor', nextColor);\r\n      ctx.setUniformMatrix4('modelViewMatrix', this.relativeModelViewMatrix);\r\n\r\n      if (Array.isArray(this.model)) {\r\n        for (const subModel of this.model) {\r\n          this.renderModel(ctx, subModel);\r\n        }\r\n      }\r\n      else {\r\n        this.renderModel(ctx, this.model);\r\n      }\r\n    }\r\n\r\n    for (const child of this.children) {\r\n      child.renderChild(ctx);\r\n    }\r\n  }\r\n\r\n  findChild(name: string, recursive: boolean): GlEntity | undefined {\r\n    for (const child of this.children) {\r\n      if (child.name === name) {\r\n        return child;\r\n      }\r\n\r\n      if (recursive) {\r\n        const result = child.findChild(name, recursive);\r\n        if (result !== undefined) {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  renderModel(ctx: GlContext, model: GlModel) {\r\n    if (model.usesNormals()) {\r\n      const normalMatrix = mat4.create();\r\n      mat4.invert(normalMatrix, this.relativeModelViewMatrix);\r\n      mat4.transpose(normalMatrix, normalMatrix);\r\n      ctx.setUniformMatrix4('normalMatrix', normalMatrix);\r\n    }\r\n\r\n    model.draw(ctx);\r\n  }\r\n\r\n  translate(x: number, y: number, z: number) {\r\n    mat4.translate(this.modelViewMatrix, this.modelViewMatrix, [x, y, z]);\r\n  }\r\n\r\n  scale(x: number, y: number, z: number) {\r\n    mat4.scale(this.modelViewMatrix, this.modelViewMatrix, [x, y, z]);\r\n  }\r\n\r\n  rotate(rad: number, x: boolean, y: boolean, z: boolean) {\r\n    const axis: Vector3 = [x ? 1 : 0, y ? 1 : 0, z ? 1: 0];\r\n    mat4.rotate(this.modelViewMatrix, this.modelViewMatrix, rad, axis);\r\n  }\r\n\r\n  rotateX(rad: number) {\r\n    mat4.rotateX(this.modelViewMatrix, this.modelViewMatrix, rad);\r\n  }\r\n\r\n  rotateY(rad: number) {\r\n    mat4.rotateY(this.modelViewMatrix, this.modelViewMatrix, rad);\r\n  }\r\n\r\n  rotateZ(rad: number) {\r\n    mat4.rotateZ(this.modelViewMatrix, this.modelViewMatrix, rad);\r\n  }\r\n\r\n  resetTransformations() {\r\n    this.modelViewMatrix = mat4.create();\r\n  }\r\n\r\n  private get color(): ReadonlyVec4 | undefined {\r\n    if (this.stateOptions.highlighted) {\r\n      return HIGHLIGHT;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  getStateOptions() {\r\n    return this.stateOptions;\r\n  }\r\n\r\n  setStateOptions(stateOptions: GlEntityStateOptions) {\r\n    this.stateOptions = stateOptions;\r\n  }\r\n}\r\n","import { GlContext } from \"../gl-context\";\r\n\r\nexport abstract class GlBuffer {\r\n  protected readonly gl: WebGLRenderingContext;\r\n  private readonly _handle: WebGLBuffer;\r\n  private deleted = false;\r\n\r\n  constructor(gl: WebGLRenderingContext) {\r\n    this.gl = gl;\r\n\r\n    const handle = gl.createBuffer();\r\n\r\n    if (handle === null) {\r\n      throw `Failed to create buffer!`;\r\n    }\r\n\r\n    this._handle = handle;\r\n  }\r\n\r\n  protected get handle() {\r\n    return this._handle;\r\n  }\r\n\r\n  bufferData(data: BufferSource): void {\r\n    if (this.deleted) {\r\n      throw `Trying to use a buffer that has already been deleted.`;\r\n    }\r\n\r\n    this.doBufferData(data);\r\n  }\r\n\r\n  protected abstract doBufferData(data: BufferSource): void;\r\n\r\n  use() {\r\n    if (this.deleted) {\r\n      throw `Trying to use a buffer that has already been deleted.`;\r\n    }\r\n\r\n    this.doUse();\r\n  }\r\n\r\n  protected abstract doUse(): void;\r\n\r\n  delete() {\r\n    if (this.deleted) {\r\n      throw `Trying to delete a buffer that has already been deleted.`;\r\n    }\r\n\r\n    this.gl.deleteBuffer(this._handle);\r\n    this.deleted = true;\r\n  }\r\n}\r\n","import { GlBuffer } from \"./gl-buffer\";\r\n\r\nexport class GlIndexBuffer extends GlBuffer {\r\n  private length = 0;\r\n\r\n  getLength(): number {\r\n    return this.length;\r\n  }\r\n\r\n  protected override doBufferData(data: BufferSource) {\r\n    this.length = data.byteLength / 2; // because it's an array of uint16 (this is pretty bs TODO do smth better)\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.handle);\r\n    this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, data, this.gl.STATIC_DRAW);\r\n  }\r\n\r\n  protected override doUse(): void {\r\n    this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.handle);\r\n  }\r\n\r\n  static createBufferSourceFromIndices(indices: number[]): BufferSource {\r\n    return new Uint16Array(indices);\r\n  }\r\n}\r\n","import { GlBuffer } from \"./gl-buffer\";\r\n\r\nexport abstract class GlArrayBuffer extends GlBuffer {\r\n  protected readonly attribLocation: number;\r\n\r\n  constructor(gl: WebGLRenderingContext, attribLocation: number) {\r\n    super(gl);\r\n    this.attribLocation = attribLocation;\r\n  }\r\n}\r\n","import { GlArrayBuffer } from \"./gl-array-buffer\";\r\n\r\nexport class GlNormalBuffer extends GlArrayBuffer {\r\n  protected override doBufferData(data: BufferSource) {\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, data, this.gl.STATIC_DRAW);\r\n  }\r\n\r\n  protected override doUse(): void {\r\n    const numComponents = 3; // X, Y, Z\r\n    const type = this.gl.FLOAT;\r\n    const normalize = false;\r\n    const stride = 0;\r\n    const offset = 0;\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.attribLocation,\r\n      numComponents,\r\n      type,\r\n      normalize,\r\n      stride,\r\n      offset,\r\n    );\r\n\r\n    this.gl.enableVertexAttribArray(this.attribLocation);\r\n  }\r\n\r\n  static createBufferSourceFromPositions(positions: number[]): BufferSource {\r\n    // console.log(positions);\r\n    return new Float32Array(positions);\r\n  }\r\n}\r\n","import { GlArrayBuffer } from \"./gl-array-buffer\";\r\n\r\nexport class GlPositionBuffer extends GlArrayBuffer {\r\n  protected override doBufferData(data: BufferSource) {\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, data, this.gl.STATIC_DRAW);\r\n  }\r\n\r\n  protected override doUse(): void {\r\n    const numComponents = 3; // X, Y, Z\r\n    const type = this.gl.FLOAT;\r\n    const normalize = false;\r\n    const stride = 0;\r\n    const offset = 0;\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.attribLocation,\r\n      numComponents,\r\n      type,\r\n      normalize,\r\n      stride,\r\n      offset,\r\n    );\r\n\r\n    this.gl.enableVertexAttribArray(this.attribLocation);\r\n  }\r\n\r\n  static createBufferSourceFromPositions(positions: number[]): BufferSource {\r\n    return new Float32Array(positions);\r\n  }\r\n}\r\n","import { GlArrayBuffer } from \"./gl-array-buffer\";\r\n\r\nexport class GlTextureCoordBuffer extends GlArrayBuffer {\r\n  protected override doBufferData(data: BufferSource): void {\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n    this.gl.bufferData(this.gl.ARRAY_BUFFER, data, this.gl.STATIC_DRAW);\r\n  }\r\n\r\n  protected override doUse(): void {\r\n    const num = 2; // U, V\r\n    const type = this.gl.FLOAT;\r\n    const normalize = false;\r\n    const stride = 0;\r\n    const offset = 0;\r\n\r\n    this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.handle);\r\n\r\n    this.gl.vertexAttribPointer(\r\n      this.attribLocation,\r\n      num,\r\n      type,\r\n      normalize,\r\n      stride,\r\n      offset,\r\n    );\r\n\r\n    this.gl.enableVertexAttribArray(this.attribLocation);\r\n  }\r\n\r\n  static createBufferSourceFromCoords(coords: number[]): BufferSource {\r\n    return new Float32Array(coords);\r\n  }\r\n}\r\n","import { GlIndexBuffer } from \"./buffer/gl-index-buffer\";\r\nimport { GlNormalBuffer } from \"./buffer/gl-normal-buffer\";\r\nimport { GlPositionBuffer } from \"./buffer/gl-position-buffer\";\r\nimport { GlTextureCoordBuffer } from \"./buffer/gl-texture-coord-buffer\";\r\nimport { GlContext } from \"./gl-context\";\r\n\r\nexport class GlModel {\r\n  private positionBuffer: GlPositionBuffer;\r\n  private indexBuffer: GlIndexBuffer;\r\n  private normalBuffer?: GlNormalBuffer;\r\n  private textureCoordsBuffer?: GlTextureCoordBuffer;\r\n  private textureKey: string | null = null;\r\n\r\n  constructor(\r\n    positionBuffer: GlPositionBuffer,\r\n    indexBuffer: GlIndexBuffer,\r\n    normalBuffer?: GlNormalBuffer,\r\n    textureCoordsBuffer?: GlTextureCoordBuffer,\r\n  ) {\r\n    this.positionBuffer = positionBuffer;\r\n    this.indexBuffer = indexBuffer;\r\n    this.normalBuffer = normalBuffer;\r\n    this.textureCoordsBuffer = textureCoordsBuffer;\r\n  }\r\n\r\n  setTextureKey(textureKey: string) {\r\n    this.textureKey = textureKey;\r\n  }\r\n\r\n  getTextureKey() {\r\n    return this.textureKey;\r\n  }\r\n\r\n  usesNormals() {\r\n    return this.normalBuffer !== undefined;\r\n  }\r\n\r\n  draw(ctx: GlContext) {\r\n    const textureOk = ctx.useTexture(this.textureKey);\r\n\r\n    if (!textureOk) {\r\n      return;\r\n    }\r\n\r\n    this.positionBuffer.use();\r\n    this.indexBuffer.use();\r\n\r\n    if (this.normalBuffer !== undefined) {\r\n      this.normalBuffer.use();\r\n    }\r\n\r\n    if (this.textureCoordsBuffer !== undefined) {\r\n      this.textureCoordsBuffer.use();\r\n    }\r\n\r\n    ctx.drawElements(this.indexBuffer.getLength());\r\n  }\r\n}\r\n","import { vec3 } from \"gl-matrix\";\r\nimport { GlIndexBuffer } from \"./buffer/gl-index-buffer\";\r\nimport { GlNormalBuffer } from \"./buffer/gl-normal-buffer\";\r\nimport { GlPositionBuffer } from \"./buffer/gl-position-buffer\";\r\nimport { GlTextureCoordBuffer } from \"./buffer/gl-texture-coord-buffer\";\r\nimport { GlContext } from \"./gl-context\";\r\nimport { GlEntity } from \"./gl-entity\";\r\nimport { GlModel } from \"./gl-model\";\r\nimport { ProgramInfo } from \"./program-info\";\r\nimport { Vector3 } from \"./types\";\r\n\r\ntype IndexedVerticesData = {\r\n  vertices: Vector3[];\r\n  indices: number[]; // indexes into the above /\\\r\n  texCoords: number[] | null;\r\n};\r\n\r\nfunction createModelFromIndexedVertices(\r\n  ctx: GlContext,\r\n  data: IndexedVerticesData,\r\n  computeNormals: boolean,\r\n): GlModel {\r\n  const positionData = data.vertices.flatMap((vertex) => {\r\n    return vertex;\r\n  });\r\n\r\n  const position = new GlPositionBuffer(ctx.getGl(), ctx.getProgramInfo().attribLocations.vertexPosition!);\r\n  position.bufferData(GlPositionBuffer.createBufferSourceFromPositions(positionData));\r\n\r\n  const indicesData = data.indices.map((index) => {\r\n    if (index < 0 || index > data.vertices.length - 1)\r\n      throw `Index out of bounds: ${index}`;\r\n\r\n    return index;\r\n  });\r\n\r\n  const indices = new GlIndexBuffer(ctx.getGl());\r\n  indices.bufferData(GlIndexBuffer.createBufferSourceFromIndices(indicesData));\r\n\r\n  let normals: GlNormalBuffer | undefined;\r\n\r\n  if (computeNormals) {\r\n    const normalList: vec3[] = [];\r\n\r\n    for (let i = 0; i < data.vertices.length; i++) {\r\n      normalList[i] = vec3.create();\r\n    }\r\n\r\n    for (let i = 0; i < indicesData.length; i += 3) {\r\n      const indexA = indicesData[i + 0]!;\r\n      const indexB = indicesData[i + 1]!;\r\n      const indexC = indicesData[i + 2]!;\r\n\r\n      const posA = vec3.fromValues(...data.vertices[indexA]!);\r\n      const posB = vec3.fromValues(...data.vertices[indexB]!);\r\n      const posC = vec3.fromValues(...data.vertices[indexC]!);\r\n\r\n      const edgeAB = vec3.sub(vec3.create(), posB, posA);\r\n      const edgeAC = vec3.sub(vec3.create(), posC, posA);\r\n\r\n      const areaWeightedNormal = vec3.cross(vec3.create(), edgeAB, edgeAC);\r\n\r\n      vec3.add(normalList[indexA]!, normalList[indexA]!, areaWeightedNormal);\r\n      vec3.add(normalList[indexB]!, normalList[indexB]!, areaWeightedNormal);\r\n      vec3.add(normalList[indexC]!, normalList[indexC]!, areaWeightedNormal);\r\n    }\r\n\r\n    for (let i = 0; i < data.vertices.length; i++) {\r\n      vec3.normalize(normalList[i]!, normalList[i]!);\r\n    }\r\n\r\n    normals = new GlNormalBuffer(ctx.getGl(), ctx.getProgramInfo().attribLocations.vertexNormal!);\r\n    normals.bufferData(GlNormalBuffer.createBufferSourceFromPositions(\r\n      normalList.flatMap((normals) => [normals[0], normals[1], normals[2]]),\r\n    ));\r\n  }\r\n\r\n  let texCoords: GlTextureCoordBuffer | undefined;\r\n\r\n  if (data.texCoords) {\r\n    texCoords = new GlTextureCoordBuffer(ctx.getGl(), ctx.getProgramInfo().attribLocations.textureCoord!);\r\n    texCoords.bufferData(GlTextureCoordBuffer.createBufferSourceFromCoords(data.texCoords));\r\n  }\r\n\r\n  return new GlModel(position, indices, normals, texCoords);\r\n}\r\n\r\n/**\r\n * Similar to createModelFromIndexedColoredVertices but you can simply pass only the vertex+color\r\n * information and the function will automatically remove redundant (identical vertex) items\r\n * and automatically generate indices. DOESN'T YET SUPPORT TEXCOORDS\r\n */\r\nfunction createModelFromSmartVertices(\r\n  ctx: GlContext,\r\n  data: Vector3[],\r\n  computeNormals: boolean,\r\n): GlModel {\r\n  const uniqueData: Vector3[] = []; // data but without redundant (identical) items\r\n  const uniqueDataIndices: number[] = []; // indexes data's items into the uniqueData items\r\n\r\n  outer:for (let i = 0; i < data.length; i++) {\r\n    const item = data[i]!;\r\n\r\n    for (let j = 0; j < uniqueData.length; j++) {\r\n      const normItem = uniqueData[j]!;\r\n\r\n      if (isVertexEqual(item, normItem)) {\r\n        uniqueDataIndices.push(j);\r\n        continue outer;\r\n      }\r\n    }\r\n\r\n    uniqueData.push(item);\r\n    uniqueDataIndices.push(uniqueData.length - 1);\r\n  }\r\n\r\n  return createModelFromIndexedVertices(ctx, {\r\n    vertices: uniqueData,\r\n    indices: uniqueDataIndices,\r\n    texCoords: null,\r\n  }, computeNormals);\r\n}\r\n\r\nfunction isVertexEqual(v1: Vector3, v2: Vector3): boolean {\r\n  return v1[0] === v2[0] &&\r\n         v1[1] === v2[1] &&\r\n         v1[2] === v2[2];\r\n}\r\n\r\nfunction makeCube(gl: WebGLRenderingContext, programInfo: ProgramInfo<any, any>): GlEntity {\r\n  const size = 1.0; // actually radius (because the real size will be * 2)\r\n\r\n  const positions = new GlPositionBuffer(gl, programInfo.attribLocations.vertexPosition!);\r\n    positions.bufferData(GlPositionBuffer.createBufferSourceFromPositions([\r\n      // Front face\r\n      -size, -size, size, size, -size, size, size, size, size, -size, size, size,\r\n\r\n      // Back face\r\n      -size, -size, -size, -size, size, -size, size, size, -size, size, -size, -size,\r\n\r\n      // Top face\r\n      -size, size, -size, -size, size, size, size, size, size, size, size, -size,\r\n\r\n      // Bottom face\r\n      -size, -size, -size, size, -size, -size, size, -size, size, -size, -size, size,\r\n\r\n      // Right face\r\n      size, -size, -size, size, size, -size, size, size, size, size, -size, size,\r\n\r\n      // Left face\r\n      -size, -size, -size, -size, -size, size, -size, size, size, -size, size, -size,\r\n    ]));\r\n\r\n    const indices = new GlIndexBuffer(gl);\r\n    indices.bufferData(GlIndexBuffer.createBufferSourceFromIndices([\r\n      0,\r\n      1,\r\n      2,\r\n      0,\r\n      2,\r\n      3, // front\r\n      4,\r\n      5,\r\n      6,\r\n      4,\r\n      6,\r\n      7, // back\r\n      8,\r\n      9,\r\n      10,\r\n      8,\r\n      10,\r\n      11, // top\r\n      12,\r\n      13,\r\n      14,\r\n      12,\r\n      14,\r\n      15, // bottom\r\n      16,\r\n      17,\r\n      18,\r\n      16,\r\n      18,\r\n      19, // right\r\n      20,\r\n      21,\r\n      22,\r\n      20,\r\n      22,\r\n      23, // left\r\n    ]));\r\n\r\n    const normals = new GlNormalBuffer(gl, programInfo.attribLocations.vertexNormal!);\r\n    normals.bufferData(GlNormalBuffer.createBufferSourceFromPositions([\r\n      // Front\r\n      0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0,\r\n\r\n      // Back\r\n      0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0,\r\n\r\n      // Top\r\n      0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0,\r\n\r\n      // Bottom\r\n      0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0,\r\n\r\n      // Right\r\n      1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0,\r\n\r\n      // Left\r\n      -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0, -1.0, 0.0, 0.0,\r\n    ]));\r\n\r\n    const texCoords = new GlTextureCoordBuffer(gl, programInfo.attribLocations.textureCoord!);\r\n    texCoords.bufferData(GlTextureCoordBuffer.createBufferSourceFromCoords([\r\n      // Front\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n      // Back\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n      // Top\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n      // Bottom\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n      // Right\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n      // Left\r\n      0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,\r\n    ]));\r\n\r\n    const rootModel = new GlModel(positions, indices, normals, texCoords);\r\n    const rootEntity = new GlEntity(rootModel, 'cube');\r\n\r\n    // rootEntity.setTextureKey('jugwingL');\r\n\r\n    return rootEntity;\r\n}\r\n\r\nexport const GlModelHelpers = {\r\n  createModelFromIndexedVertices,\r\n  createModelFromSmartVertices,\r\n  makeCube,\r\n};\r\n","import { Object3do, Primitive3do, Vertex3do } from \"@takingdoms/lib-3do\";\r\nimport { Utils } from \"../../utils\";\r\nimport { ObjectEntityMap } from \"../webgl-sub-renderers/webgl-sub-renderer\";\r\nimport { GlContext } from \"./gl-context\";\r\nimport { GlEntity } from \"./gl-entity\";\r\nimport { GlModel } from \"./gl-model\";\r\nimport { GlModelHelpers } from \"./gl-model-helpers\";\r\nimport { Vector3 } from \"./types\";\r\n\r\nconst SCALE = 0.000001;\r\n\r\nexport function addGlEntityFrom3do(\r\n  ctx: GlContext,\r\n  child: Object3do,\r\n  parent: GlEntity,\r\n  inputObjectEntityMap: ObjectEntityMap,\r\n  triangulateQuads: boolean,\r\n  computeNormals: boolean,\r\n  useTextures: boolean,\r\n) {\r\n  // the wrapper exists to isolate the offsets transformations from \"user\" transformations\r\n  // so for example, if the user calls entity.resetTransformations() the offsets won't be lost\r\n  // provided that the entity being referenced isn't a wrapper (which it should never be)\r\n  // TODO find a better solution (maybe store two matrices? one for parent offset and one for user transforms)\r\n  const wrapper = new GlEntity(null, 'WRAPPER:' + child.name);\r\n  wrapper.translate(child.xOffset * SCALE, child.yOffset * SCALE, child.zOffset * SCALE);\r\n\r\n  const modelParts: GlModel[] = [];\r\n\r\n  for (const primitive of child.primitives) {\r\n    const model = glModelFrom3do(\r\n      ctx,\r\n      child.vertices,\r\n      primitive,\r\n      triangulateQuads,\r\n      computeNormals,\r\n      useTextures,\r\n    );\r\n\r\n    if (model === null) {\r\n      continue;\r\n    }\r\n\r\n    if (useTextures && Utils.validateTextureName(primitive.textureName)) {\r\n      model.setTextureKey(primitive.textureName);\r\n    }\r\n\r\n    modelParts.push(model);\r\n  }\r\n\r\n  const objectEntity = new GlEntity(modelParts, child.name);\r\n  wrapper.addChild(objectEntity);\r\n  inputObjectEntityMap.set(child, objectEntity);\r\n\r\n  for (const subChild of child.children) {\r\n    addGlEntityFrom3do(\r\n      ctx,\r\n      subChild,\r\n      objectEntity,\r\n      inputObjectEntityMap,\r\n      triangulateQuads,\r\n      computeNormals,\r\n      useTextures,\r\n    );\r\n  }\r\n\r\n  parent.addChild(wrapper);\r\n}\r\n\r\nfunction glModelFrom3do(\r\n  ctx: GlContext,\r\n  vertices: Vertex3do[],\r\n  primitive: Primitive3do,\r\n  triangulateQuads: boolean,\r\n  computeNormals: boolean,\r\n  useTextures: boolean,\r\n): GlModel | null {\r\n  // pre-ordered and pre-scaled\r\n  const preOrderedVertices: Vector3[] = primitive.vertexIndices.map((index) => {\r\n    const nextVertex = vertices[index]!;\r\n    return [\r\n      nextVertex.x * SCALE,\r\n      nextVertex.y * SCALE,\r\n      nextVertex.z * SCALE,\r\n    ];\r\n  });\r\n\r\n  if (primitive.vertexIndices.length === 3) {\r\n    const texCoords = useTextures\r\n      ? [\r\n        0, 0,\r\n        0, 1,\r\n        1, 1,\r\n      ]\r\n      : null;\r\n\r\n    return GlModelHelpers.createModelFromIndexedVertices(ctx, {\r\n      vertices: preOrderedVertices,\r\n      indices: [0, 1, 2],\r\n      texCoords,\r\n    }, computeNormals);\r\n  }\r\n\r\n  if (primitive.vertexIndices.length === 4) {\r\n    // when using textures the quads should be triangulated\r\n    const texCoords = useTextures && triangulateQuads\r\n      ? [\r\n        0, 0,\r\n        1, 0,\r\n        1, 1,\r\n        0, 1,\r\n      ]\r\n      : null;\r\n\r\n    return GlModelHelpers.createModelFromIndexedVertices(ctx, {\r\n      vertices: preOrderedVertices,\r\n      indices: triangulateQuads\r\n        ? [\r\n          0, 1, 2,\r\n          0, 2, 3,\r\n        ]\r\n        : [0, 1, 2, 3],\r\n      texCoords,\r\n    }, computeNormals);\r\n  }\r\n\r\n  return null;\r\n}\r\n","import { Object3do, Object3doTree } from \"@takingdoms/lib-3do\";\r\nimport { glMatrix, mat4, vec3 } from \"gl-matrix\";\r\nimport { ObjectStateMap } from \"../../../components/Main\";\r\nimport { TakLogoColorsDefinitions } from \"../../logo-colors\";\r\nimport { TextureMapping } from \"../../texture-mapping\";\r\nimport { ModelControls } from \"../../types/model-controls\";\r\nimport { ViewColor, ViewMode } from \"../../types/view\";\r\nimport { GlContext } from \"../gl/gl-context\";\r\nimport { GlCustomContext } from \"../gl/gl-custom-context\";\r\nimport { GlEntity } from \"../gl/gl-entity\";\r\nimport { addGlEntityFrom3do } from \"../gl/gl-from-3do\";\r\nimport { ProgramInfo } from \"../gl/program-info\";\r\nimport { WebglEngineShaderSources } from \"../webgl-engine\";\r\n\r\n// TODO make these configurable(?)\r\nconst BASE_CAMERA_OFFSET = 8;\r\nconst ZOOM_MODIFIER = 0.01;\r\nconst TRANSLATION_MODIFIER = 0.02;\r\nconst DEFAULT_BASE_COLOR: ViewColor = [1.0, 1.0, 1.0, 1.0];\r\n\r\ntype AnyProgramInfo = ProgramInfo<string, string>;\r\n\r\nexport type ObjectEntityMap = Map<Object3do, GlEntity>;\r\n\r\nexport abstract class WebglSubRenderer<TProgramInfo extends AnyProgramInfo> {\r\n  protected readonly programInfo: TProgramInfo;\r\n  protected readonly ctx: GlContext;\r\n  protected readonly rootEntity: GlEntity;\r\n\r\n  protected objEntityMap: ObjectEntityMap = new Map();\r\n\r\n  constructor(\r\n    protected readonly gl: WebGLRenderingContext,\r\n    protected readonly shaderSources: WebglEngineShaderSources,\r\n    protected readonly object3doTree: Object3doTree,\r\n    protected readonly logoDefs: TakLogoColorsDefinitions,\r\n  ) {\r\n    this.programInfo = this.initProgram();\r\n    this.ctx = this.initContext();\r\n    this.rootEntity = this.initRootEntity();\r\n  }\r\n\r\n  protected abstract getViewMode(): ViewMode;\r\n\r\n  protected abstract initProgram(): TProgramInfo;\r\n\r\n  protected initContext(): GlContext {\r\n    return new GlCustomContext(this.gl, this.programInfo, this.logoDefs, this.getViewMode());\r\n  }\r\n\r\n  protected initRootEntity(): GlEntity {\r\n    const viewMode = this.getViewMode();\r\n    const rootEntity = new GlEntity(null);\r\n\r\n    for (const object3do of this.object3doTree.rootNodes) {\r\n      addGlEntityFrom3do(\r\n        this.ctx,\r\n        object3do,\r\n        rootEntity,\r\n        this.objEntityMap,\r\n        viewMode !== 'wireframe',\r\n        viewMode !== 'wireframe',\r\n        viewMode === 'regular',\r\n      );\r\n    }\r\n\r\n    return rootEntity;\r\n  }\r\n\r\n  changeTextureMapping(textureMapping: TextureMapping) {\r\n    // nothing\r\n  }\r\n\r\n  changeModelControls(modelControls: ModelControls) {\r\n    // nothing\r\n  }\r\n\r\n  changeObjectStateMap(objStateMap: ObjectStateMap) {\r\n    for (const [object, state] of objStateMap) {\r\n      const entity = this.objEntityMap.get(object);\r\n\r\n      if (entity === undefined) {\r\n        throw new Error(`Couldn't find an entity for the object: ${object}`);\r\n      }\r\n\r\n      entity.setStateOptions({\r\n        visibile: !state.hide,\r\n        highlighted: state.highlight,\r\n      });\r\n    }\r\n  }\r\n\r\n  protected inBeforeTheRootRender(gl: WebGLRenderingContext, modelControls: ModelControls) {\r\n    // nothing\r\n  }\r\n\r\n  render(gl: WebGLRenderingContext, modelControls: ModelControls, delta?: number) {\r\n    const viewWidth = gl.drawingBufferWidth;\r\n    const viewHeight = gl.drawingBufferHeight;\r\n\r\n    gl.clearColor(0.0, 0.0, 0.0, 0.0);\r\n    gl.clearDepth(1.0);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.depthFunc(gl.LEQUAL);\r\n\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    const fieldOfView = (45 * Math.PI) / 180;\r\n    const aspect = viewWidth / viewHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n\r\n    gl.useProgram(this.programInfo.program);\r\n\r\n    this.ctx.setUniformFloat4('baseColor', modelControls.viewColor ?? DEFAULT_BASE_COLOR);\r\n\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n    this.ctx.setUniformMatrix4('projectionMatrix', projectionMatrix);\r\n\r\n    const xOffset = modelControls.translationX * TRANSLATION_MODIFIER;\r\n    const yOffset = modelControls.translationY * TRANSLATION_MODIFIER * -1;\r\n    const zOffset = (BASE_CAMERA_OFFSET + modelControls.zoom * ZOOM_MODIFIER) * -1;\r\n\r\n    // TODO \\/ stop reseting and recreating transformations for no reason. these should only happen\r\n    // when the user actually rotates/pans the camera\r\n    this.rootEntity.resetTransformations();\r\n    this.rootEntity.translate(xOffset, yOffset, zOffset);\r\n    this.rootEntity.rotateX(glMatrix.toRadian(modelControls.rotationX));\r\n    this.rootEntity.rotateY(glMatrix.toRadian(modelControls.rotationY));\r\n    this.rootEntity.rotateZ(glMatrix.toRadian(modelControls.rotationZ));\r\n\r\n    this.inBeforeTheRootRender(gl, modelControls);\r\n\r\n    this.rootEntity.render(this.ctx);\r\n  }\r\n\r\n  update(delta: number) {\r\n    /*const wing1a = this.rootEntity.findChild('wing1a', true)!;\r\n    const wing2a = this.rootEntity.findChild('wing2a', true)!;\r\n\r\n    const rotation = 0;\r\n\r\n    wing1a.resetTransformations();\r\n    wing1a.rotateZ(glMatrix.toRadian(rotation));\r\n\r\n    wing2a.resetTransformations();\r\n    wing2a.rotateZ(glMatrix.toRadian(-rotation));\r\n\r\n    wing1a.setColor([1.0, 0.0, 0.0, 1.0]);\r\n    wing2a.setColor([0.0, 0.0, 1.0, 1.0]);*/\r\n  }\r\n}\r\n","import { TextureMapping } from \"../../texture-mapping\";\r\nimport { ModelControls } from \"../../types/model-controls\";\r\nimport { ViewMode } from \"../../types/view\";\r\nimport { ProgramInfo } from \"../gl/program-info\";\r\nimport { WebGlHelper } from \"../gl/webgl-helper\";\r\nimport { WebglSubRenderer } from \"./webgl-sub-renderer\";\r\n\r\ntype RegularProgramInfo = ProgramInfo<\r\n  'vertexPosition' | 'vertexNormal' | 'textureCoord',\r\n  'modelViewMatrix' | 'projectionMatrix' | 'baseColor' | 'entityColor' | 'normalMatrix' | 'sampler'\r\n    | 'useLights'\r\n>;\r\n\r\nexport class RegularRenderer extends WebglSubRenderer<RegularProgramInfo> {\r\n  override changeTextureMapping(textureMapping: TextureMapping) {\r\n    this.ctx.changeTextureMapping(textureMapping);\r\n  }\r\n\r\n  override changeModelControls(modelControls: ModelControls): void {\r\n    this.ctx.setCurrentLogoIdx(modelControls.logoColorIdx);\r\n    super.changeModelControls(modelControls);\r\n  }\r\n\r\n  protected override getViewMode(): ViewMode {\r\n    return 'regular';\r\n  }\r\n\r\n  protected override initProgram(): RegularProgramInfo {\r\n    const { vsSource, fsSource } = this.shaderSources.regular;\r\n\r\n    const vsShader = WebGlHelper.compileShader(this.gl, vsSource, this.gl.VERTEX_SHADER);\r\n    const fsShader = WebGlHelper.compileShader(this.gl, fsSource, this.gl.FRAGMENT_SHADER);\r\n    const shaderProgram = WebGlHelper.createProgram(this.gl, vsShader, fsShader);\r\n\r\n    return {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: this.gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexNormal: this.gl.getAttribLocation(shaderProgram, 'aVertexNormal'),\r\n        textureCoord: this.gl.getAttribLocation(shaderProgram, 'aTextureCoord'),\r\n      },\r\n      uniformLocations: {\r\n        modelViewMatrix: this.gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')!,\r\n        projectionMatrix: this.gl.getUniformLocation(shaderProgram, 'uProjectionMatrix')!,\r\n        baseColor: this.gl.getUniformLocation(shaderProgram, 'baseColor')!,\r\n        entityColor: this.gl.getUniformLocation(shaderProgram, 'entityColor')!,\r\n        normalMatrix: this.gl.getUniformLocation(shaderProgram, 'uNormalMatrix')!,\r\n        sampler: this.gl.getUniformLocation(shaderProgram, 'uSampler')!,\r\n        useLights: this.gl.getUniformLocation(shaderProgram, 'useLights')!,\r\n      },\r\n    };\r\n  }\r\n\r\n  protected override inBeforeTheRootRender(gl: WebGLRenderingContext, modelControls: ModelControls): void {\r\n    this.ctx.setUniformBool('useLights', modelControls.enableLightingRegular);\r\n\r\n    const minFilter = modelControls.textureFilterMin === 'linear' ? gl.LINEAR : gl.NEAREST;\r\n    const magFilter = modelControls.textureFilterMag === 'linear' ? gl.LINEAR : gl.NEAREST;\r\n\r\n    this.ctx.setTextureMinFilter(minFilter);\r\n    this.ctx.setTextureMagFilter(magFilter);\r\n  }\r\n}\r\n","import { ModelControls } from \"../../types/model-controls\";\r\nimport { ViewMode } from \"../../types/view\";\r\nimport { ProgramInfo } from \"../gl/program-info\";\r\nimport { WebGlHelper } from \"../gl/webgl-helper\";\r\nimport { WebglSubRenderer } from \"./webgl-sub-renderer\";\r\n\r\ntype SolidColorProgramInfo = ProgramInfo<\r\n  'vertexPosition' | 'vertexNormal',\r\n  'modelViewMatrix' | 'projectionMatrix' | 'baseColor' | 'entityColor' | 'normalMatrix' | 'useLights'\r\n>;\r\n\r\nexport class SolidColorRenderer extends WebglSubRenderer<SolidColorProgramInfo> {\r\n  protected override getViewMode(): ViewMode {\r\n    return 'solid_color';\r\n  }\r\n\r\n  override changeModelControls(modelControls: ModelControls): void {\r\n    this.ctx.setBaseEntityColor(modelControls.solidColor);\r\n  }\r\n\r\n  protected override initProgram(): SolidColorProgramInfo {\r\n    const { vsSource, fsSource } = this.shaderSources.solid;\r\n\r\n    const vsShader = WebGlHelper.compileShader(this.gl, vsSource, this.gl.VERTEX_SHADER);\r\n    const fsShader = WebGlHelper.compileShader(this.gl, fsSource, this.gl.FRAGMENT_SHADER);\r\n    const shaderProgram = WebGlHelper.createProgram(this.gl, vsShader, fsShader);\r\n\r\n    return {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: this.gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexNormal: this.gl.getAttribLocation(shaderProgram, 'aVertexNormal'),\r\n      },\r\n      uniformLocations: {\r\n        modelViewMatrix: this.gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')!,\r\n        projectionMatrix: this.gl.getUniformLocation(shaderProgram, 'uProjectionMatrix')!,\r\n        baseColor: this.gl.getUniformLocation(shaderProgram, 'baseColor')!,\r\n        entityColor: this.gl.getUniformLocation(shaderProgram, 'entityColor')!,\r\n        normalMatrix: this.gl.getUniformLocation(shaderProgram, 'uNormalMatrix')!,\r\n        useLights: this.gl.getUniformLocation(shaderProgram, 'useLights')!,\r\n      },\r\n    };\r\n  }\r\n\r\n  protected override inBeforeTheRootRender(gl: WebGLRenderingContext, modelControls: ModelControls): void {\r\n    this.ctx.setUniformBool('useLights', modelControls.enableLightingSolidColor);\r\n  }\r\n}\r\n","import { ModelControls } from \"../../types/model-controls\";\r\nimport { ViewMode } from \"../../types/view\";\r\nimport { ProgramInfo } from \"../gl/program-info\";\r\nimport { WebGlHelper } from \"../gl/webgl-helper\";\r\nimport { WebglSubRenderer } from \"./webgl-sub-renderer\";\r\n\r\nexport type WireframeProgramInfo = ProgramInfo<\r\n  'vertexPosition',\r\n  'modelViewMatrix' | 'projectionMatrix' | 'baseColor' | 'entityColor'\r\n>;\r\n\r\nexport class WireframeRenderer extends WebglSubRenderer<WireframeProgramInfo> {\r\n  protected override getViewMode(): ViewMode {\r\n    return 'wireframe';\r\n  }\r\n\r\n  override changeModelControls(modelControls: ModelControls): void {\r\n    this.ctx.setBaseEntityColor(modelControls.wireframeColor);\r\n  }\r\n\r\n  protected override initProgram(): WireframeProgramInfo {\r\n    const { vsSource, fsSource } = this.shaderSources.wireframe;\r\n\r\n    const vsShader = WebGlHelper.compileShader(this.gl, vsSource, this.gl.VERTEX_SHADER);\r\n    const fsShader = WebGlHelper.compileShader(this.gl, fsSource, this.gl.FRAGMENT_SHADER);\r\n    const shaderProgram = WebGlHelper.createProgram(this.gl, vsShader, fsShader);\r\n\r\n    return {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: this.gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n      },\r\n      uniformLocations: {\r\n        modelViewMatrix: this.gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')!,\r\n        projectionMatrix: this.gl.getUniformLocation(shaderProgram, 'uProjectionMatrix')!,\r\n        baseColor: this.gl.getUniformLocation(shaderProgram, 'baseColor')!,\r\n        entityColor: this.gl.getUniformLocation(shaderProgram, 'entityColor')!,\r\n      },\r\n    };\r\n  }\r\n}\r\n","import { Object3doTree } from \"@takingdoms/lib-3do\";\r\nimport { ObjectStateMap } from \"../../components/Main\";\r\nimport { TakLogoColorsDefinitions } from \"../logo-colors\";\r\nimport { TextureMapping } from \"../texture-mapping\";\r\nimport { ModelControls } from \"../types/model-controls\";\r\nimport { ViewMode } from \"../types/view\";\r\nimport { Engine, EngineConfig } from \"./engine\";\r\nimport { RegularRenderer } from \"./webgl-sub-renderers/regular-renderer\";\r\nimport { SolidColorRenderer } from \"./webgl-sub-renderers/solid-color-renderer\";\r\nimport { WebglSubRenderer } from \"./webgl-sub-renderers/webgl-sub-renderer\";\r\nimport { WireframeRenderer } from \"./webgl-sub-renderers/wireframe-renderer\";\r\n\r\nexport type ShaderSources = {\r\n  fsSource: string;\r\n  vsSource: string;\r\n};\r\n\r\nexport type WebglEngineShaderSources = {\r\n  regular: ShaderSources;\r\n  solid: ShaderSources;\r\n  wireframe: ShaderSources;\r\n};\r\n\r\nexport class WebglEngine extends Engine {\r\n  private gl: WebGLRenderingContext;\r\n  private subRenderers: Record<ViewMode, WebglSubRenderer<any>>;\r\n\r\n  constructor(\r\n    config: EngineConfig,\r\n    shaderSources: WebglEngineShaderSources,\r\n    object3doTree: Object3doTree,\r\n    logoDefs: TakLogoColorsDefinitions,\r\n  ) {\r\n    super(config);\r\n\r\n    const gl = config.canvas.getContext('webgl', {\r\n      preserveDrawingBuffer: config.preserveDrawingBuffer,\r\n    });\r\n\r\n    if (gl === null) {\r\n      throw `Couldn't get WebGL rendering context!`;\r\n    }\r\n\r\n    this.gl = gl;\r\n\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\r\n    gl.enable(gl.BLEND);\r\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n    //:: Setup subRenderers\r\n\r\n    this.subRenderers = {\r\n      regular: new RegularRenderer(gl, shaderSources, object3doTree, logoDefs),\r\n      solid_color: new SolidColorRenderer(gl, shaderSources, object3doTree, logoDefs),\r\n      wireframe: new WireframeRenderer(gl, shaderSources, object3doTree, logoDefs),\r\n    };\r\n\r\n    for (const subRenderer of Object.values(this.subRenderers)) {\r\n      subRenderer.changeTextureMapping(config.textureMapping);\r\n    }\r\n\r\n    //:: Setup resizing handler and then render\r\n\r\n    this.setupEvents();\r\n\r\n    if (config.mode === 'continuous') {\r\n      let then = 0;\r\n\r\n      const render = (now: DOMHighResTimeStamp) => {\r\n        now *= 0.001; // convert to seconds\r\n        const deltaTime = now - then;\r\n        then = now;\r\n\r\n        this.update(deltaTime);\r\n        this.render(deltaTime);\r\n\r\n        requestAnimationFrame(render);\r\n      };\r\n\r\n      requestAnimationFrame(render);\r\n    }\r\n  }\r\n\r\n  protected override onResized(): void {\r\n    console.log(`Resized! (${this.width} x ${this.height})`);\r\n    this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\r\n    if (this.config.mode === 'static') {\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  protected override render(delta?: number): void {\r\n    const currentViewMode = this.config.modelControls.viewMode;\r\n    const currentSubRenderer = this.subRenderers[currentViewMode];\r\n\r\n    currentSubRenderer.render(this.gl, this.config.modelControls, delta);\r\n  }\r\n\r\n  override setTextureMapping(textureMapping: TextureMapping) {\r\n    for (const subRenderer of Object.values(this.subRenderers)) {\r\n      subRenderer.changeTextureMapping(textureMapping);\r\n    }\r\n\r\n    super.setTextureMapping(textureMapping);\r\n  }\r\n\r\n  override setModelControls(modelControls: ModelControls): void {\r\n    for (const subRenderer of Object.values(this.subRenderers)) {\r\n      subRenderer.changeModelControls(modelControls);\r\n    }\r\n\r\n    super.setModelControls(modelControls);\r\n  }\r\n\r\n  override setObjectStateMap(objStateMap: ObjectStateMap): void {\r\n    for (const subRenderer of Object.values(this.subRenderers)) {\r\n      subRenderer.changeObjectStateMap(objStateMap);\r\n    }\r\n\r\n    super.setObjectStateMap(objStateMap);\r\n  }\r\n\r\n  private update(delta: number) {\r\n    const currentViewMode = this.config.modelControls.viewMode;\r\n    const currentSubRenderer = this.subRenderers[currentViewMode];\r\n\r\n    currentSubRenderer.update(delta);\r\n  }\r\n}\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { MutableRef } from \"preact/hooks\";\r\n\r\ntype CanvasWrapperProps = {\r\n  canvasRef: MutableRef<HTMLCanvasElement | undefined>;\r\n};\r\n\r\nconst CanvasWrapper: FunctionComponent<CanvasWrapperProps> = ({ canvasRef }) => {\r\n  console.log('Re-rendering CanvasWrapper');\r\n\r\n  const canvas = (\r\n    // don't touch this div \\/ because the engine listen to resize events on it\r\n    <div class=\"absolute inset-0\">\r\n      <canvas ref={canvasRef as MutableRef<HTMLCanvasElement>} />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div class=\"w-full h-full max-w-full max-h-full relative\">\r\n      {canvas}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CanvasWrapper;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"NameWrapper\":\"NameWrapper__lk4ti\",\"LeftBorder\":\"LeftBorder__WZG0Y\",\"MiddleBorder\":\"MiddleBorder__FcOEe\",\"Root\":\"Root__0piuG\"};","import { FunctionComponent, h } from 'preact';\r\nimport { ObjectState } from \"../../lib/object-state\";\r\n\r\nconst ObjectSideControls: FunctionComponent<{\r\n  state: ObjectState;\r\n  setState: (newState: ObjectState) => void;\r\n}> = ({ state, setState }) => {\r\n  return (\r\n    <div class=\"flex pr-1\">\r\n      <div\r\n        class={'flex items-center px-1 cursor-pointer'\r\n          + (state.highlight ? ' text-yellow-500' : '')}\r\n        onClick={() => setState({ ...state, highlight: !state.highlight })}\r\n      >H</div>\r\n      <div\r\n        class={'flex items-center px-1 cursor-pointer'\r\n          + (state.hide ? '' : ' text-yellow-500')}\r\n        onClick={() => setState({ ...state, hide: !state.hide })}\r\n      >V</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ObjectSideControls;\r\n","import { Object3do } from \"@takingdoms/lib-3do\";\r\nimport { FunctionComponent, h } from 'preact';\r\nimport { useState } from \"preact/hooks\";\r\nimport { Utils } from \"../../lib/utils\";\r\nimport { ObjectStateMap } from \"../Main\";\r\nimport Styles from './ObjectListTree.module.css';\r\nimport ObjectSideControls from \"./ObjectSideControls\";\r\n\r\nconst INDENT = '1.50rem';\r\nconst ROW_HEIGHT = '34px';\r\nconst SPACING_Y = '0.50rem';\r\n\r\nconst ObjectListTree: FunctionComponent<{\r\n  current: Object3do | null; // null = root\r\n  nodes: Object3do[];\r\n  onChangeNodeStack: (stack: Object3do[]) => void;\r\n  nodeStack: Object3do[]; // used exclusively for the onChangeNodeStack callback\r\n\r\n  objStateMap: ObjectStateMap; // TODO: in the future, maybe combine the stateMap WITH The Tree... HELL YEAH and it should be called Stateful3doObjectTree and StatefulObject3do. now JUST DO IT\r\n  setObjStateMap: (newObjectStateMap: ObjectStateMap) => void;\r\n}> = ({\r\n  current,\r\n  nodes,\r\n  onChangeNodeStack,\r\n  nodeStack,\r\n  objStateMap,\r\n  setObjStateMap,\r\n}) => {\r\n  const [showChildren, setShowChildren] = useState(true);\r\n\r\n  const hasChildren = nodes.length > 0;\r\n\r\n  const objState = current && objStateMap.get(current);\r\n\r\n  return (\r\n    <div class={Styles.Root + ' w-full overflow-hidden text-sm'}>\r\n      {current !== null && (\r\n        <div\r\n          style={{ height: ROW_HEIGHT }}\r\n          class={Styles.NameWrapper + ' flex py-1 bg-cyan-900 box-border'}\r\n        >\r\n          <div\r\n            onClick={hasChildren ? () => setShowChildren(!showChildren) : undefined}\r\n            class={`flex items-center px-1 pl-2 ${hasChildren ? 'cursor-pointer hover:text-yellow-400' : 'invisible'}`}\r\n          >\r\n            {showChildren ? '' : ''}\r\n          </div>\r\n\r\n          <div\r\n            class=\"min-w-0 flex items-center grow hover:text-yellow-400 cursor-pointer\"\r\n            onClick={() => onChangeNodeStack(nodeStack)}\r\n          >\r\n            <div class=\"truncate px-1\" title={current.name}>\r\n              {current.name ?? <span class=\"text-gray-300\">{'<empty name>'}</span>}\r\n            </div>\r\n          </div>\r\n\r\n          {objState && (\r\n            <ObjectSideControls\r\n              state={objState}\r\n              setState={(newObjState) => {\r\n                const newMap = Utils.createUpdatedMap(objStateMap, current, newObjState);\r\n                setObjStateMap(newMap);\r\n              }}\r\n            />\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {nodes.length > 0 && (\r\n        <div class={showChildren ? 'block' : 'hidden'}>\r\n          {nodes.map((subNode, index) => (\r\n            <div key={index} class=\"flex\">\r\n              <div\r\n                class={Styles.LeftBorder}\r\n                style={{\r\n                  marginLeft: `calc(${INDENT} / 2)`,\r\n                  height: index === nodes.length - 1\r\n                    ? `calc(${ROW_HEIGHT} / 2 + ${SPACING_Y})`\r\n                    : 'auto',\r\n                }}\r\n              />\r\n\r\n              <div\r\n                class={Styles.MiddleBorder + ' self-start'}\r\n                style={{\r\n                  width: `calc(${INDENT} / 2)`,\r\n                  height: `calc(${ROW_HEIGHT} / 2 + ${SPACING_Y})`,\r\n                }}\r\n              />\r\n\r\n              <div\r\n                class=\"grow max-w-full overflow-hidden\"\r\n                style={{ paddingTop: SPACING_Y }}\r\n              >\r\n                <ObjectListTree\r\n                  current={subNode}\r\n                  nodes={subNode.children}\r\n                  onChangeNodeStack={onChangeNodeStack}\r\n                  nodeStack={[...nodeStack, subNode]}\r\n                  objStateMap={objStateMap}\r\n                  setObjStateMap={setObjStateMap}\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ObjectListTree;\r\n","import { Primitive3do } from \"@takingdoms/lib-3do\";\r\nimport { FunctionComponent, h } from 'preact';\r\n\r\nconst cellCss = 'px-1.5 py-1 align-top text-left';\r\nconst thCss = `${cellCss} whitespace-nowrap`;\r\nconst tdCss = `${cellCss} break-all`;\r\n\r\nconst PrimitivesTable: FunctionComponent<{\r\n  primitives: Primitive3do[];\r\n}> = ({ primitives }) => {\r\n  return (\r\n    <table class=\"w-full overflow-hidden\">\r\n      <thead>\r\n        <tr>\r\n          <th class={thCss}>#</th>\r\n          <th class={thCss} title=\"Vertex Indices\">V.Indices</th>\r\n          <th class={thCss}>Texture</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {primitives.map((primitive, index) => {\r\n          return (\r\n            <tr key={index}>\r\n              <td class={tdCss}>{index}</td>\r\n              <td class={tdCss}>[{primitive.vertexIndices.join(', ')}]</td>\r\n              <td class={`${tdCss}`}>{primitive.textureName}</td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default PrimitivesTable;\r\n","import { Object3do, Object3doTree } from \"@takingdoms/lib-3do\";\r\nimport { FunctionComponent, h, Fragment } from 'preact';\r\nimport { useMemo, useState } from \"preact/hooks\";\r\nimport { Utils } from \"../../lib/utils\";\r\nimport { ObjectStateMap } from \"../Main\";\r\nimport Spoiler from \"../ui/Spoiler\";\r\nimport ObjectListTree from \"./ObjectListTree\";\r\nimport ObjectSideControls from \"./ObjectSideControls\";\r\nimport PrimitivesTable from \"./PrimitivesTable\";\r\n\r\nconst ObjectList: FunctionComponent<{\r\n  object3doTree: Object3doTree;\r\n  objStateMap: ObjectStateMap; // TODO: in the future, maybe combine the stateMap WITH The Tree... HELL YEAH and it should be called Stateful3doObjectTree and StatefulObject3do. now JUST DO IT\r\n  setObjStateMap: (newObjectStateMap: ObjectStateMap) => void;\r\n}> = ({\r\n  object3doTree,\r\n  objStateMap,\r\n  setObjStateMap,\r\n}) => {\r\n  const [nodeStack, setNodeStack] = useState<Object3do[]>([]);\r\n\r\n  const currentParent: Object3do | null = nodeStack.length === 0\r\n    ? null // (aka root)\r\n    : nodeStack[nodeStack.length - 1]!; // top of the stack\r\n\r\n  const currentChildren: Object3do[] = currentParent === null\r\n    ? object3doTree.rootNodes\r\n    : currentParent.children;\r\n\r\n  const currentObjState = currentParent && objStateMap.get(currentParent);\r\n\r\n  const pathing = useMemo(() => {\r\n    const sep = <div class=\"mx-1 text-pink-600\">&raquo;</div>;\r\n    const selCss = 'font-bold';\r\n    const unselCss = 'cursor-pointer text-gray-400 hover:text-white';\r\n\r\n    return (\r\n      <div class=\"flex flex-wrap bg-gray-900 px-1 py-0.5\">\r\n        <div\r\n          class={currentParent === null ? selCss : unselCss}\r\n          onClick={() => setNodeStack([])}\r\n        >\r\n          <span class=\"italic\">(ROOT)</span>\r\n        </div>\r\n        {currentParent !== null && sep}\r\n        {nodeStack.map((node, index) => (\r\n          <Fragment key={index}>\r\n            <div\r\n              onClick={() => setNodeStack(nodeStack.slice(0, index + 1))}\r\n              class={index === nodeStack.length - 1 ? selCss : unselCss}\r\n            >\r\n              {node.name}\r\n            </div>\r\n            {index < nodeStack.length - 1 && sep}\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    );\r\n  }, [nodeStack, currentParent]);\r\n\r\n  const currentParentInfo = useMemo(() => (\r\n    <div\r\n      class={'flex py-1 bg-cyan-900 border border-yellow-500 text-sm'}\r\n    >\r\n      <div class=\"min-w-0 grow px-1 pl-2\">\r\n        {currentParent === null\r\n          ? <span class=\"italic\">(ROOT)</span>\r\n          : (currentParent.name ?? <span class=\"text-gray-300\">{'<empty name>'}</span>)}\r\n      </div>\r\n\r\n      {currentObjState && (\r\n        <ObjectSideControls\r\n          state={currentObjState}\r\n          setState={(newObjState) => {\r\n            const newMap = Utils.createUpdatedMap(objStateMap, currentParent, newObjState);\r\n            setObjStateMap(newMap);\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  ), [currentParent, currentObjState, objStateMap, setObjStateMap]);\r\n\r\n  const currentParentPositions = useMemo(() => {\r\n    if (currentParent === null || currentParent.primitives.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div class=\"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300\">\r\n        <Spoiler title=\"Vertices\">\r\n          <div class=\"border-t border-gray-700 mt-1 pt-1 text-xs\">\r\n            <span class=\"break-all\">\r\n              [{currentParent.vertices.map((v) => `[${v.x}, ${v.y}, ${v.z}]`).join(', ')}]\r\n            </span>\r\n          </div>\r\n        </Spoiler>\r\n      </div>\r\n    );\r\n  }, [currentParent]);\r\n\r\n  const currentParentPrimitives = useMemo(() => {\r\n    if (currentParent === null || currentParent.primitives.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div class=\"border border-dashed border-gray-500 px-2 py-1 mt-2 mb-1 text-sm text-gray-300\">\r\n        <Spoiler title=\"Primitives\">\r\n          <div class=\"border-t border-gray-700 mt-1 pt-1 text-xs\">\r\n            <PrimitivesTable primitives={currentParent.primitives} />\r\n          </div>\r\n        </Spoiler>\r\n      </div>\r\n    );\r\n  }, [currentParent]);\r\n\r\n  return (\r\n    <div class=\"flex flex-col h-full overflow-hidden\">\r\n      <div className=\"px-6\">\r\n        <div class=\"mb-4\">\r\n          {pathing}\r\n        </div>\r\n\r\n        <div class=\"mb-2 font-bold\">Current:</div>\r\n\r\n        {currentParentInfo}\r\n        <div class=\"pl-4\">\r\n          {currentParentPositions}\r\n          {currentParentPrimitives}\r\n        </div>\r\n\r\n        {currentChildren.length > 0 && (\r\n          <div class=\"mt-6 mb-2 font-bold flex justify-between\">\r\n            <span>Children:</span>\r\n            <span>({currentChildren.length})</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* <ul class=\"grow overflow-auto list-disc pl-6 pr-4 text-sm\"></ul> */}\r\n      <div class=\"grow overflow-auto px-6\">\r\n        <ObjectListTree\r\n          current={null}\r\n          nodes={currentChildren}\r\n          onChangeNodeStack={setNodeStack}\r\n          nodeStack={nodeStack}\r\n          objStateMap={objStateMap}\r\n          setObjStateMap={setObjStateMap}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ObjectList;\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { TextureMapping } from \"../../lib/texture-mapping\";\r\n\r\ntype TextureListProps = {\r\n  textures: TextureMapping;\r\n  setTextures?: (t: TextureMapping) => void;\r\n};\r\n\r\nconst TextureList: FunctionComponent<TextureListProps> = ({\r\n  textures,\r\n  setTextures,\r\n}) => {\r\n  return (\r\n    <div class=\"flex flex-col space-y-2\">\r\n      {Object.entries(textures).map(([key, value], index) => {\r\n        let isOk = value !== null;\r\n\r\n        if (value !== null && value.type === 'html') {\r\n          isOk = value.image.complete && value.image.naturalWidth !== 0;\r\n        }\r\n\r\n        const msg = isOk ? 'OK' : 'ERROR';\r\n\r\n        return (\r\n          <div\r\n            key={index}\r\n            class={'flex items-center group'\r\n              + (isOk ? ' text-green-600 hover:text-green-500' : ' text-red-600 hover:text-red-500')}\r\n          >\r\n            <div class=\"break-all\">{key}</div>\r\n\r\n            <div\r\n              class=\"grow border-b border-dashed border-gray-600 group-hover:border-gray-500 mx-1\r\n                text-transparent text-center\"\r\n              style={{ minWidth: '24px', marginBottom: '6px' }}\r\n            >\r\n              -\r\n            </div>\r\n\r\n            {value?.type === 'html' ? (\r\n              <a href={value.image.src} target=\"_blank\" rel=\"noreferrer\">{msg}</a>\r\n            ) : (\r\n              <div>{msg}</div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextureList;\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { useCallback, useState } from \"preact/hooks\";\r\nimport { IoUtils } from \"../../lib/io-utils\";\r\nimport { TextureMapping } from \"../../lib/texture-mapping\";\r\nimport TextureList from \"./TextureList\";\r\n\r\ntype TextureManagerProps = {\r\n  regularTextures: TextureMapping;\r\n  customTextures: TextureMapping;\r\n  setCustomTextures: (t: TextureMapping) => void;\r\n};\r\n\r\nconst validFormats = ['image/png', 'image/gif', 'image/jpeg'];\r\n\r\nconst TextureManager: FunctionComponent<TextureManagerProps> = ({\r\n  regularTextures,\r\n  customTextures,\r\n  setCustomTextures,\r\n}) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const loadFiles = useCallback(async (files: FileList) => {\r\n    const newMapping: TextureMapping = {};\r\n\r\n    for (const file of files) {\r\n      if (!validFormats.includes(file.type)) {\r\n        continue;\r\n      }\r\n\r\n      const updateMapping = (image: HTMLImageElement) => {\r\n        const fileBasename = file.name\r\n          .replace(/^.*[\\\\\\/]/, '')   // get filename (remove parent directories)\r\n          .replace(/\\.[^/.]+$/, '');  // get basename (remove extension)\r\n\r\n        newMapping[fileBasename] = { type: 'html', image };\r\n      };\r\n\r\n      await IoUtils.loadDataUrl(file)\r\n        .then(IoUtils.createImageFromDataUrl)\r\n        .then(updateMapping)\r\n        .catch(console.error);\r\n    }\r\n\r\n    setCustomTextures({\r\n      ...customTextures,\r\n      ...newMapping,\r\n    });\r\n  }, [customTextures, setCustomTextures]);\r\n\r\n  const fileInput = (\r\n    <input\r\n      type=\"file\"\r\n      multiple={true}\r\n      accept={validFormats.join(', ')}\r\n      disabled={isLoading}\r\n      onChange={(ev) => {\r\n        if (isLoading) {\r\n          ev.currentTarget.value = '';\r\n          return;\r\n        }\r\n\r\n        const files = ev.currentTarget.files;\r\n\r\n        if (files !== null) {\r\n          setIsLoading(true);\r\n\r\n          loadFiles(files).finally(() => {\r\n            setIsLoading(false);\r\n          });\r\n        }\r\n\r\n        ev.currentTarget.value = '';\r\n      }}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div class=\"flex flex-col max-h-full overflow-hidden\">\r\n\r\n      <div class=\"text-center font-bold mb-2\">Custom Textures</div>\r\n      <div class=\"grow overflow-auto px-6\">\r\n        <TextureList textures={customTextures} setTextures={setCustomTextures} />\r\n      </div>\r\n      <div className=\"px-6 mt-2\">{fileInput}</div>\r\n      <div class=\"mb-6\" />\r\n\r\n      <div class=\"text-center font-bold mb-2\">TAK Textures</div>\r\n      <div class=\"grow overflow-auto px-6\">\r\n        <TextureList textures={regularTextures} />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextureManager;\r\n","import { Object3do, Object3doTree } from \"@takingdoms/lib-3do\";\r\nimport { FunctionComponent, h } from 'preact';\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"preact/hooks\";\r\nimport { Engine, EngineConfig, EngineListener } from \"../lib/engines/engine\";\r\nimport { UiDebugEngine } from \"../lib/engines/ui-debug-engine\";\r\nimport { WebglEngine, WebglEngineShaderSources } from \"../lib/engines/webgl-engine\";\r\nimport { TakLogoColorsDefinitions } from \"../lib/logo-colors\";\r\nimport { ObjectState } from \"../lib/object-state\";\r\nimport { UserService } from \"../lib/services/user-service\";\r\nimport { TextureMapping } from \"../lib/texture-mapping\";\r\nimport { ModelControls } from \"../lib/types/model-controls\";\r\nimport { UserSettings } from \"../lib/types/user-settings\";\r\nimport CanvasWrapper from \"./canvas/CanvasWrapper\";\r\nimport ObjectList from \"./object-list/ObjectList\";\r\nimport Options from \"./options/Options\";\r\nimport TextureManager from \"./textures/TextureManager\";\r\n\r\nconst CONTENT_WIDTH = '1600px';\r\n\r\ntype SidebarTab = 'options' | 'objects' | 'textures';\r\nconst SIDEBAR_TABS = ['options', 'objects', 'textures'] as const;\r\n\r\nexport type ObjectStateMap = Map<Object3do, ObjectState>;\r\n\r\nconst Main: FunctionComponent<{\r\n  engineName: 'webgl' | 'ui-debug';\r\n  shaders: WebglEngineShaderSources;\r\n  object3doTree: Object3doTree;\r\n  regularTextures: TextureMapping;\r\n  defaultObjStateMap: ObjectStateMap;\r\n  logoDefs: TakLogoColorsDefinitions;\r\n  userService: UserService;\r\n  defaultUserSettings: UserSettings;\r\n  defaultModelControls: ModelControls;\r\n}> = ({\r\n  engineName,\r\n  shaders,\r\n  object3doTree,\r\n  regularTextures,\r\n  defaultObjStateMap,\r\n  logoDefs,\r\n  userService,\r\n  defaultUserSettings,\r\n  defaultModelControls,\r\n}) => {\r\n  console.log('Re-rendering App');\r\n\r\n  //:: States & Refs\r\n\r\n  const [expandContent, setExpandContent] = useState(false);\r\n  const [sidebarTab, setSidebarTab] = useState<SidebarTab>('options');\r\n  const [modelControls, setModelControls] = useState(defaultModelControls);\r\n  const [objStateMap, setObjStateMap] = useState<ObjectStateMap>(defaultObjStateMap);\r\n  const [engine, setEngine] = useState<Engine>();\r\n\r\n  const [userSettings, _setUserSettings] = useState(defaultUserSettings);\r\n  const setUserSettings = useCallback((newUserSettings: UserSettings) => {\r\n    _setUserSettings(newUserSettings);\r\n    userService.save(newUserSettings);\r\n  }, [userService]);\r\n\r\n  const [customTextures, setCustomTextures] = useState<TextureMapping>({});\r\n\r\n  const canvasRef = useRef<HTMLCanvasElement>();\r\n\r\n  //:: Effects\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (!canvas) {\r\n      return;\r\n    }\r\n\r\n    canvas.width = canvas.clientWidth;\r\n    canvas.height = canvas.clientHeight;\r\n\r\n    console.log('Creating the Engine');\r\n\r\n    const engineListener: EngineListener = {\r\n      onModelControlsChanged: setModelControls,\r\n    };\r\n\r\n    const engineConfig: EngineConfig = {\r\n      mode: 'static',\r\n      canvas: canvas,\r\n      modelControls: defaultModelControls,\r\n      listener: engineListener,\r\n      textureMapping: { ...regularTextures },\r\n      objStateMap: defaultObjStateMap,\r\n      preserveDrawingBuffer: defaultUserSettings.preserveDrawingBuffer,\r\n    };\r\n\r\n    const engine = engineName === 'webgl'\r\n      ? new WebglEngine(engineConfig, shaders, object3doTree, logoDefs)\r\n      : new UiDebugEngine(engineConfig);\r\n\r\n    setEngine(engine);\r\n\r\n    return () => {\r\n      engine.destroy();\r\n      setEngine(undefined);\r\n      alert(`Unmounting the engine. This should probably not be happening normally!!!`);\r\n    };\r\n    // \\/ important: all dependencies should come from non-stateful values: AKA never change\r\n  }, [canvasRef, shaders, defaultObjStateMap, engineName, object3doTree, regularTextures, logoDefs,\r\n      defaultModelControls, defaultUserSettings]);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (!canvas) {\r\n      return;\r\n    }\r\n\r\n    canvas.style.background = modelControls.canvasBackground;\r\n    canvas.style.backgroundSize = modelControls.canvasBackgroundSize;\r\n    canvas.style.backgroundRepeat = modelControls.canvasBackgroundRepeat;\r\n    canvas.style.backgroundPosition = 'center';\r\n  }, [canvasRef, modelControls]);\r\n\r\n  //:: Memos\r\n\r\n  const canvasWrapper = useMemo(() => (\r\n    <CanvasWrapper canvasRef={canvasRef} />\r\n  ), [canvasRef]);\r\n\r\n  const canvasPanel = useMemo(() => (\r\n    <div class=\"h-full flex flex-col\">\r\n      <div class=\"flex text-white border-b border-gray-700\">\r\n        <div class=\"grow px-4 py-4 text-center\">\r\n          Canvas\r\n        </div>\r\n        <div\r\n          class=\"px-4 py-4 cursor-pointer hover:bg-blue-700 font-mono\"\r\n          onClick={() => setExpandContent(!expandContent)}\r\n        >\r\n          {expandContent ? '>[ ]<' : '<[ ]>'}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"grow p-6\">\r\n        {canvasWrapper}\r\n      </div>\r\n    </div>\r\n  ), [canvasWrapper, expandContent]);\r\n\r\n  const optionsPanel = useMemo(() => (\r\n    <Options\r\n      modelControls={modelControls}\r\n      setModelControls={(newModelControls) => {\r\n        setModelControls(newModelControls);\r\n\r\n        if (newModelControls.textureFilterMin !== modelControls.textureFilterMin ||\r\n            newModelControls.textureFilterMag !== modelControls.textureFilterMag)\r\n        {\r\n          setUserSettings({\r\n            ...userSettings,\r\n            defaultTextureFilterMin: newModelControls.textureFilterMin,\r\n            defaultTextureFilterMag: newModelControls.textureFilterMag,\r\n          });\r\n        }\r\n\r\n        if (engine) {\r\n          engine.setModelControls(newModelControls);\r\n        }\r\n      }}\r\n      userSettings={userSettings}\r\n      setUserSettings={setUserSettings}\r\n      logoDefs={logoDefs}\r\n      canvasRef={canvasRef}\r\n    />\r\n  ), [engine, modelControls, userSettings, setUserSettings, logoDefs, canvasRef]);\r\n\r\n  const objectsPanel = useMemo(() => {\r\n    return (\r\n      <ObjectList\r\n        object3doTree={object3doTree}\r\n        objStateMap={objStateMap}\r\n        setObjStateMap={(newObjStateMap) => {\r\n          setObjStateMap(newObjStateMap);\r\n\r\n          if (engine) {\r\n            engine.setObjectStateMap(newObjStateMap);\r\n          }\r\n        }}\r\n      />\r\n    );\r\n  }, [engine, object3doTree, objStateMap]);\r\n\r\n  const texturesPanel = useMemo(() => {\r\n    return (\r\n      <TextureManager\r\n        regularTextures={regularTextures}\r\n        customTextures={customTextures}\r\n        setCustomTextures={(newCustomTextures) => {\r\n          if (engine) {\r\n            engine.setTextureMapping({ ...regularTextures, ...newCustomTextures });\r\n          }\r\n\r\n          setCustomTextures(newCustomTextures);\r\n        }}\r\n      />\r\n    );\r\n  }, [engine, customTextures, regularTextures]);\r\n\r\n  const sidebar = useMemo(() => {\r\n    return (\r\n      <div class=\"h-full flex flex-col\">\r\n        <div class=\"flex text-white border-b border-gray-700\">\r\n          {SIDEBAR_TABS.map((tab, index, arr) => {\r\n            const isSelected = tab === sidebarTab;\r\n\r\n            const seletedCss = isSelected\r\n              ? 'font-bold'\r\n              : 'cursor-pointer text-gray-400 hover:text-white';\r\n\r\n            const borderCss = index !== arr.length - 1\r\n              ? 'border-r border-gray-700'\r\n              : '';\r\n\r\n            return (\r\n              <div\r\n                key={index}\r\n                class={`grow basis-0 px-2 py-4 text-center ${seletedCss} ${borderCss}`}\r\n                onClick={() => {\r\n                  if (!isSelected) {\r\n                    setSidebarTab(tab as SidebarTab);\r\n                  }\r\n                }}\r\n              >\r\n                {tab === 'options' ? 'Options'\r\n                  : tab === 'objects' ? 'Objects'\r\n                  : 'Textures'}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        <div\r\n          class=\"grow max-h-full overflow-hidden py-6\"\r\n          style={{ width: userSettings.sidebarWidth, overflowX: 'auto' }}\r\n        >\r\n          {sidebarTab === 'options' ? optionsPanel\r\n            : sidebarTab === 'objects' ? objectsPanel\r\n            : texturesPanel}\r\n        </div>\r\n      </div>\r\n    );\r\n  }, [sidebarTab, optionsPanel, userSettings, objectsPanel, texturesPanel]);\r\n\r\n  //:: Final result\r\n\r\n  const contentBorderCss = expandContent ? ' border-gray-800' : ' border-gray-700';\r\n  const flexDirCss = userSettings.sidebarPosition === 'left' ? '' : ' flex-row-reverse';\r\n\r\n  const sidebarBorderCss = userSettings.sidebarPosition === 'left' ? ' border-r' : ' border-l';\r\n\r\n  return (\r\n    <div class=\"flex justify-center items-stretch h-screen overflow-hidden bg-gray-900\">\r\n      <div\r\n        class={`grow flex bg-gray-800 border ${contentBorderCss} ${flexDirCss}`}\r\n        style={{ \"max-width\": expandContent ? '100%' : CONTENT_WIDTH }}\r\n      >\r\n        <div class={`hidden lg:block border-gray-700 ${sidebarBorderCss}`}>\r\n          {sidebar}\r\n        </div>\r\n        <div class=\"grow\">\r\n          {canvasPanel}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import { Object3do, Object3doTree, Parse3do } from \"@takingdoms/lib-3do\";\r\nimport { FunctionComponent,h  } from \"preact\";\r\nimport { useEffect, useMemo, useState } from \"preact/hooks\";\r\nimport { WebglEngineShaderSources } from \"../../lib/engines/webgl-engine\";\r\nimport { defaultLogoColorsDefinitions, TakLogoColorsDefinitions, TakLogoIndex } from \"../../lib/logo-colors\";\r\nimport { UserService } from \"../../lib/services/user-service\";\r\nimport { TextureMapping } from \"../../lib/texture-mapping\";\r\nimport { ModelControls } from \"../../lib/types/model-controls\";\r\nimport { UserSettings } from \"../../lib/types/user-settings\";\r\nimport { Utils } from \"../../lib/utils\";\r\nimport Main, { ObjectStateMap } from \"../Main\";\r\n\r\nconst Loader: FunctionComponent<{\r\n  dataSource: File | string; // string = url\r\n  userService: UserService;\r\n  defaultUserSettings: UserSettings;\r\n  defaultModelControls: ModelControls;\r\n}> = ({ dataSource, userService, defaultUserSettings, defaultModelControls }) => {\r\n  const [result, setResult] = useState<Object3doTree>();\r\n  const [shaders, setShaders] = useState<WebglEngineShaderSources>();\r\n  const [textures, setTextures] = useState<TextureMapping>();\r\n  const [error, setError] = useState<any>();\r\n\r\n  const logoDefs = defaultLogoColorsDefinitions;\r\n\r\n  // TODO move this up in the component tree since shaders can be loaded BEFORE the user selects a\r\n  // dataSource\r\n  useEffect(() => {\r\n    loadShaders()\r\n      .then(setShaders);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadModel(dataSource)\r\n      .then((res) => {\r\n        setResult(res);\r\n        return loadTextures(res, logoDefs, 'assets/custom/pngs/', 'png');\r\n      })\r\n      .then(setTextures)\r\n      .catch(setError);\r\n  }, [dataSource]);\r\n\r\n  if (error !== undefined) {\r\n    return (\r\n      <div\r\n        class=\"min-w-screen min-h-screen flex flex-col justify-center items-center text-3xl\r\n          bg-black\"\r\n      >\r\n        <div class=\"text-red-300\">Error!</div>\r\n        <div class=\"text-red-600\">(TODO)</div>\r\n        <div class=\"text-red-600\">{JSON.stringify(error)}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (result === undefined || shaders === undefined || textures === undefined) {\r\n    let message = 'Loading...';\r\n\r\n    if (result && shaders) {\r\n      message = 'Loading textures...';\r\n    }\r\n\r\n    return (\r\n      <div class=\"min-w-screen min-h-screen flex justify-center items-center text-3xl bg-black\">\r\n        <span class=\"text-gray-400\">\r\n          {message}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const defaultViewMode = useMemo(() => {\r\n    const allTexturesFailed = Object.values(textures).every((value) => value === null);\r\n\r\n    return allTexturesFailed ? 'wireframe' : defaultModelControls.viewMode;\r\n  }, [textures, defaultModelControls]);\r\n\r\n  const defaultLogoColorIdx: TakLogoIndex = useMemo(() => {\r\n    const fileName = typeof dataSource === 'string'\r\n      ? dataSource.replace(/^.*[\\\\\\/]/, '')\r\n      : dataSource.name; // File type\r\n\r\n    if (fileName.startsWith('ara')) return 3;\r\n    if (fileName.startsWith('tar')) return 1;\r\n    if (fileName.startsWith('ver')) return 0;\r\n    if (fileName.startsWith('zon')) return 7;\r\n    if (fileName.startsWith('cre')) return 6;\r\n\r\n    return defaultModelControls.logoColorIdx;\r\n  }, [defaultModelControls, dataSource]);\r\n\r\n  return (\r\n    <Main\r\n      engineName=\"webgl\"\r\n      object3doTree={result}\r\n      shaders={shaders}\r\n      regularTextures={textures}\r\n      defaultObjStateMap={createStateMap(result)}\r\n      logoDefs={logoDefs}\r\n      userService={userService}\r\n      defaultUserSettings={defaultUserSettings}\r\n      defaultModelControls={{\r\n        ...defaultModelControls,\r\n        viewMode: defaultViewMode,\r\n        logoColorIdx: defaultLogoColorIdx,\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Loader;\r\n\r\nfunction createStateMap(object3doTree: Object3doTree): ObjectStateMap {\r\n  const result: ObjectStateMap = new Map();\r\n\r\n  const next = (node: Object3do) => {\r\n    result.set(node, {\r\n      highlight: false,\r\n      hide: false,\r\n    });\r\n\r\n    for (const child of node.children) {\r\n      next(child);\r\n    }\r\n  };\r\n\r\n  for (const rootChild of object3doTree.rootNodes) {\r\n    next(rootChild);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nasync function loadShaders(): Promise<WebglEngineShaderSources> {\r\n  return {\r\n    regular: {\r\n      fsSource: await fetch('assets/shaders/regular.fs').then((res) => res.text()),\r\n      vsSource: await fetch('assets/shaders/regular.vs').then((res) => res.text()),\r\n    },\r\n    solid: {\r\n      fsSource: await fetch('assets/shaders/solid_color.fs').then((res) => res.text()),\r\n      vsSource: await fetch('assets/shaders/solid_color.vs').then((res) => res.text()),\r\n    },\r\n    wireframe: {\r\n      fsSource: await fetch('assets/shaders/wireframe.fs').then((res) => res.text()),\r\n      vsSource: await fetch('assets/shaders/wireframe.vs').then((res) => res.text()),\r\n    },\r\n  };\r\n}\r\n\r\nasync function loadModel(dataSource: File | string): Promise<Object3doTree> {\r\n  let data: ArrayBuffer;\r\n\r\n  if (typeof dataSource === 'string') {\r\n    const response = await fetch(dataSource);\r\n    data = await response.arrayBuffer();\r\n  }\r\n  else {\r\n    data = await dataSource.arrayBuffer();\r\n  }\r\n\r\n  const view = new DataView(data);\r\n  return Parse3do.fromBuffer(view);\r\n}\r\n\r\nasync function loadTextures(\r\n  tree: Object3doTree,\r\n  logoDefs: TakLogoColorsDefinitions,\r\n  basePath: string,\r\n  fileExtension: string,\r\n): Promise<TextureMapping> {\r\n  const textureNames = new Set<string>();\r\n\r\n  const loadNext = (node: Object3do) => {\r\n    for (const primitive of node.primitives) {\r\n      const textureName = primitive.textureName;\r\n\r\n      if (Utils.validateTextureName(textureName)) {\r\n        textureNames.add(textureName);\r\n      }\r\n    }\r\n\r\n    for (const child of node.children) {\r\n      loadNext(child);\r\n    }\r\n  };\r\n\r\n  for (const rootNode of tree.rootNodes) {\r\n    loadNext(rootNode);\r\n  }\r\n\r\n  const result: TextureMapping = {};\r\n\r\n  await Promise.all(Array.from(textureNames).map((textureName) => {\r\n    return new Promise<void>((resolve, reject) => {\r\n      textureName = textureName.trim();\r\n\r\n      if (textureName === '') {\r\n        result[textureName] = null;\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const usesLogo = logoDefs.textureKeyUsesLogo(textureName);\r\n\r\n      if (!usesLogo) {\r\n        const textureFilePath = `${textureName}.${fileExtension}`;\r\n\r\n        const image = new Image();\r\n        image.src = basePath + textureFilePath;\r\n\r\n        image.onerror = () => {\r\n          console.error(`Failed to load image at: ${image.src}`);\r\n          result[textureName] = null;\r\n          resolve();\r\n        };\r\n\r\n        image.onload = () => {\r\n          result[textureName] = { type: 'html', image };\r\n          resolve();\r\n        };\r\n\r\n        return;\r\n      }\r\n\r\n      Promise.all(logoDefs.idxList.map((nextIdx) => {\r\n        return new Promise<void>((resolveInner, _rejectInner) => {\r\n          const logoTextureName = logoDefs.idxToTextureKey(nextIdx, textureName);\r\n          const textureFileName = logoDefs.idxToTextureFilename(nextIdx, textureName);\r\n          const textureFilePath = `${textureFileName}.${fileExtension}`;\r\n\r\n          const image = new Image();\r\n          image.src = basePath + textureFilePath;\r\n\r\n          image.onerror = () => {\r\n            console.error(`Failed to load image at: ${image.src}`);\r\n            result[logoTextureName] = null;\r\n            resolveInner();\r\n          };\r\n\r\n          image.onload = () => {\r\n            result[logoTextureName] = { type: 'html', image };\r\n            resolveInner();\r\n          };\r\n        });\r\n      })).then(() => resolve(), reject);\r\n    });\r\n  }));\r\n\r\n  return result;\r\n}\r\n","import { h } from 'preact';\r\nimport { useEffect, useState } from \"preact/hooks\";\r\nimport { localStorageUserService } from \"../lib/services/user-service\";\r\nimport { DEFAULT_MODEL_CONTROLS, ModelControls } from \"../lib/types/model-controls\";\r\nimport { UserSettings, DEFAULT_USER_SETTINGS } from \"../lib/types/user-settings\";\r\nimport FileChooser from \"./loader/FileChooser\";\r\nimport Loader from \"./loader/Loader\";\r\n\r\nconst App = () => {\r\n  const [dataSource, setDataSource] = useState<File | string>(); // string = url\r\n\r\n  const [userService] = useState(localStorageUserService);\r\n  const [defaultUserSettings, setDefaultUserSettings] = useState<UserSettings>();\r\n  const [defaultModelControls, setDefaultModelControls] = useState<ModelControls>();\r\n\r\n  useEffect(() => {\r\n    let userSettings: UserSettings;\r\n\r\n    try {\r\n      userSettings = userService.load() ?? DEFAULT_USER_SETTINGS;\r\n    } catch (err) {\r\n      console.error(err);\r\n      userSettings = DEFAULT_USER_SETTINGS;\r\n      userService.save(userSettings);\r\n    }\r\n\r\n    setDefaultUserSettings(userSettings);\r\n\r\n    setDefaultModelControls({\r\n      ...DEFAULT_MODEL_CONTROLS,\r\n      textureFilterMin: userSettings.defaultTextureFilterMin,\r\n      textureFilterMag: userSettings.defaultTextureFilterMag,\r\n    });\r\n  }, [userService]);\r\n\r\n  if (defaultUserSettings === undefined || defaultModelControls === undefined) {\r\n    return (\r\n      <div class=\"min-h-screen flex justify-center items-center\">\r\n        <span>Loading...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (dataSource === undefined) {\r\n    return (\r\n      <FileChooser\r\n        onSubmit={setDataSource}\r\n        defaultUserSettings={defaultUserSettings}\r\n        setDefaultUserSettings={(newUserSettings) => {\r\n          setDefaultUserSettings(newUserSettings);\r\n          userService.save(newUserSettings);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Loader\r\n      dataSource={dataSource}\r\n      userService={userService}\r\n      defaultUserSettings={defaultUserSettings}\r\n      defaultModelControls={defaultModelControls}\r\n    />\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import './style/index.css';\r\nimport App from './components/App';\r\n\r\nexport default App;\r\n\r\n/*\r\n  Components will load like this:\r\n  App -> FileChooser -> Loader -> Main\r\n*/\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { ModelControls } from \"../../../lib/types/model-controls\";\r\nimport ColorControl from \"../../ui/ColorControl\";\r\n\r\nconst SolidColorOptions: FunctionComponent<{\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n}> = ({\r\n  modelControls,\r\n  setModelControls,\r\n}) => {\r\n  return (\r\n    <div class=\"space-y-4\">\r\n\r\n      <div>\r\n        <label class=\"flex items-center\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={modelControls.enableLightingSolidColor}\r\n            onChange={(ev) => {\r\n              setModelControls({\r\n                ...modelControls,\r\n                enableLightingSolidColor: ev.currentTarget.checked,\r\n              });\r\n            }}\r\n          />\r\n          <span class=\"pl-1\">Enable Lighting</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div>\r\n        <div class=\"\">\r\n          Solid Color\r\n        </div>\r\n\r\n        <ColorControl\r\n          color={modelControls.solidColor}\r\n          setColor={(solidColor) => setModelControls({ ...modelControls, solidColor })}\r\n        />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SolidColorOptions;\r\n","import { FunctionComponent, h } from 'preact';\r\nimport { MutableRef, useCallback, useEffect, useMemo, useState } from \"preact/hooks\";\r\nimport { IoUtils } from \"../../lib/io-utils\";\r\nimport { ModelControls } from \"../../lib/types/model-controls\";\r\nimport { UserSettings } from \"../../lib/types/user-settings\";\r\n\r\nconst OptionsMisc: FunctionComponent<{\r\n  modelControls: ModelControls;\r\n  setModelControls: (m: ModelControls) => void;\r\n  canvasRef: MutableRef<HTMLCanvasElement | undefined>;\r\n  enableSaveImageButton: boolean;\r\n}> = ({\r\n  modelControls,\r\n  setModelControls,\r\n  enableSaveImageButton,\r\n  canvasRef,\r\n}) => {\r\n  const [canvasBg, setCanvasBg] = useState(getInitialBg(modelControls.canvasBackground));\r\n\r\n  const onChangeCanvasBg = useCallback((value: string) => {\r\n    setCanvasBg(value);\r\n\r\n    if (value !== 'custom') {\r\n      setModelControls({ ...modelControls, canvasBackground: value });\r\n    }\r\n  }, [modelControls, setModelControls]);\r\n\r\n  const customBgFile = useMemo(() => {\r\n    if (canvasBg !== 'custom') {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <input\r\n        type=\"file\"\r\n        multiple={false}\r\n        onChange={(ev) => {\r\n          const files = ev.currentTarget.files;\r\n\r\n          if (files === null || files.length === 0) {\r\n            ev.currentTarget.value = '';\r\n            return;\r\n          }\r\n\r\n          const file = files[0]!;\r\n\r\n          IoUtils.loadDataUrl(file).then((dataUrl) => {\r\n            const imageUrl = `url(${dataUrl})`;\r\n            setModelControls({ ...modelControls, canvasBackground: imageUrl });\r\n          });\r\n        }}\r\n      />\r\n    );\r\n  }, [canvasBg, modelControls, setModelControls]);\r\n\r\n  const selectBgSize = useMemo(() => {\r\n    if (canvasBg !== 'custom') {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>Background Size</div>\r\n        <select\r\n          class=\"w-full\"\r\n          value={modelControls.canvasBackgroundSize}\r\n          onChange={(ev) => {\r\n            setModelControls({ ...modelControls, canvasBackgroundSize: ev.currentTarget.value as any })\r\n          }}\r\n        >\r\n          <option value=\"auto\">Auto</option>\r\n          <option value=\"cover\">Cover</option>\r\n          <option value=\"contain\">Contain</option>\r\n        </select>\r\n      </div>\r\n    );\r\n  }, [canvasBg, modelControls]);\r\n\r\n  const selectBgRepeat = useMemo(() => {\r\n    if (canvasBg !== 'custom' || modelControls.canvasBackgroundSize === 'cover') {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>Background Repeat</div>\r\n        <select\r\n          class=\"w-full\"\r\n          value={modelControls.canvasBackgroundRepeat}\r\n          onChange={(ev) => {\r\n            setModelControls({ ...modelControls, canvasBackgroundRepeat: ev.currentTarget.value as any })\r\n          }}\r\n        >\r\n          <option value=\"repeat\">On</option>\r\n          <option value=\"no-repeat\">Off</option>\r\n        </select>\r\n      </div>\r\n    );\r\n  }, [canvasBg, modelControls]);\r\n\r\n  const saveCanvasImage = useCallback(() => {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (canvas === undefined) {\r\n      return;\r\n    }\r\n\r\n    const dataURL = canvas.toDataURL();\r\n    const downloadLink = document.createElement('a');\r\n    const timestamp = new Date().getTime();\r\n\r\n    downloadLink.href = dataURL;\r\n    downloadLink.download = `3do-${timestamp}.png`;\r\n    document.body.appendChild(downloadLink);\r\n    downloadLink.click();\r\n    document.body.removeChild(downloadLink);\r\n  }, [canvasRef]);\r\n\r\n  const saveImageButton = useMemo(() => {\r\n    if (!enableSaveImageButton) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div class=\"text-center\">\r\n        <button\r\n          class=\"text-white hover:text-yellow-500 focus:text-yellow-500\"\r\n          onClick={saveCanvasImage}\r\n        >\r\n          Save Model Image\r\n        </button>\r\n      </div>\r\n    );\r\n  }, [enableSaveImageButton, saveCanvasImage]);\r\n\r\n  return (\r\n    <div class=\"space-y-4\">\r\n      {saveImageButton}\r\n\r\n      <div>\r\n        Canvas Background\r\n        <select\r\n          class=\"w-full\"\r\n          value={canvasBg}\r\n          onChange={(ev) => onChangeCanvasBg(ev.currentTarget.value)}\r\n        >\r\n          <option value=\"transparent\">Transparent</option>\r\n          <option value=\"black\">Black</option>\r\n          <option value=\"white\">White</option>\r\n          <option value=\"custom\">(Custom Image)</option>\r\n        </select>\r\n\r\n        <div class=\"mt-0.5\">\r\n          {customBgFile}\r\n        </div>\r\n      </div>\r\n\r\n      {selectBgSize}\r\n\r\n      {selectBgRepeat}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OptionsMisc;\r\n\r\nfunction getInitialBg(canvasBg: string): string {\r\n  if (canvasBg === 'black' || canvasBg === 'white' || canvasBg === 'transparent') {\r\n    return canvasBg;\r\n  }\r\n\r\n  return 'custom';\r\n}\r\n","function loadDataUrl(file: File) {\r\n  const fileReader = new FileReader();\r\n\r\n  const loadDataUrlPromise = new Promise<string>((resolve, reject) => {\r\n    fileReader.onload = () => {\r\n      const result = fileReader.result;\r\n\r\n      if (typeof result === 'string') {\r\n        resolve(result);\r\n      } else {\r\n        reject(new Error(`Failed to read file: ${file.name}`));\r\n      }\r\n    };\r\n\r\n    fileReader.onerror = () => {\r\n      reject(new Error(`Failed to read file: ${file.name}`));\r\n    };\r\n  });\r\n\r\n  fileReader.readAsDataURL(file);\r\n\r\n  return loadDataUrlPromise;\r\n}\r\n\r\nfunction createImageFromDataUrl(dataUrl: string) {\r\n  return new Promise<HTMLImageElement>((resolve, reject) => {\r\n    const image = new Image();\r\n\r\n    image.onload = () => {\r\n      resolve(image);\r\n    };\r\n\r\n    image.onerror = () => {\r\n      reject(new Error(`Failed to create image for dataUrl: ${dataUrl}`));\r\n    };\r\n\r\n    image.src = dataUrl;\r\n  });\r\n}\r\n\r\nexport const IoUtils = {\r\n  loadDataUrl,\r\n  createImageFromDataUrl,\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PRIMITIVE_STRUCT_SIZE = exports.PRIMITIVE_STRUCT = exports.VERTEX_STRUCT_SIZE = exports.VERTEX_STRUCT = exports.OBJECT_STRUCT_SIZE = exports.OBJECT_STRUCT = void 0;\r\nexports.OBJECT_STRUCT = [\r\n    ['VersionSignature', 'U32'],\r\n    ['NumberOfVertexes', 'U32'],\r\n    ['NumberOfPrimitives', 'U32'],\r\n    ['UnknownFlag', 'U32'],\r\n    ['XFromParent', 'U32'],\r\n    ['YFromParent', 'U32'],\r\n    ['ZFromParent', 'U32'],\r\n    ['OffsetToObjectName', 'U32'],\r\n    ['Always_0', 'U32'],\r\n    ['OffsetToVertexArray', 'U32'],\r\n    ['OffsetToPrimitiveArray', 'U32'],\r\n    ['OffsetToSiblingObject', 'U32'],\r\n    ['OffsetToChildObject', 'U32'],\r\n];\r\n// IMPORTANT: * 4 only because coincidentally every field is an U32 (4 bytes)\r\nexports.OBJECT_STRUCT_SIZE = exports.OBJECT_STRUCT.length * 4;\r\nexports.VERTEX_STRUCT = [\r\n    ['x', 'U32'],\r\n    ['y', 'U32'],\r\n    ['z', 'U32'],\r\n];\r\n// IMPORTANT: * 4 only because coincidentally every field is an U32 (4 bytes)\r\nexports.VERTEX_STRUCT_SIZE = exports.VERTEX_STRUCT.length * 4;\r\nexports.PRIMITIVE_STRUCT = [\r\n    ['Unknown_0', 'U32'],\r\n    ['NumberOfVertexIndexes', 'U32'],\r\n    ['Always_0', 'U32'],\r\n    ['OffsetToVertexIndexArray', 'U32'],\r\n    ['OffsetToTextureName', 'U32'],\r\n    ['Unknown_1', 'U32'],\r\n    ['Unknown_2', 'U32'],\r\n    ['Unknown_3', 'U32'],\r\n];\r\n// IMPORTANT: * 4 only because coincidentally every field is an U32 (4 bytes)\r\nexports.PRIMITIVE_STRUCT_SIZE = exports.PRIMITIVE_STRUCT.length * 4;\r\n"],"sourceRoot":""}